<Type Name="ObjectDataSource" FullName="System.Web.UI.WebControls.ObjectDataSource">
  <Metadata><Meta Name="ms.openlocfilehash" Value="76830156b0a5906f2583bcff5046db698a62f5bc" /><Meta Name="ms.sourcegitcommit" Value="f9576bf8c61e3d46834aeeff50f858359f2a99ba" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="02/09/2020" /><Meta Name="ms.locfileid" Value="77106545" /></Metadata><TypeSignature Language="C#" Value="public class ObjectDataSource : System.Web.UI.DataSourceControl" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit ObjectDataSource extends System.Web.UI.DataSourceControl" />
  <TypeSignature Language="DocId" Value="T:System.Web.UI.WebControls.ObjectDataSource" />
  <TypeSignature Language="VB.NET" Value="Public Class ObjectDataSource&#xA;Inherits DataSourceControl" />
  <TypeSignature Language="C++ CLI" Value="public ref class ObjectDataSource : System::Web::UI::DataSourceControl" />
  <TypeSignature Language="F#" Value="type ObjectDataSource = class&#xA;    inherit DataSourceControl" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Web.UI.DataSourceControl</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute>
      <AttributeName>System.ComponentModel.DefaultEvent("Selecting")</AttributeName>
    </Attribute>
    <Attribute>
      <AttributeName>System.ComponentModel.DefaultProperty("TypeName")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
      <AttributeName>System.ComponentModel.Designer("System.Web.UI.Design.WebControls.ObjectDataSourceDesigner, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute>
      <AttributeName>System.Drawing.ToolboxBitmap(typeof(System.Web.UI.WebControls.ObjectDataSource))</AttributeName>
    </Attribute>
    <Attribute>
      <AttributeName>System.Web.UI.ParseChildren(true)</AttributeName>
    </Attribute>
    <Attribute>
      <AttributeName>System.Web.UI.PersistChildren(false)</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
      <AttributeName>System.ComponentModel.Designer("System.Web.UI.Design.WebControls.ObjectDataSourceDesigner, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary><span data-ttu-id="29079-101">表示为多层 Web 应用程序体系结构中的数据绑定控件提供数据的业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-101">Represents a business object that provides data to data-bound controls in multitier Web application architectures.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-102">本主题内容：</span><span class="sxs-lookup"><span data-stu-id="29079-102">In this topic:</span></span>

-   [<span data-ttu-id="29079-103">介绍</span><span class="sxs-lookup"><span data-stu-id="29079-103">Introduction</span></span>](#introduction)

-   [<span data-ttu-id="29079-104">用途</span><span class="sxs-lookup"><span data-stu-id="29079-104">Purpose</span></span>](#purpose)

-   [<span data-ttu-id="29079-105">检索数据</span><span class="sxs-lookup"><span data-stu-id="29079-105">Retrieving Data</span></span>](#retrieving_data)

-   [<span data-ttu-id="29079-106">执行数据操作</span><span class="sxs-lookup"><span data-stu-id="29079-106">Performing Data Operations</span></span>](#performing_data_operations)

-   [<span data-ttu-id="29079-107">筛选数据</span><span class="sxs-lookup"><span data-stu-id="29079-107">Filtering Data</span></span>](#filtering_data)

-   [<span data-ttu-id="29079-108">缓存</span><span class="sxs-lookup"><span data-stu-id="29079-108">Caching</span></span>](#caching)

-   [<span data-ttu-id="29079-109">功能</span><span class="sxs-lookup"><span data-stu-id="29079-109">Features</span></span>](#features)

-   [<span data-ttu-id="29079-110">数据视图</span><span class="sxs-lookup"><span data-stu-id="29079-110">Data View</span></span>](#data_view)

-   [<span data-ttu-id="29079-111">使用 LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="29079-111">Using LINQ to SQL</span></span>](#using_linq_to_sql)

-   [<span data-ttu-id="29079-112">声明性语法</span><span class="sxs-lookup"><span data-stu-id="29079-112">Declarative Syntax</span></span>](#declarative_syntax)

<a name="introduction"></a>
## <a name="introduction"></a><span data-ttu-id="29079-113">介绍</span><span class="sxs-lookup"><span data-stu-id="29079-113">Introduction</span></span>
 <span data-ttu-id="29079-114"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件适用于你创建的类。</span><span class="sxs-lookup"><span data-stu-id="29079-114">An <xref:System.Web.UI.WebControls.ObjectDataSource> control works with a class that you create.</span></span> <span data-ttu-id="29079-115">创建检索和更新数据的方法，并向标记中的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件提供这些方法的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-115">You create methods that retrieve and update data, and you provide the names of those methods to the <xref:System.Web.UI.WebControls.ObjectDataSource> control in markup.</span></span> <span data-ttu-id="29079-116">在呈现或回发处理期间，<xref:System.Web.UI.WebControls.ObjectDataSource> 会调用您指定的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-116">During rendering or postback processing, the <xref:System.Web.UI.WebControls.ObjectDataSource> calls the methods that you have specified.</span></span>

 <span data-ttu-id="29079-117">没有 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的可视呈现。</span><span class="sxs-lookup"><span data-stu-id="29079-117">There is no visual rendering of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-118">因此，<xref:System.Web.UI.WebControls.ObjectDataSource> 不支持视觉功能，如 <xref:System.Web.UI.DataSourceControl.EnableTheming%2A> 或 <xref:System.Web.UI.DataSourceControl.SkinID%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-118">As a result, the <xref:System.Web.UI.WebControls.ObjectDataSource> does not support visual features such as the <xref:System.Web.UI.DataSourceControl.EnableTheming%2A> or <xref:System.Web.UI.DataSourceControl.SkinID%2A> property.</span></span>

<a name="purpose"></a>
## <a name="purpose"></a><span data-ttu-id="29079-119">目的</span><span class="sxs-lookup"><span data-stu-id="29079-119">Purpose</span></span>
 <span data-ttu-id="29079-120">一种很常见的应用程序设计做法是将表示层与业务逻辑分离，并在业务对象中封装业务逻辑。</span><span class="sxs-lookup"><span data-stu-id="29079-120">A very common application design practice is to separate the presentation layer from business logic and to encapsulate the business logic in business objects.</span></span> <span data-ttu-id="29079-121">这些业务对象在表示层和数据层之间形成了一个不同的层，产生了三层应用程序体系结构。</span><span class="sxs-lookup"><span data-stu-id="29079-121">These business objects form a distinct layer between the presentation layer and the data tier, resulting in a three-tier application architecture.</span></span> <span data-ttu-id="29079-122"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件使开发人员可以使用 ASP.NET 数据源控件，同时保留其三层应用程序体系结构。</span><span class="sxs-lookup"><span data-stu-id="29079-122">The <xref:System.Web.UI.WebControls.ObjectDataSource> control enables developers to use an ASP.NET data source control while retaining their three-tier application architecture.</span></span>

 <span data-ttu-id="29079-123"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件使用反射来创建业务对象的实例，并对其调用方法以检索、更新、插入和删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-123">The <xref:System.Web.UI.WebControls.ObjectDataSource> control uses reflection to create instances of business objects and to call methods on them to retrieve, update, insert, and delete data.</span></span> <span data-ttu-id="29079-124"><xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性标识 <xref:System.Web.UI.WebControls.ObjectDataSource> 使用的类的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-124">The <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property identifies the name of the class that the <xref:System.Web.UI.WebControls.ObjectDataSource> works with.</span></span> <span data-ttu-id="29079-125"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件创建并销毁每个方法调用的类的实例;它在 Web 请求的生存期内不会将对象保存在内存中。</span><span class="sxs-lookup"><span data-stu-id="29079-125">The <xref:System.Web.UI.WebControls.ObjectDataSource> control creates and destroys an instance of the class for each method call; it does not hold the object in memory for the lifetime of the Web request.</span></span> <span data-ttu-id="29079-126">如果你使用的业务对象需要多个资源，或者创建和销毁开销较高，则这是一个重要的考虑因素。</span><span class="sxs-lookup"><span data-stu-id="29079-126">This is a serious consideration if the business object that you use requires many resources or is otherwise expensive to create and destroy.</span></span> <span data-ttu-id="29079-127">使用昂贵的对象可能不是最佳的设计选择，但可以使用 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>、<xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件控制对象的生命周期。</span><span class="sxs-lookup"><span data-stu-id="29079-127">Using an expensive object might not be an optimal design choice, but you can control the life cycle of the object by using the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>, <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>, and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> events.</span></span>

> [!NOTE]
>  <span data-ttu-id="29079-128"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>和 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性标识的方法可以是实例方法或 `static` （`Shared`）方法。</span><span class="sxs-lookup"><span data-stu-id="29079-128">The methods that are identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>, and <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> properties can be instance methods or `static` (`Shared` in Visual Basic) methods.</span></span> <span data-ttu-id="29079-129">如果 `static` 方法（`Shared` 在 Visual Basic 中），则不会创建业务对象的实例，并且不会引发 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>、<xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-129">If the methods are `static` (`Shared` in Visual Basic), an instance of the business object is not created, and the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>, <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>, and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> events are not raised.</span></span>

<a name="retrieving_data"></a>
## <a name="retrieving-data"></a><span data-ttu-id="29079-130">检索数据</span><span class="sxs-lookup"><span data-stu-id="29079-130">Retrieving Data</span></span>
 <span data-ttu-id="29079-131">若要从业务对象中检索数据，请将 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性设置为用于检索数据的方法的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-131">To retrieve data from a business object, set the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property to the name of the method that retrieves data.</span></span> <span data-ttu-id="29079-132">如果该方法未返回 <xref:System.Collections.IEnumerable> 或 <xref:System.Data.DataSet> 对象，则运行时在 <xref:System.Collections.IEnumerable> 集合中包装对象。</span><span class="sxs-lookup"><span data-stu-id="29079-132">If the method does not return an <xref:System.Collections.IEnumerable> or <xref:System.Data.DataSet> object, the object is wrapped by the runtime in an <xref:System.Collections.IEnumerable> collection.</span></span> <span data-ttu-id="29079-133">如果方法签名具有参数，则可以将 <xref:System.Web.UI.WebControls.Parameter> 对象添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合，然后将这些对象绑定到要传递给 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法的值。</span><span class="sxs-lookup"><span data-stu-id="29079-133">If the method signature has parameters, you can add <xref:System.Web.UI.WebControls.Parameter> objects to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection, and then bind them to the values that you want to pass to the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-134">为了使 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件使用这些参数，这些参数必须与方法签名中的参数的名称和类型相匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-134">In order for the <xref:System.Web.UI.WebControls.ObjectDataSource> control to use the parameters, the parameters must match the names and types of the parameters in the method signature.</span></span> <span data-ttu-id="29079-135">有关详细信息，请参阅[将参数用于 ObjectDataSource 控件](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4)。</span><span class="sxs-lookup"><span data-stu-id="29079-135">For more information, see [Using Parameters with the ObjectDataSource Control](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4).</span></span>

 <span data-ttu-id="29079-136">只要调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件就会检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-136">The <xref:System.Web.UI.WebControls.ObjectDataSource> control retrieves data whenever the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is called.</span></span> <span data-ttu-id="29079-137">此方法提供对 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法的编程访问。</span><span class="sxs-lookup"><span data-stu-id="29079-137">This method provides programmatic access to the method that is specified by <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-138">当调用其 `DataBind` 方法时，绑定到 <xref:System.Web.UI.WebControls.ObjectDataSource> 的控件会自动调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-138">The method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property is called automatically by controls that are bound to the <xref:System.Web.UI.WebControls.ObjectDataSource> when their `DataBind` method is called.</span></span> <span data-ttu-id="29079-139">如果设置数据绑定控件的 `DataSourceID` 属性，则控件会根据需要自动绑定到数据源中的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-139">If you set the `DataSourceID` property of a data-bound control, the control automatically binds to data from the data source, as needed.</span></span> <span data-ttu-id="29079-140">设置 `DataSourceID` 属性是将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件绑定到数据绑定控件的建议方法。</span><span class="sxs-lookup"><span data-stu-id="29079-140">Setting the `DataSourceID` property is the recommended method for binding an <xref:System.Web.UI.WebControls.ObjectDataSource> control to a data-bound control.</span></span> <span data-ttu-id="29079-141">另外，还可以设置 `DataSource` 属性，但必须显式调用数据绑定控件的 `DataBind` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-141">Alternatively, you can set the `DataSource` property, but then you must explicitly call the `DataBind` method of the data-bound control.</span></span> <span data-ttu-id="29079-142">您可以随时以编程方式调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法来检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-142">You can call the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method programmatically at any time to retrieve data.</span></span>

 <span data-ttu-id="29079-143">有关将数据绑定控件绑定到数据源控件的详细信息，请参阅[使用数据源控件绑定到数据](https://msdn.microsoft.com/library/e41adfff-8fb8-449e-9cd1-9bd49788c5f7)。</span><span class="sxs-lookup"><span data-stu-id="29079-143">For more information about binding data-bound controls to data source controls, see [Binding to Data Using a Data Source Control](https://msdn.microsoft.com/library/e41adfff-8fb8-449e-9cd1-9bd49788c5f7).</span></span>

<a name="performing_data_operations"></a>
## <a name="performing-data-operations"></a><span data-ttu-id="29079-144">执行数据操作</span><span class="sxs-lookup"><span data-stu-id="29079-144">Performing Data Operations</span></span>
 <span data-ttu-id="29079-145">根据 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件处理的业务对象的功能，您可以执行数据操作，例如更新、插入和删除。</span><span class="sxs-lookup"><span data-stu-id="29079-145">Depending on the capabilities of the business object that the <xref:System.Web.UI.WebControls.ObjectDataSource> control works with, you can perform data operations, such as updates, insertions, and deletions.</span></span> <span data-ttu-id="29079-146">若要执行这些数据操作，请为要执行的操作设置适当的方法名称和任何关联参数。</span><span class="sxs-lookup"><span data-stu-id="29079-146">To perform these data operations, set the appropriate method name and any associated parameters for the operation that you want to perform.</span></span> <span data-ttu-id="29079-147">例如，对于更新操作，将 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性设置为业务对象方法的名称，该方法执行更新并将任何所需参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-147">For example, for an update operation, set the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property to the name of the business object method that performs updates and add any required parameters to the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection.</span></span> <span data-ttu-id="29079-148">如果 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与数据绑定控件关联，则由数据绑定控件添加参数。</span><span class="sxs-lookup"><span data-stu-id="29079-148">If the <xref:System.Web.UI.WebControls.ObjectDataSource> control is associated with a data-bound control, the parameters are added by the data-bound control.</span></span> <span data-ttu-id="29079-149">在这种情况下，需要确保方法的参数名称与数据绑定控件中的字段名称匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-149">In this case, you need to ensure that the parameter names of the method match the field names in the data-bound control.</span></span> <span data-ttu-id="29079-150">更新是在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 方法时执行的，无论是通过代码显式调用，还是由数据绑定控件自动执行。</span><span class="sxs-lookup"><span data-stu-id="29079-150">The update is performed when the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> method is called, either explicitly by your code or automatically by a data-bound control.</span></span> <span data-ttu-id="29079-151"><xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作遵循相同的常规模式。</span><span class="sxs-lookup"><span data-stu-id="29079-151">The same general pattern is followed for <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operations.</span></span> <span data-ttu-id="29079-152">假定业务对象一次一条记录执行这些类型的数据操作，而不是分批执行。</span><span class="sxs-lookup"><span data-stu-id="29079-152">Business objects are assumed to perform these types of data operations one record at a time, rather than batched.</span></span>

<a name="filtering_data"></a>
## <a name="filtering-data"></a><span data-ttu-id="29079-153">筛选数据</span><span class="sxs-lookup"><span data-stu-id="29079-153">Filtering Data</span></span>
 <span data-ttu-id="29079-154">如果数据作为 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象返回，则 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件可以筛选 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性检索的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-154">The <xref:System.Web.UI.WebControls.ObjectDataSource> control can filter data that is retrieved by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, if the data is returned as a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object.</span></span> <span data-ttu-id="29079-155">您可以使用格式字符串语法将 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性设置为筛选表达式，并将表达式中的值绑定到 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合中指定的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-155">You can set the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property to a filtering expression by using a format string syntax and bind values in the expression to parameters that are specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection.</span></span>

<a name="caching"></a>
## <a name="caching"></a><span data-ttu-id="29079-156">Caching</span><span class="sxs-lookup"><span data-stu-id="29079-156">Caching</span></span>
 <span data-ttu-id="29079-157">尽管 <xref:System.Web.UI.WebControls.ObjectDataSource> 不会在多个请求中保留业务对象的实例，但它可以缓存调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识的方法的结果。</span><span class="sxs-lookup"><span data-stu-id="29079-157">Although the <xref:System.Web.UI.WebControls.ObjectDataSource> does not retain the instance of the business object across multiple requests, it can cache the result of calling the method identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-158">在缓存数据时，对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的后续调用会返回缓存的数据，而不是创建业务对象并使用反射调用其 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-158">While the data is cached, subsequent calls to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method return the cached data instead of creating the business object and calling its <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> using reflection.</span></span> <span data-ttu-id="29079-159">缓存使你可以避免创建对象并以 Web 服务器上的内存的代价调用其数据方法。</span><span class="sxs-lookup"><span data-stu-id="29079-159">Caching lets you avoid creating the object and calling its data method at the expense of memory on the Web server.</span></span> <span data-ttu-id="29079-160">当 <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true`时，<xref:System.Web.UI.WebControls.ObjectDataSource> 会自动缓存数据，<xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性设置为缓存在丢弃之前存储数据的秒数。</span><span class="sxs-lookup"><span data-stu-id="29079-160">The <xref:System.Web.UI.WebControls.ObjectDataSource> automatically caches data when the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true`, and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property is set to the number of seconds that the cache stores data before the cache is discarded.</span></span> <span data-ttu-id="29079-161">还可以指定 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性和可选的 <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-161">You can also specify a <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> property and an optional <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> property.</span></span> <span data-ttu-id="29079-162"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件允许缓存各种类型的数据，但不应缓存保留无法共享来服务多个请求（例如，打开的 <xref:System.Data.SqlClient.SqlDataReader> 对象）的资源或状态的对象，因为该对象的同一实例将用于为多个请求提供服务。</span><span class="sxs-lookup"><span data-stu-id="29079-162">The <xref:System.Web.UI.WebControls.ObjectDataSource> control allows you to cache all types of data, but you should not cache objects that retain resources or state that cannot be shared to service multiple requests (for example, an open <xref:System.Data.SqlClient.SqlDataReader> object), because the same instance of the object will be used to service multiple requests.</span></span>

<a name="features"></a>
## <a name="features"></a><span data-ttu-id="29079-163">功能</span><span class="sxs-lookup"><span data-stu-id="29079-163">Features</span></span>
 <span data-ttu-id="29079-164">下表描述了 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的功能。</span><span class="sxs-lookup"><span data-stu-id="29079-164">The following table describes the features of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

|<span data-ttu-id="29079-165">功能</span><span class="sxs-lookup"><span data-stu-id="29079-165">Capability</span></span>|<span data-ttu-id="29079-166">要求</span><span class="sxs-lookup"><span data-stu-id="29079-166">Requirements</span></span>|
|----------------|------------------|
|<span data-ttu-id="29079-167">选择</span><span class="sxs-lookup"><span data-stu-id="29079-167">Selecting</span></span>|<span data-ttu-id="29079-168">将 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性设置为业务对象方法的名称，该方法可选择数据，并以编程方式或通过使用数据绑定控件包含 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合中的任何必要参数。</span><span class="sxs-lookup"><span data-stu-id="29079-168">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property to the name of the business object method that selects data, and include any necessary parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection either programmatically or by using a data-bound control.</span></span>|
|<span data-ttu-id="29079-169">排序</span><span class="sxs-lookup"><span data-stu-id="29079-169">Sorting</span></span>|<span data-ttu-id="29079-170">将 <xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> 属性设置为带有排序条件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 方法中的参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-170">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> property to the name of the parameter in the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> method that carries the sort criteria.</span></span>|
|<span data-ttu-id="29079-171">Filtering</span><span class="sxs-lookup"><span data-stu-id="29079-171">Filtering</span></span>|<span data-ttu-id="29079-172">将 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性设置为筛选表达式，并（可选）将任何参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合，以便在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时筛选数据。</span><span class="sxs-lookup"><span data-stu-id="29079-172">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property to a filtering expression and optionally add any parameters to the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection to filter the data when the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is called.</span></span> <span data-ttu-id="29079-173"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法必须返回 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable>。</span><span class="sxs-lookup"><span data-stu-id="29079-173">The method specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property must return a <xref:System.Data.DataSet> or <xref:System.Data.DataTable>.</span></span>|
|<span data-ttu-id="29079-174">Paging</span><span class="sxs-lookup"><span data-stu-id="29079-174">Paging</span></span>|<span data-ttu-id="29079-175">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 方法包含要检索的最大记录数的参数和要检索的第一条记录的索引，则支持数据源分页。</span><span class="sxs-lookup"><span data-stu-id="29079-175">Data source paging is supported, if the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> method contains parameters for the maximum number of records to retrieve and the index of the first record to retrieve.</span></span> <span data-ttu-id="29079-176">必须分别在 "<xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A>" 和 "<xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A>" 属性中设置这些参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-176">The names of those parameters must be set in the  <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> properties, respectively.</span></span> <span data-ttu-id="29079-177">即使 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件不支持直接在由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法中进行分页，数据绑定控件也可能能够执行分页。</span><span class="sxs-lookup"><span data-stu-id="29079-177">A data-bound control might be able to perform paging itself, even if the <xref:System.Web.UI.WebControls.ObjectDataSource> control does not support paging directly in the method specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-178">数据绑定控件实现此目的的要求是，由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法返回实现 <xref:System.Collections.ICollection> 接口的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-178">The requirement for the data-bound control to be able to do this is that the method specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property return an object that implements the <xref:System.Collections.ICollection> interface.</span></span>|
|<span data-ttu-id="29079-179">更新</span><span class="sxs-lookup"><span data-stu-id="29079-179">Updating</span></span>|<span data-ttu-id="29079-180">将 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性设置为用于更新数据的业务对象方法的名称，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合中包含所有必需的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-180">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property to the name of the business object method that updates data, and include any necessary parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection.</span></span>|
|<span data-ttu-id="29079-181">正在删除</span><span class="sxs-lookup"><span data-stu-id="29079-181">Deleting</span></span>|<span data-ttu-id="29079-182">将 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性设置为用于删除数据的业务对象方法或函数的名称，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中包含所有必需的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-182">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property to the name of the business object method or function that deletes data, and include any necessary parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection.</span></span>|
|<span data-ttu-id="29079-183">插入</span><span class="sxs-lookup"><span data-stu-id="29079-183">Inserting</span></span>|<span data-ttu-id="29079-184">将 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性设置为业务对象方法的名称或插入数据的函数，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中包含所有必要的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-184">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property to the name of the business object method or function that inserts data, and include any necessary parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection.</span></span>|
|<span data-ttu-id="29079-185">Caching</span><span class="sxs-lookup"><span data-stu-id="29079-185">Caching</span></span>|<span data-ttu-id="29079-186">根据所需的缓存数据缓存行为，将 <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true`，以及 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-186">Set the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property to `true`, and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> properties according to the caching behavior you want for your cached data.</span></span>|

> [!NOTE]
>  <span data-ttu-id="29079-187">当你使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 类来更新或插入数据时，在客户端上输入的字符串不会自动从客户端区域性格式转换为服务器区域性格式。</span><span class="sxs-lookup"><span data-stu-id="29079-187">When you use the <xref:System.Web.UI.WebControls.ObjectDataSource> class to update or insert data, strings that are entered at the client are not automatically converted from the client culture format to the server culture format.</span></span> <span data-ttu-id="29079-188">例如，客户端区域性可能将 DD/MM/YYYY 指定为日期格式，而服务器上的日期格式可能为 MM/DD/YYYY。</span><span class="sxs-lookup"><span data-stu-id="29079-188">For example, the client culture might specify DD/MM/YYYY as the date format, and the date format on the server might be MM/DD/YYYY.</span></span> <span data-ttu-id="29079-189">在这种情况下，10月5日，2009将作为5/10/2009 输入 <xref:System.Web.UI.WebControls.TextBox> 控件中，但将被解释为5月 10 2009 日。</span><span class="sxs-lookup"><span data-stu-id="29079-189">In that case, October 5, 2009 would be entered in a <xref:System.Web.UI.WebControls.TextBox> control as 5/10/2009 but would be interpreted as May 10, 2009.</span></span> <span data-ttu-id="29079-190">2009年10月15日将输入为15/10/2009，并将被拒绝为无效日期。</span><span class="sxs-lookup"><span data-stu-id="29079-190">October 15, 2009 would be entered as 15/10/2009, and would be rejected as an invalid date.</span></span>

<a name="data_view"></a>
## <a name="data-view"></a><span data-ttu-id="29079-191">数据视图</span><span class="sxs-lookup"><span data-stu-id="29079-191">Data View</span></span>
 <span data-ttu-id="29079-192">与所有数据源控件一样，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件与数据源视图类相关联。</span><span class="sxs-lookup"><span data-stu-id="29079-192">As with all data source controls, the <xref:System.Web.UI.WebControls.ObjectDataSource> control is associated with a data source view class.</span></span> <span data-ttu-id="29079-193">虽然 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件是页面开发人员用来处理数据的接口，但 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 类是数据绑定控件所使用的接口。</span><span class="sxs-lookup"><span data-stu-id="29079-193">While the <xref:System.Web.UI.WebControls.ObjectDataSource> control is the interface that the page developer uses to work with data, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> class is the interface that data-bound controls work with.</span></span> <span data-ttu-id="29079-194">此外，<xref:System.Web.UI.WebControls.ObjectDataSourceView> 类描述数据源控件的功能，并执行实际工作。</span><span class="sxs-lookup"><span data-stu-id="29079-194">Additionally, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> class describes the capabilities of the data source control, and performs the actual work.</span></span> <span data-ttu-id="29079-195"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件只有一个关联 <xref:System.Web.UI.WebControls.ObjectDataSourceView>，并且它始终命名为 "`DefaultView`"。</span><span class="sxs-lookup"><span data-stu-id="29079-195">The <xref:System.Web.UI.WebControls.ObjectDataSource> control has only one associated <xref:System.Web.UI.WebControls.ObjectDataSourceView>, and it is always named `DefaultView`.</span></span> <span data-ttu-id="29079-196">当 <xref:System.Web.UI.WebControls.ObjectDataSource.GetView%2A> 方法公开 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象时，它的许多属性和方法会直接由 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件进行包装和公开。</span><span class="sxs-lookup"><span data-stu-id="29079-196">While the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSource.GetView%2A> method, many of its properties and methods are wrapped and exposed directly by the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-197">在后台，<xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象执行所有数据操作，包括检索、插入、更新、删除、筛选数据和对数据进行排序。</span><span class="sxs-lookup"><span data-stu-id="29079-197">Behind the scenes, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object performs all data operations, including retrieving, inserting, updating, deleting, filtering, and sorting the data.</span></span> <span data-ttu-id="29079-198">有关详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSourceView>。</span><span class="sxs-lookup"><span data-stu-id="29079-198">For more information, see <xref:System.Web.UI.WebControls.ObjectDataSourceView>.</span></span>

<a name="using_linq_to_sql"></a>
## <a name="using-linq-to-sql"></a><span data-ttu-id="29079-199">使用 LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="29079-199">Using LINQ to SQL</span></span>
 <span data-ttu-id="29079-200">可以将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与 LINQ to SQL 类结合使用。</span><span class="sxs-lookup"><span data-stu-id="29079-200">You can use the <xref:System.Web.UI.WebControls.ObjectDataSource> control with a LINQ to SQL class.</span></span> <span data-ttu-id="29079-201">为此，请将 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性设置为数据上下文类的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-201">To do so, you set the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property to the name of the data-context class.</span></span> <span data-ttu-id="29079-202">还将 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>和 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 方法设置为数据上下文类中执行相应操作的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-202">You also set the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>, and <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> methods to the methods in the data-context class that perform the corresponding operations.</span></span> <span data-ttu-id="29079-203">您必须为 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件创建事件处理程序，才能取消对数据上下文类的释放。</span><span class="sxs-lookup"><span data-stu-id="29079-203">You must create an event handler for the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event in order to cancel disposing of the data-context class.</span></span> <span data-ttu-id="29079-204">此步骤是必需的，因为 LINQ to SQL 支持延迟执行，而 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件尝试在选择操作之后释放数据上下文。</span><span class="sxs-lookup"><span data-stu-id="29079-204">This step is necessary because LINQ to SQL supports deferred execution, whereas the <xref:System.Web.UI.WebControls.ObjectDataSource> control tries to dispose the data context after the Select operation.</span></span> <span data-ttu-id="29079-205">有关如何创建 LINQ to SQL 类的详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-205">For more information about how to create LINQ to SQL classes, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span> <span data-ttu-id="29079-206">有关如何取消数据上下文类的释放的示例，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-206">For an example of how to cancel the disposing of a data context class, see the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event.</span></span>

## <a name="using-the-entity-framework"></a><span data-ttu-id="29079-207">使用实体框架</span><span class="sxs-lookup"><span data-stu-id="29079-207">Using the Entity Framework</span></span>
 <span data-ttu-id="29079-208">您还可以将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与实体框架结合使用。</span><span class="sxs-lookup"><span data-stu-id="29079-208">You can also use the <xref:System.Web.UI.WebControls.ObjectDataSource> control with the Entity Framework.</span></span> <span data-ttu-id="29079-209">有关详细信息，请参阅[使用实体框架和 ObjectDataSource 控件](https://go.microsoft.com/fwlink/?LinkId=209117)。</span><span class="sxs-lookup"><span data-stu-id="29079-209">For more information, see [Using the Entity Framework and the ObjectDataSource Control](https://go.microsoft.com/fwlink/?LinkId=209117).</span></span>

<a name="declarative_syntax"></a>
## <a name="declarative-syntax"></a><span data-ttu-id="29079-210">声明性语法</span><span class="sxs-lookup"><span data-stu-id="29079-210">Declarative Syntax</span></span>

```
<asp:ObjectDataSource
    CacheDuration="string|Infinite"
    CacheExpirationPolicy="Absolute|Sliding"
    CacheKeyDependency="string"
    ConflictDetection="OverwriteChanges|CompareAllValues"
    ConvertNullToDBNull="True|False"
    DataObjectTypeName="string"
    DeleteMethod="string"
    EnableCaching="True|False"
    EnablePaging="True|False"
    EnableTheming="True|False"
    EnableViewState="True|False"
    FilterExpression="string"
    ID="string"
    InsertMethod="string"
    MaximumRowsParameterName="string"
    OldValuesParameterFormatString="string"
    OnDataBinding="DataBinding event handler"
    OnDeleted="Deleted event handler"
    OnDeleting="Deleting event handler"
    OnDisposed="Disposed event handler"
    OnFiltering="Filtering event handler"
    OnInit="Init event handler"
    OnInserted="Inserted event handler"
    OnInserting="Inserting event handler"
    OnLoad="Load event handler"
    OnObjectCreated="ObjectCreated event handler"
    OnObjectCreating="ObjectCreating event handler"
    OnObjectDisposing="ObjectDisposing event handler"
    OnPreRender="PreRender event handler"
    OnSelected="Selected event handler"
    OnSelecting="Selecting event handler"
    OnUnload="Unload event handler"
    OnUpdated="Updated event handler"
    OnUpdating="Updating event handler"
    runat="server"
    SelectCountMethod="string"
    SelectMethod="string"
    SkinID="string"
    SortParameterName="string"
    SqlCacheDependency="string"
    StartRowIndexParameterName="string"
    TypeName="string"
    UpdateMethod="string"
    Visible="True|False"
>
        <DeleteParameters>
                <asp:ControlParameter
                    ControlID="string"
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:CookieParameter
                    ConvertEmptyStringToNull="True|False"
                    CookieName="string"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:FormParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    FormField="string"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:Parameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:ProfileParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:QueryStringParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    QueryStringField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:SessionParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    SessionField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
        </DeleteParameters>
        <FilterParameters>
                <asp:ControlParameter
                    ControlID="string"
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:CookieParameter
                    ConvertEmptyStringToNull="True|False"
                    CookieName="string"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:FormParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    FormField="string"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:Parameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:ProfileParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:QueryStringParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    QueryStringField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:SessionParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    SessionField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
        </FilterParameters>
        <InsertParameters>
                <asp:ControlParameter
                    ControlID="string"
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:CookieParameter
                    ConvertEmptyStringToNull="True|False"
                    CookieName="string"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:FormParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    FormField="string"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:Parameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:ProfileParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:QueryStringParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    QueryStringField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:SessionParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    SessionField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
        </InsertParameters>
        <SelectParameters>
                <asp:ControlParameter
                    ControlID="string"
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:CookieParameter
                    ConvertEmptyStringToNull="True|False"
                    CookieName="string"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:FormParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    FormField="string"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:Parameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:ProfileParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:QueryStringParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    QueryStringField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:SessionParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    SessionField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
        </SelectParameters>
        <UpdateParameters>
                <asp:ControlParameter
                    ControlID="string"
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:CookieParameter
                    ConvertEmptyStringToNull="True|False"
                    CookieName="string"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:FormParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    FormField="string"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:Parameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:ProfileParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    PropertyName="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:QueryStringParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    QueryStringField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
                <asp:SessionParameter
                    ConvertEmptyStringToNull="True|False"
                    DefaultValue="string"
                    Direction="Input|Output|InputOutput|ReturnValue"
                    Name="string"
                    SessionField="string"
                    Size="integer"
                    Type="Empty|Object|DBNull|Boolean|Char|SByte|
                        Byte|Int16|UInt16|Int32|UInt32|Int64|UInt64|
                        Single|Double|Decimal|DateTime|String"
                />
        </UpdateParameters>
</asp:ObjectDataSource>
```



## Examples
 <span data-ttu-id="29079-211">本主题提供了包含源代码的 Visual Studio 网站项目：[下载](https://code.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=aspnetmsdnexamples&DownloadId=14838)。</span><span class="sxs-lookup"><span data-stu-id="29079-211">A Visual Studio Web site project with source code is available to accompany this topic: [Download](https://code.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=aspnetmsdnexamples&DownloadId=14838).</span></span>

 <span data-ttu-id="29079-212">本部分显示 .aspx 页中标记的 <xref:System.Web.UI.WebControls.ObjectDataSource>，并显示它使用的业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-212">This section shows an <xref:System.Web.UI.WebControls.ObjectDataSource> in markup in an .aspx page and it shows the business objects that it works with.</span></span> <span data-ttu-id="29079-213">示例是 .aspx 页。</span><span class="sxs-lookup"><span data-stu-id="29079-213">The example is the .aspx page.</span></span> <span data-ttu-id="29079-214">它包含绑定到 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.GridView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-214">It contains a <xref:System.Web.UI.WebControls.GridView> control that is bound to an <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-215"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件标记指定业务对象的名称，并指定要为检索数据而调用的业务对象方法的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-215">The <xref:System.Web.UI.WebControls.ObjectDataSource> control markup specifies the name of the business object and the name of the business object method to call in order to retrieve data.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/CS/objds1cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/VB/objds1vb.aspx#1)]

 <span data-ttu-id="29079-216">下面的示例演示 .aspx 页中 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件使用的业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-216">The following example shows the business object that the <xref:System.Web.UI.WebControls.ObjectDataSource> control in the .aspx page uses.</span></span> <span data-ttu-id="29079-217">（许多其他 <xref:System.Web.UI.WebControls.ObjectDataSource> 代码示例也使用此业务对象。）该示例包含以下两个基本类：</span><span class="sxs-lookup"><span data-stu-id="29079-217">(Many other <xref:System.Web.UI.WebControls.ObjectDataSource> code examples use this business object also.) The example consists of the following two basic classes:</span></span>

-   <span data-ttu-id="29079-218">`EmployeeLogic` 类是 <xref:System.Web.UI.WebControls.ObjectDataSource> 使用的业务逻辑类。</span><span class="sxs-lookup"><span data-stu-id="29079-218">The `EmployeeLogic` class is the business logic class that the <xref:System.Web.UI.WebControls.ObjectDataSource> uses.</span></span>

-   <span data-ttu-id="29079-219">`NorthwindEmployee` 类定义由 `EmployeeLogic` 类的 `GetAllEmployees` 方法返回的数据对象。</span><span class="sxs-lookup"><span data-stu-id="29079-219">The `NorthwindEmployee` class defines the data object that is returned by the `GetAllEmployees` method of the `EmployeeLogic` class.</span></span>

 <span data-ttu-id="29079-220">提供额外的 `NorthwindDataException` 类是一种方便的方式。</span><span class="sxs-lookup"><span data-stu-id="29079-220">An additional `NorthwindDataException` class is provided as a convenience.</span></span>

 <span data-ttu-id="29079-221">这组示例类适用于 Northwind 商贸数据库，可用于 Microsoft SQL Server 和 Microsoft Access。</span><span class="sxs-lookup"><span data-stu-id="29079-221">This set of example classes works with the Northwind Traders database, which is available with Microsoft SQL Server and Microsoft Access.</span></span> <span data-ttu-id="29079-222">若要获取完整的工作示例，必须使用所提供的 .aspx 页示例来编译并使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-222">For a complete working example, you must compile and use these classes with the .aspx page example that is provided.</span></span> <span data-ttu-id="29079-223">有关如何安装 Northwind 商贸数据库的信息，请参阅[如何：安装示例数据库](https://msdn.microsoft.com/library/ed1291f6-604c-4972-ae22-0345c6dea12e)。</span><span class="sxs-lookup"><span data-stu-id="29079-223">For information about how to install the Northwind Traders database, see [How to: Install Sample Databases](https://msdn.microsoft.com/library/ed1291f6-604c-4972-ae22-0345c6dea12e).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_1#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/CS/northwindemployee1.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_1#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/VB/northwindemployee1.vb#2)]

 ]]></format>
    </remarks>
    <altmember cref="T:System.Web.UI.IDataSource" />
    <altmember cref="T:System.Web.UI.DataSourceControl" />
    <altmember cref="T:System.Web.UI.WebControls.ObjectDataSourceView" />
    <related type="Article" href="https://msdn.microsoft.com/library/a806fa2c-fe6a-405f-869c-74e804a642ea"><span data-ttu-id="29079-224">演练：到自定义业务对象的数据绑定</span><span class="sxs-lookup"><span data-stu-id="29079-224">Walkthrough: Data Binding to a Custom Business Object</span></span></related>
    <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-225">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-225">Data Source Web Server Controls</span></span></related>
    <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-226">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-226">ObjectDataSource Control Overview</span></span></related>
    <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-227">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-227">Creating an ObjectDataSource Control Source Object</span></span></related>
    <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-228">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-228">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
  </Docs>
  <Members>
    <MemberGroup MemberName=".ctor">
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Docs>
        <summary><span data-ttu-id="29079-229">初始化 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="29079-229">Initializes a new instance of the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> class.</span></span></summary>
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-230">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-230">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-231">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-231">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-232">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-232">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </MemberGroup>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public ObjectDataSource ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; ObjectDataSource();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-233">初始化 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="29079-233">Initializes a new instance of the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> class.</span></span></summary>
        <remarks>To be added.</remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-234">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-234">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-235">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-235">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-236">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-236">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public ObjectDataSource (string typeName, string selectMethod);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string typeName, string selectMethod) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.#ctor(System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (typeName As String, selectMethod As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; ObjectDataSource(System::String ^ typeName, System::String ^ selectMethod);" />
      <MemberSignature Language="F#" Value="new System.Web.UI.WebControls.ObjectDataSource : string * string -&gt; System.Web.UI.WebControls.ObjectDataSource" Usage="new System.Web.UI.WebControls.ObjectDataSource (typeName, selectMethod)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="typeName" Type="System.String" />
        <Parameter Name="selectMethod" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="typeName"><span data-ttu-id="29079-237"><see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 使用的类的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-237">The name of the class that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> works with.</span></span></param>
        <param name="selectMethod"><span data-ttu-id="29079-238"><see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 为检索数据而调用的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-238">The name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> invokes to retrieve data.</span></span></param>
        <summary><span data-ttu-id="29079-239">使用指定的类型名和数据检索方法名初始化 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="29079-239">Initializes a new instance of the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> class with the specified type name and data retrieval method name.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-240">对于位于 Bin 或 App_Code 目录中的代码，或在全局程序集缓存中注册的代码的完全限定类型名称，`typeName` 参数的值可以是部分限定的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-240">The value of the `typeName` parameter can be a partially qualified type for code that is located in the Bin or App_Code directory or a fully qualified type name for code that is registered in the global assembly cache.</span></span> <span data-ttu-id="29079-241">如果使用全局程序集缓存，则必须将相应的引用添加到 Machine.config 或 web.config 配置文件的 `assemblies` 部分。</span><span class="sxs-lookup"><span data-stu-id="29079-241">If you use the global assembly cache, you must add the appropriate reference to the `assemblies` section of the Machine.config or Web.config configuration file.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-242">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-242">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-243">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-243">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-244">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-244">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="CacheDuration">
      <MemberSignature Language="C#" Value="public virtual int CacheDuration { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance int32 CacheDuration" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.CacheDuration" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Property CacheDuration As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property int CacheDuration { int get(); void set(int value); };" />
      <MemberSignature Language="F#" Value="member this.CacheDuration : int with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.CacheDuration" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(0)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.TypeConverter(typeof(System.Web.UI.DataSourceCacheDurationConverter))</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-245">获取或设置以秒为单位的一段时间，数据源控件就在这段时间内缓存 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性检索到的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-245">Gets or sets the length of time, in seconds, that the data source control caches data that is retrieved by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property.</span></span></summary>
        <value><span data-ttu-id="29079-246"><see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 将 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性调用的结果缓存的秒数。</span><span class="sxs-lookup"><span data-stu-id="29079-246">The number of seconds that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> caches the results of a <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property invocation.</span></span> <span data-ttu-id="29079-247">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="29079-247">The default is 0.</span></span> <span data-ttu-id="29079-248">该值不能为负数。</span><span class="sxs-lookup"><span data-stu-id="29079-248">The value cannot be negative.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-249"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件支持数据缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-249">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports data caching.</span></span> <span data-ttu-id="29079-250">在缓存数据时，对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的调用将从缓存中检索数据，而不是从 <xref:System.Web.UI.WebControls.ObjectDataSource> 使用的业务对象中检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-250">While data is cached, calls to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieve data from the cache rather than from the business object that the <xref:System.Web.UI.WebControls.ObjectDataSource> works with.</span></span> <span data-ttu-id="29079-251">缓存过期后，<xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法从业务对象中检索数据，然后再次缓存数据。</span><span class="sxs-lookup"><span data-stu-id="29079-251">When the cache expires, the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieves data from the business object, and then caches the data again.</span></span>

 <span data-ttu-id="29079-252">当 <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true` 并且 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性设置为大于0的值时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将自动缓存数据，该值指示在丢弃缓存条目之前缓存存储数据的秒数。</span><span class="sxs-lookup"><span data-stu-id="29079-252">The <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically caches data when the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true` and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property is set to a value greater than 0, which indicates the number of seconds that the cache stores data before the cache entry is discarded.</span></span> <span data-ttu-id="29079-253">值0表示无限长的缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-253">A value of 0 indicates an infinitely long cache.</span></span>

 <span data-ttu-id="29079-254">缓存按持续时间和 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 设置的组合进行管制。</span><span class="sxs-lookup"><span data-stu-id="29079-254">The cache is regulated by a combination of the duration and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> setting.</span></span> <span data-ttu-id="29079-255">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性设置为 <xref:System.Web.UI.DataSourceCacheExpiry.Absolute> 值，则 <xref:System.Web.UI.WebControls.ObjectDataSource> 会在首次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时缓存数据，并将其保存在内存中，最多可为 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性指定的时间量。</span><span class="sxs-lookup"><span data-stu-id="29079-255">If the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> property is set to the <xref:System.Web.UI.DataSourceCacheExpiry.Absolute> value, the <xref:System.Web.UI.WebControls.ObjectDataSource> caches data on the first call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method and holds it in memory for, at most, the amount of time that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property.</span></span> <span data-ttu-id="29079-256">如果需要内存，则数据可能在持续时间之前释放。</span><span class="sxs-lookup"><span data-stu-id="29079-256">The data might be released before the duration time, if the memory is needed.</span></span> <span data-ttu-id="29079-257">然后，在下一次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时刷新缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-257">The cache is then refreshed during the next call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-258">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性设置为 <xref:System.Web.UI.DataSourceCacheExpiry.Sliding> 值，则数据源控件会在第一次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时缓存数据，但在每次对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的后续调用中，将重置其保存缓存的时间窗口。</span><span class="sxs-lookup"><span data-stu-id="29079-258">If the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> property is set to <xref:System.Web.UI.DataSourceCacheExpiry.Sliding> value, the data source control caches data on the first call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method, but resets the time window for which it holds the cache on each subsequent call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-259">如果自上一次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法以来没有任何活动的时间与 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性相等，则缓存过期。</span><span class="sxs-lookup"><span data-stu-id="29079-259">The cache expires if there is no activity for a time that is equal to the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property since the last call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>



## Examples
 <span data-ttu-id="29079-260">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-260">This section contains two code examples.</span></span> <span data-ttu-id="29079-261">第一个代码示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象如何支持缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-261">The first code example demonstrates how an <xref:System.Web.UI.WebControls.ObjectDataSource> object supports caching.</span></span> <span data-ttu-id="29079-262">第二个代码示例演示如何实现返回 <xref:System.Data.DataSet> 对象的包装方法，以启用 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象的缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-262">The second code example demonstrates how to implement a wrapper method that returns a <xref:System.Data.DataSet> object to enable caching with an <xref:System.Web.UI.WebControls.ObjectDataSource> object.</span></span>

 <span data-ttu-id="29079-263">下面的代码示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件如何支持缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-263">The following code example demonstrates how an <xref:System.Web.UI.WebControls.ObjectDataSource> control supports caching.</span></span> <span data-ttu-id="29079-264">若要启用缓存，必须实现用于检索数据的方法，该方法由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识，以 <xref:System.Data.DataSet> 对象的形式返回数据。</span><span class="sxs-lookup"><span data-stu-id="29079-264">To enable caching, you must implement the method that retrieves data, which is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, to return the data as a <xref:System.Data.DataSet> object.</span></span> <span data-ttu-id="29079-265">在此示例中，<xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true`，并设置 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-265">In this example, the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true`, and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> properties are set.</span></span> <span data-ttu-id="29079-266"><xref:System.Web.UI.WebControls.ObjectDataSource> 将 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性返回的数据缓存30秒。</span><span class="sxs-lookup"><span data-stu-id="29079-266">The <xref:System.Web.UI.WebControls.ObjectDataSource> caches data that is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property for 30 seconds.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_6#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_6/CS/objds6cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_6#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_6/VB/objds6vb.aspx#1)]

 <span data-ttu-id="29079-267">下面的代码示例演示如何实现一个包装方法，该方法返回 <xref:System.Data.DataSet> 对象以启用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-267">The following code example demonstrates how to implement a wrapper method that returns a <xref:System.Data.DataSet> object to enable caching with an <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-268">在 `EmployeeLogic` 类的基实现中，`GetAllEmployees` 方法返回 <xref:System.Collections.ArrayList> 对象。</span><span class="sxs-lookup"><span data-stu-id="29079-268">In the base implementation of the `EmployeeLogic` class, the `GetAllEmployees` method returns an <xref:System.Collections.ArrayList> object.</span></span> <span data-ttu-id="29079-269">添加一个名为 `GetAllEmployeesAsDataSet` 的包装方法，该方法将 `NorthwindEmployee` 数据作为 <xref:System.Data.DataSet>返回，而不是完全重构对象以使用 Web 窗体页上的 <xref:System.Web.UI.WebControls.ObjectDataSource>。</span><span class="sxs-lookup"><span data-stu-id="29079-269">Instead of refactoring the object completely to work with the <xref:System.Web.UI.WebControls.ObjectDataSource> on a Web Forms page, a wrapper method named `GetAllEmployeesAsDataSet` is added that returns a set of `NorthwindEmployee` data as a <xref:System.Data.DataSet>.</span></span>

 <span data-ttu-id="29079-270">此代码示例是为 <xref:System.Web.UI.WebControls.ObjectDataSource> 类提供的更大示例的一部分。</span><span class="sxs-lookup"><span data-stu-id="29079-270">This code example is part of a larger example provided for the <xref:System.Web.UI.WebControls.ObjectDataSource> class.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_5#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_5/CS/northwindemployee5.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_5#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_5/VB/northwindemployee5.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.EnableCaching" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-271">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-271">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-272">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-272">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-273">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-273">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="CacheExpirationPolicy">
      <MemberSignature Language="C#" Value="public virtual System.Web.UI.DataSourceCacheExpiry CacheExpirationPolicy { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Web.UI.DataSourceCacheExpiry CacheExpirationPolicy" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Property CacheExpirationPolicy As DataSourceCacheExpiry" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property System::Web::UI::DataSourceCacheExpiry CacheExpirationPolicy { System::Web::UI::DataSourceCacheExpiry get(); void set(System::Web::UI::DataSourceCacheExpiry value); };" />
      <MemberSignature Language="F#" Value="member this.CacheExpirationPolicy : System.Web.UI.DataSourceCacheExpiry with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(Mono.Cecil.CustomAttributeArgument)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.DataSourceCacheExpiry</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-274">获取或设置缓存的到期行为，该行为与持续时间组合在一起可以描述数据源控件所用缓存的行为。</span><span class="sxs-lookup"><span data-stu-id="29079-274">Gets or sets the cache expiration behavior that, when combined with the duration, describes the behavior of the cache that the data source control uses.</span></span></summary>
        <value><span data-ttu-id="29079-275"><see cref="T:System.Web.UI.DataSourceCacheExpiry" /> 值之一。</span><span class="sxs-lookup"><span data-stu-id="29079-275">One of the <see cref="T:System.Web.UI.DataSourceCacheExpiry" /> values.</span></span> <span data-ttu-id="29079-276">默认为 <see cref="F:System.Web.UI.DataSourceCacheExpiry.Absolute" />。</span><span class="sxs-lookup"><span data-stu-id="29079-276">The default is <see cref="F:System.Web.UI.DataSourceCacheExpiry.Absolute" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-277"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件支持数据缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-277">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports data caching.</span></span> <span data-ttu-id="29079-278">在缓存数据时，对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的调用将从缓存中检索数据，而不是从 <xref:System.Web.UI.WebControls.ObjectDataSource> 使用的业务对象中检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-278">While data is cached, calls to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieve data from the cache rather than from the business object that the <xref:System.Web.UI.WebControls.ObjectDataSource> works with.</span></span> <span data-ttu-id="29079-279">缓存过期后，<xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法从业务对象中检索数据，然后再次缓存数据。</span><span class="sxs-lookup"><span data-stu-id="29079-279">When the cache expires, the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieves data from the business object, and then caches the data again.</span></span>

 <span data-ttu-id="29079-280">当 <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true` 并且 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性设置为大于0的值时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将自动缓存数据，该值指示在丢弃缓存条目之前缓存存储数据的秒数。</span><span class="sxs-lookup"><span data-stu-id="29079-280">The <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically caches data when the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true` and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property is set to a value greater than 0, which indicates the number of seconds that the cache stores data before the cache entry is discarded.</span></span> <span data-ttu-id="29079-281">值0指示无限长的缓存时间。</span><span class="sxs-lookup"><span data-stu-id="29079-281">A value of 0 indicates an infinitely long cache period.</span></span>

 <span data-ttu-id="29079-282">缓存按持续时间和 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 设置的组合进行管制。</span><span class="sxs-lookup"><span data-stu-id="29079-282">The cache is regulated by a combination of the duration and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> setting.</span></span> <span data-ttu-id="29079-283">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性设置为 <xref:System.Web.UI.DataSourceCacheExpiry.Absolute> 值，则 <xref:System.Web.UI.WebControls.ObjectDataSource> 会在首次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时缓存数据，并将其保存在内存中，最多可为 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性指定的时间量。</span><span class="sxs-lookup"><span data-stu-id="29079-283">If the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> property is set to the <xref:System.Web.UI.DataSourceCacheExpiry.Absolute> value, the <xref:System.Web.UI.WebControls.ObjectDataSource> caches data on the first call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method and holds it in memory for, at most, the amount of time that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property.</span></span> <span data-ttu-id="29079-284">如果需要内存，则数据可能在持续时间之前释放。</span><span class="sxs-lookup"><span data-stu-id="29079-284">The data might be released before the duration time, if the memory is needed.</span></span> <span data-ttu-id="29079-285">然后，在下一次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时刷新缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-285">The cache is then refreshed during the next call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-286">如果将 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性设置为 <xref:System.Web.UI.DataSourceCacheExpiry.Sliding> 值，则数据源控件会在第一次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时缓存数据，但会重置其保存缓存的时间窗口，以便每次对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的后续调用。</span><span class="sxs-lookup"><span data-stu-id="29079-286">If the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> property is set to the <xref:System.Web.UI.DataSourceCacheExpiry.Sliding> value, the data source control caches data on the first call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method, but resets the time window for which it holds the cache for each subsequent call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-287">如果自上一次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法以来没有任何活动的时间与 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性相等，则缓存过期。</span><span class="sxs-lookup"><span data-stu-id="29079-287">The cache expires if there is no activity for a time that is equal to the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property since the last call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>



## Examples
 <span data-ttu-id="29079-288">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-288">This section contains two code examples.</span></span> <span data-ttu-id="29079-289">第一个代码示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象如何支持筛选和缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-289">The first code example demonstrates how an <xref:System.Web.UI.WebControls.ObjectDataSource> object supports filtering and caching.</span></span> <span data-ttu-id="29079-290">第二个代码示例演示如何实现返回 <xref:System.Data.DataSet> 对象的包装方法，以便使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象启用缓存和筛选。</span><span class="sxs-lookup"><span data-stu-id="29079-290">The second code example demonstrates how to implement a wrapper method that returns a <xref:System.Data.DataSet> object to enable caching and filtering with an <xref:System.Web.UI.WebControls.ObjectDataSource> object.</span></span>

 <span data-ttu-id="29079-291">下面的代码示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件如何支持筛选和缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-291">The following code example demonstrates how an <xref:System.Web.UI.WebControls.ObjectDataSource> control supports filtering and caching.</span></span> <span data-ttu-id="29079-292">若要启用筛选和缓存，必须实现用于检索数据的方法，该方法由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识，以 <xref:System.Data.DataSet> 对象的形式返回数据。</span><span class="sxs-lookup"><span data-stu-id="29079-292">To enable filtering and caching, you must implement the method that retrieves data, which is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, to return the data as a <xref:System.Data.DataSet> object.</span></span> <span data-ttu-id="29079-293">在此示例中，启用了缓存，因为 `EmployeeLogic` 对象将数据作为 <xref:System.Data.DataSet>返回，<xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true`，并且 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性已设置。</span><span class="sxs-lookup"><span data-stu-id="29079-293">In this example, caching is enabled because the `EmployeeLogic` object returns data as a <xref:System.Data.DataSet>, the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true`, and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> properties are set.</span></span> <span data-ttu-id="29079-294"><xref:System.Web.UI.WebControls.ObjectDataSource> 将 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性返回的数据缓存30秒。</span><span class="sxs-lookup"><span data-stu-id="29079-294">The <xref:System.Web.UI.WebControls.ObjectDataSource> caches data that is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property for 30 seconds.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_6#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_6/CS/objds6cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_6#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_6/VB/objds6vb.aspx#1)]

 <span data-ttu-id="29079-295">下面的代码示例演示如何实现一个包装方法，该方法返回 <xref:System.Data.DataSet> 对象以使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件启用缓存和筛选。</span><span class="sxs-lookup"><span data-stu-id="29079-295">The following code example demonstrates how to implement a wrapper method that returns a <xref:System.Data.DataSet> object to enable caching and filtering with an <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-296">在 `EmployeeLogic` 类的基实现中，`GetAllEmployees` 方法返回 <xref:System.Collections.ArrayList>。</span><span class="sxs-lookup"><span data-stu-id="29079-296">In the base implementation of the `EmployeeLogic` class, the `GetAllEmployees` method returns an <xref:System.Collections.ArrayList>.</span></span> <span data-ttu-id="29079-297">添加一个名为 `GetAllEmployeesAsDataSet` 的包装方法，该方法将 `NorthwindEmployee` 数据作为 <xref:System.Data.DataSet>返回，而不是完全重构对象以使用 Web 窗体页上的 <xref:System.Web.UI.WebControls.ObjectDataSource>。</span><span class="sxs-lookup"><span data-stu-id="29079-297">Instead of refactoring the object completely to work with the <xref:System.Web.UI.WebControls.ObjectDataSource> on a Web Forms page, a wrapper method named `GetAllEmployeesAsDataSet` is added that returns a set of `NorthwindEmployee` data as a <xref:System.Data.DataSet>.</span></span> <span data-ttu-id="29079-298">此代码示例是为 <xref:System.Web.UI.WebControls.ObjectDataSource> 类提供的更大示例的一部分。</span><span class="sxs-lookup"><span data-stu-id="29079-298">This code example is part of a larger example provided for the <xref:System.Web.UI.WebControls.ObjectDataSource> class.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_5#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_5/CS/northwindemployee5.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_5#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_5/VB/northwindemployee5.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.CacheDuration" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.EnableCaching" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-299">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-299">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-300">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-300">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-301">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-301">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="CacheKeyDependency">
      <MemberSignature Language="C#" Value="public virtual string CacheKeyDependency { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CacheKeyDependency" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Property CacheKeyDependency As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property System::String ^ CacheKeyDependency { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.CacheKeyDependency : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-302">获取或设置一个用户定义的键依赖项，该键依赖项链接到数据源控件创建的所有数据缓存对象。</span><span class="sxs-lookup"><span data-stu-id="29079-302">Gets or sets a user-defined key dependency that is linked to all data cache objects that are created by the data source control.</span></span></summary>
        <value><span data-ttu-id="29079-303">一个键，它标识所有由 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 创建的缓存对象。</span><span class="sxs-lookup"><span data-stu-id="29079-303">A key that identifies all cache objects created by the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-304"><xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 属性可以设置为任意字符串值。</span><span class="sxs-lookup"><span data-stu-id="29079-304">The <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> property can be set to any arbitrary string value.</span></span>

 <span data-ttu-id="29079-305">当键到期时，所有缓存对象都显式到期。</span><span class="sxs-lookup"><span data-stu-id="29079-305">All cache objects are explicitly expired when the key is expired.</span></span> <span data-ttu-id="29079-306">这允许你以编程方式使由 <xref:System.Web.UI.WebControls.ObjectDataSource> 创建的缓存条目无效。</span><span class="sxs-lookup"><span data-stu-id="29079-306">This allows you to invalidate cache entries that are created by the <xref:System.Web.UI.WebControls.ObjectDataSource> from your own page code programmatically.</span></span>

 <span data-ttu-id="29079-307"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件支持数据缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-307">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports data caching.</span></span> <span data-ttu-id="29079-308">在缓存数据时，对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的调用将从缓存中检索数据，而不是从 <xref:System.Web.UI.WebControls.ObjectDataSource> 使用的业务对象中检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-308">While data is cached, calls to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieve data from the cache rather than from the business object that the <xref:System.Web.UI.WebControls.ObjectDataSource> works with.</span></span> <span data-ttu-id="29079-309">缓存过期后，<xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法从业务对象中检索数据，然后再次缓存数据。</span><span class="sxs-lookup"><span data-stu-id="29079-309">When the cache expires, the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieves data from the business object, and then caches the data again.</span></span>

 <span data-ttu-id="29079-310">当 <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true` 并且 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性设置为大于0的值时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将自动缓存数据，该值指示在丢弃缓存条目之前缓存存储数据的秒数。</span><span class="sxs-lookup"><span data-stu-id="29079-310">The <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically caches data when the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true` and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property is set to a value greater than 0, which indicates the number of seconds that the cache stores data before the cache entry is discarded.</span></span> <span data-ttu-id="29079-311">值0表示无限长的缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-311">A value of 0 indicates an infinitely long cache.</span></span>

 <span data-ttu-id="29079-312">可以设置 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 属性，以便在 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件创建的所有缓存项与键之间创建依赖关系。</span><span class="sxs-lookup"><span data-stu-id="29079-312">You can set the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> property to create a dependency between all cache entries that are created by the <xref:System.Web.UI.WebControls.ObjectDataSource> control and the key.</span></span> <span data-ttu-id="29079-313">可以通过使密钥过期，随时以编程方式使所有缓存条目过期。</span><span class="sxs-lookup"><span data-stu-id="29079-313">You can expire all the cache entries programmatically at any time by expiring the key.</span></span> <span data-ttu-id="29079-314">将 <xref:System.Web.Caching.Cache.Remove%2A?displayProperty=nameWithType> 方法与当前 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 值作为参数，从而使密钥过期。</span><span class="sxs-lookup"><span data-stu-id="29079-314">Expire the key by using the <xref:System.Web.Caching.Cache.Remove%2A?displayProperty=nameWithType> method with the current <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> value as the parameter.</span></span>

 <span data-ttu-id="29079-315">将为 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>和 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 属性的每个组合创建唯一的缓存条目。</span><span class="sxs-lookup"><span data-stu-id="29079-315">A unique cache entry is created for every combination of the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>, and <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> properties.</span></span> <span data-ttu-id="29079-316">如果多个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件使用相同的类型、方法和参数加载数据，则这些控件可以在这些方案中使用相同的缓存条目。</span><span class="sxs-lookup"><span data-stu-id="29079-316">Multiple <xref:System.Web.UI.WebControls.ObjectDataSource> controls can use the same cache entries in scenarios where they load data using the same type, method, and parameters.</span></span>



## Examples
 <span data-ttu-id="29079-317">以下三个示例显示了一个网页、一个代码隐藏页类和一个数据访问类，该数据访问类从 Northwind 数据库的 Employees 表中检索记录。</span><span class="sxs-lookup"><span data-stu-id="29079-317">The following three examples show a Web page, a code-behind page class, and a data-access class that retrieve records from the Employees table in the Northwind database.</span></span>

 <span data-ttu-id="29079-318">第一个示例显示一个网页，其中包含两个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件、一个 <xref:System.Web.UI.WebControls.DropDownList> 控件和一个 <xref:System.Web.UI.WebControls.DetailsView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-318">The first example shows a Web page that contains two <xref:System.Web.UI.WebControls.ObjectDataSource> controls, a <xref:System.Web.UI.WebControls.DropDownList> control, and a <xref:System.Web.UI.WebControls.DetailsView> control.</span></span> <span data-ttu-id="29079-319">第一个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DropDownList> 控件用于从数据库检索和显示雇员姓名。</span><span class="sxs-lookup"><span data-stu-id="29079-319">The first <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DropDownList> control are used to retrieve and display employee names from the database.</span></span> <span data-ttu-id="29079-320">第二个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DetailsView> 控件用于检索和显示用户选择的员工记录。</span><span class="sxs-lookup"><span data-stu-id="29079-320">The second <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DetailsView> control are used to retrieve and display the employee record that is selected by the user.</span></span>

 <span data-ttu-id="29079-321">为 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件启用了缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-321">Caching is enabled for the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-322">因此，只会从数据库中检索一次每条记录。</span><span class="sxs-lookup"><span data-stu-id="29079-322">Therefore, each record is retrieved only one time from the database.</span></span> <span data-ttu-id="29079-323"><xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 属性设置为 "EmployeeDetails"，但任何字符串值都可以用作键。</span><span class="sxs-lookup"><span data-stu-id="29079-323">The <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> property is set to "EmployeeDetails", but any string value can work as the key.</span></span> <span data-ttu-id="29079-324">该网页还包含一个 <xref:System.Web.UI.WebControls.Button> 控件，用户可单击该控件以使缓存的数据过期。</span><span class="sxs-lookup"><span data-stu-id="29079-324">The Web page also includes a <xref:System.Web.UI.WebControls.Button> control that the user can click to expire the cached data.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_18#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default2.aspx#3)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_18#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default2.aspx#3)]

 <span data-ttu-id="29079-325">第二个示例演示 <xref:System.Web.UI.Control.Load> 事件的处理程序，以及 <xref:System.Web.UI.WebControls.Button> 控件的 <xref:System.Web.UI.WebControls.Button.Click> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-325">The second example shows a handler for the <xref:System.Web.UI.Control.Load> event and a handler for the <xref:System.Web.UI.WebControls.Button.Click> event of the <xref:System.Web.UI.WebControls.Button> control.</span></span> <span data-ttu-id="29079-326"><xref:System.Web.UI.Control.Load> 事件处理程序将创建一个注册表项，其中的键设置为 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 值。</span><span class="sxs-lookup"><span data-stu-id="29079-326">The <xref:System.Web.UI.Control.Load> event handler creates a cache item with a key set to the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> value.</span></span> <span data-ttu-id="29079-327"><xref:System.Web.UI.WebControls.Button.Click> 事件处理程序将移除其键等于 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 值的缓存项。</span><span class="sxs-lookup"><span data-stu-id="29079-327">The <xref:System.Web.UI.WebControls.Button.Click> event handler removes the cache item whose key is equal to the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> value.</span></span> <span data-ttu-id="29079-328">删除缓存项后，所有依赖于该键的缓存数据都将过期。</span><span class="sxs-lookup"><span data-stu-id="29079-328">When the cache item is removed, all the cached data that is dependent on the key is expired.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#4](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default2.aspx.cs#4)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#4](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default2.aspx.vb#4)]

 <span data-ttu-id="29079-329">第三个示例显示与 Northwind 数据库交互的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-329">The third example shows the data access class that interacts with the Northwind database.</span></span> <span data-ttu-id="29079-330">类使用 LINQ 查询 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-330">The class uses LINQ to query the Employees table.</span></span> <span data-ttu-id="29079-331">该示例需要一个表示 Northwind 数据库的 LINQ to SQL 类和 "Employees" 表。</span><span class="sxs-lookup"><span data-stu-id="29079-331">The example requires a LINQ to SQL class that represents the Northwind database and the Employees table.</span></span> <span data-ttu-id="29079-332">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-332">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/App_Code/EmployeeLogic.cs#5)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/App_Code/EmployeeLogic.vb#5)]

 ]]></format>
        </remarks>
        <altmember cref="T:System.Web.Caching.SqlCacheDependency" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-333">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-333">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-334">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-334">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-335">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-335">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ConflictDetection">
      <MemberSignature Language="C#" Value="public System.Web.UI.ConflictOptions ConflictDetection { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Web.UI.ConflictOptions ConflictDetection" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection" />
      <MemberSignature Language="VB.NET" Value="Public Property ConflictDetection As ConflictOptions" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::ConflictOptions ConflictDetection { System::Web::UI::ConflictOptions get(); void set(System::Web::UI::ConflictOptions value); };" />
      <MemberSignature Language="F#" Value="member this.ConflictDetection : System.Web.UI.ConflictOptions with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.ConflictDetection" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(Mono.Cecil.CustomAttributeArgument)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.ConflictOptions</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-336">获取或设置一个值，该值确定是仅将新值传递给 <see langword="Update" /> 方法，还是将旧值和新值都传递给 <see langword="Update" /> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-336">Gets or sets a value that determines whether or not just the new values are passed to the <see langword="Update" /> method or both the old and new values are passed to the <see langword="Update" /> method.</span></span></summary>
        <value><span data-ttu-id="29079-337"><see cref="T:System.Web.UI.ConflictOptions" /> 值之一。</span><span class="sxs-lookup"><span data-stu-id="29079-337">One of the <see cref="T:System.Web.UI.ConflictOptions" /> values.</span></span> <span data-ttu-id="29079-338">默认为 <see cref="F:System.Web.UI.ConflictOptions.OverwriteChanges" />。</span><span class="sxs-lookup"><span data-stu-id="29079-338">The default is <see cref="F:System.Web.UI.ConflictOptions.OverwriteChanges" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-339">此属性确定是否将旧值和新值的参数应用于由 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性指定的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-339">This property determines whether parameters for old and new values are applied to the method specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property.</span></span> <span data-ttu-id="29079-340">例如，如果 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法返回 `Name` 和 `Number`的列的 <xref:System.Data.DataTable> 控件，并且 <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.OverwriteChanges> 字段，则会为 `Name` 方法的 `Number` 和 `Update` 创建参数。</span><span class="sxs-lookup"><span data-stu-id="29079-340">For example, if the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property returns a <xref:System.Data.DataTable> control with the columns `Name` and `Number`, and the <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> property is set to the <xref:System.Web.UI.ConflictOptions.OverwriteChanges> field, parameters are created for `Name` and `Number` for the `Update` method.</span></span> <span data-ttu-id="29079-341">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.CompareAllValues> 值，则将为 `Name`、`Number`、`original_Name`和 `original_Number`创建参数。</span><span class="sxs-lookup"><span data-stu-id="29079-341">If the <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> property is set to the <xref:System.Web.UI.ConflictOptions.CompareAllValues> value, parameters are created for `Name`, `Number`, `original_Name`, and `original_Number`.</span></span> <span data-ttu-id="29079-342">（原始值的参数的准确名称取决于 <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性。）然后 <xref:System.Web.UI.WebControls.ObjectDataSource> 确定 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性中指定的方法是否具有匹配的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-342">(The exact name of the parameters for the original values depends on the <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property.) The <xref:System.Web.UI.WebControls.ObjectDataSource> then determines whether the method that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property has parameters that match.</span></span>

 <span data-ttu-id="29079-343">并发控制是一种技术，当多个客户端访问和操作相同数据时，数据存储使用该技术来控制如何在存储区中读取和更改数据。</span><span class="sxs-lookup"><span data-stu-id="29079-343">Concurrency control is a technique that data stores use to control how data is read and changed in the store when multiple clients are accessing and manipulating the same data.</span></span> <span data-ttu-id="29079-344">例如，一个客户端读取数据并向用户显示数据，而另一个客户端读取相同的数据并将其显示给其他用户。</span><span class="sxs-lookup"><span data-stu-id="29079-344">For example, one client reads data and presents it to a user, while another client reads the same data and presents it to a different user.</span></span> <span data-ttu-id="29079-345">如果这两个用户更新数据并将其提交到数据存储，则可能会出现意外的结果，因为这两个客户端可能会为同一数据提供不同的值。</span><span class="sxs-lookup"><span data-stu-id="29079-345">If both users update the data and submit it to the data storage, an unexpected result might occur, because both clients might provide different values for the same data.</span></span> <span data-ttu-id="29079-346">这被视为冲突。</span><span class="sxs-lookup"><span data-stu-id="29079-346">This is considered a conflict.</span></span> <span data-ttu-id="29079-347">通过将 <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.CompareAllValues> 值，`Update` 方法可以将旧值和新值与原始数据源进行比较，以检测冲突并根据需要对其进行处理。</span><span class="sxs-lookup"><span data-stu-id="29079-347">By setting the <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> property to the <xref:System.Web.UI.ConflictOptions.CompareAllValues> value, the `Update` method can then compare the old and new values to the original data source to detect conflicts and handle them as necessary.</span></span>

 <span data-ttu-id="29079-348"><xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.ConflictDetection%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-348">The <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.ConflictDetection%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="T:System.Web.UI.ConflictOptions" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-349">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-349">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-350">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-350">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-351">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-351">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ConvertNullToDBNull">
      <MemberSignature Language="C#" Value="public bool ConvertNullToDBNull { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool ConvertNullToDBNull" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.ConvertNullToDBNull" />
      <MemberSignature Language="VB.NET" Value="Public Property ConvertNullToDBNull As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool ConvertNullToDBNull { bool get(); void set(bool value); };" />
      <MemberSignature Language="F#" Value="member this.ConvertNullToDBNull : bool with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.ConvertNullToDBNull" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(false)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-352">获取或设置一个值，该值指示传递给更新、插入或删除操作的 <see cref="T:System.Web.UI.WebControls.Parameter" /> 值是否由 <see langword="null" /> 控件自动从 <see cref="F:System.DBNull.Value" /> 转换为 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 值。</span><span class="sxs-lookup"><span data-stu-id="29079-352">Gets or sets a value indicating whether the <see cref="T:System.Web.UI.WebControls.Parameter" /> values that are passed to an update, insert, or delete operation are automatically converted from <see langword="null" /> to the <see cref="F:System.DBNull.Value" /> value by the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control.</span></span></summary>
        <value><span data-ttu-id="29079-353">如果传递给 <see langword="true" /> 控件的 <see langword="null" /> 对象中的任何 <see cref="T:System.Web.UI.WebControls.Parameter" /> 值自动转换为 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 值，则为 <see cref="F:System.DBNull.Value" />；否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="29079-353"><see langword="true" />, if any <see langword="null" /> values in <see cref="T:System.Web.UI.WebControls.Parameter" /> objects passed to the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control are automatically converted to <see cref="F:System.DBNull.Value" /> values; otherwise, <see langword="false" />.</span></span> <span data-ttu-id="29079-354">默认为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="29079-354">The default is <see langword="false" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-355">不将 `null` 转换为 <xref:System.DBNull.Value> 值可能会导致运行时错误。</span><span class="sxs-lookup"><span data-stu-id="29079-355">Not converting `null` to the <xref:System.DBNull.Value> value can result in errors at run time.</span></span> <span data-ttu-id="29079-356">使用 <xref:System.Web.UI.WebControls.ObjectDataSource.ConvertNullToDBNull%2A> 属性来指示通过 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件将传递给更新、插入或删除操作的 <xref:System.Web.UI.WebControls.Parameter> 值自动从 `null` 转换为 <xref:System.DBNull.Value> 值。</span><span class="sxs-lookup"><span data-stu-id="29079-356">Use the <xref:System.Web.UI.WebControls.ObjectDataSource.ConvertNullToDBNull%2A> property to indicate whether <xref:System.Web.UI.WebControls.Parameter> values that are passed to an update, insert, or delete operation are automatically converted from `null` to the <xref:System.DBNull.Value> value by the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="F:System.DBNull.Value" />
        <altmember cref="T:System.Web.UI.WebControls.ObjectDataSource" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-357">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-357">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-358">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-358">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-359">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-359">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="DataObjectTypeName">
      <MemberSignature Language="C#" Value="public string DataObjectTypeName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string DataObjectTypeName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName" />
      <MemberSignature Language="VB.NET" Value="Public Property DataObjectTypeName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ DataObjectTypeName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.DataObjectTypeName : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-360">获取或设置某个类的名称，<see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件将该类用于更新、插入或删除数据操作中的参数，而不是从数据绑定控件传递个别的值。</span><span class="sxs-lookup"><span data-stu-id="29079-360">Gets or sets the name of a class that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control uses for a parameter in an update, insert, or delete data operation, instead of passing individual values from the data-bound control.</span></span></summary>
        <value><span data-ttu-id="29079-361">部分或完全限定类名，用于标识可由 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 用作 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />、<see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> 或 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> 操作的参数的对象类型。</span><span class="sxs-lookup"><span data-stu-id="29079-361">A partially or fully qualified class name that identifies the type of the object that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> can use as a parameter for an <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />, <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" />, or a <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> operation.</span></span> <span data-ttu-id="29079-362">默认值为空字符串("")。</span><span class="sxs-lookup"><span data-stu-id="29079-362">The default is an empty string ("").</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-363">您可以创建一个聚合多个数据字段值的对象，而不是指定传递到 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A>和 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法的多个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-363">Instead of specifying several parameters that are passed to the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A>, and <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> methods, you can create one object that aggregates several data field values.</span></span> <span data-ttu-id="29079-364">此对象将传递给方法，而不是多个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-364">This one object is passed to the methods, instead of several parameters.</span></span>

 <span data-ttu-id="29079-365">绑定到数据绑定控件的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的默认行为是：数据绑定控件为数据源中的每个参数创建一个 <xref:System.Web.UI.WebControls.Parameter> 的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-365">The default behavior of an <xref:System.Web.UI.WebControls.ObjectDataSource> control that is bound to a data-bound control is that the data-bound control creates a <xref:System.Web.UI.WebControls.Parameter> object for each parameter in the data source.</span></span> <span data-ttu-id="29079-366">如果业务对象具有多个字段，则生成的方法还会有多个字段。</span><span class="sxs-lookup"><span data-stu-id="29079-366">If the business object has many fields, the resulting method also has many fields.</span></span> <span data-ttu-id="29079-367"><xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性允许您指定一个类型，该类型具有每个数据字段的属性。</span><span class="sxs-lookup"><span data-stu-id="29079-367">The <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property allows you to specify a type that has a property for each data field.</span></span> <span data-ttu-id="29079-368">然后，运行时将创建一个对象并设置其所有属性，而不是向方法传递多个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-368">Then, instead of passing several parameters to the method, the runtime creates one object and sets all of its properties.</span></span> <span data-ttu-id="29079-369">此对象将添加到方法调用的 parameters 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-369">This one object is added to the parameters collection for the method call.</span></span>

 <span data-ttu-id="29079-370"><xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性指定的类型必须具有无参数的无参数构造函数，因此 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件可以创建该类型的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-370">The type that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property must have a parameterless constructor that has no parameters, so the <xref:System.Web.UI.WebControls.ObjectDataSource> control can create an instance of the type.</span></span> <span data-ttu-id="29079-371">该类型还必须具有可设置的属性，这些属性允许 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件使用从数据绑定控件传递的值填充对象。</span><span class="sxs-lookup"><span data-stu-id="29079-371">The type must also have settable properties that allow the <xref:System.Web.UI.WebControls.ObjectDataSource> control to populate the object with values that are passed from the data-bound control.</span></span> <span data-ttu-id="29079-372"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件上的属性名称应与数据绑定控件传递的值的参数名称完全匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-372">The property names on the <xref:System.Web.UI.WebControls.ObjectDataSource> control are expected to exactly match the parameter names of values that are passed by the data-bound control.</span></span>

 <span data-ttu-id="29079-373">设置 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性并且 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与数据绑定控件关联时，<xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性指定的方法都必须具有在 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-373">When the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property is set and the <xref:System.Web.UI.WebControls.ObjectDataSource> control is associated with a data-bound control, the methods that are specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> properties must each have one parameter of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-374">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.OverwriteChanges> 值，则 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性指定的方法必须具有 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-374">If the <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> property is set to the <xref:System.Web.UI.ConflictOptions.OverwriteChanges> value, the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property must have one parameter of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-375">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.CompareAllValues> 值，则 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性指定的方法必须具有 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的两个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-375">If the <xref:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection%2A> property is set to the <xref:System.Web.UI.ConflictOptions.CompareAllValues> value, the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property must have two parameters of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-376">第一个参数包含原始值;第二个参数包含新值。</span><span class="sxs-lookup"><span data-stu-id="29079-376">The first parameter contains the original values; the second parameter contains the new values.</span></span>

 <span data-ttu-id="29079-377"><xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.DataObjectTypeName%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-377">The <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.DataObjectTypeName%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>



## Examples
 <span data-ttu-id="29079-378">节包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-378">The section contains two code examples.</span></span> <span data-ttu-id="29079-379">第一个代码示例演示如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性实现将所有参数值组合为一个对象的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-379">The first code example demonstrates how to implement a type that combines all parameter values into one object, using the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-380">第二个代码示例演示使用第一个代码示例中使用的两个类的网页。</span><span class="sxs-lookup"><span data-stu-id="29079-380">The second code example shows the Web page that uses the two classes that are used in the first code example.</span></span>

 <span data-ttu-id="29079-381">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性实现将所有参数值组合为一个对象的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-381">The following code example demonstrates how to implement a type that combines all parameter values into one object, using the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-382">`AggregateData` 类的 select 方法返回一个 <xref:System.Data.DataTable> 对象，其中包含两个名为 `Name` 和 `Number`的列。</span><span class="sxs-lookup"><span data-stu-id="29079-382">The select method of the `AggregateData` class returns a <xref:System.Data.DataTable> object with two columns named `Name` and `Number`.</span></span> <span data-ttu-id="29079-383">同样，`NewData` 类定义两个读/写属性，`Name` 和 `Number`。</span><span class="sxs-lookup"><span data-stu-id="29079-383">Similarly, the `NewData` class defines two read/write properties, `Name` and `Number`.</span></span> <span data-ttu-id="29079-384">`AggregateData` 类的 `Insert` 方法采用 `NewData`类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-384">The `Insert` method of the `AggregateData` class takes one parameter of type `NewData`.</span></span> <span data-ttu-id="29079-385"><xref:System.Web.UI.WebControls.ObjectDataSource> 的 `TypeName` 属性设置为 `AggregateData`，<xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性设置为 `NewData`。</span><span class="sxs-lookup"><span data-stu-id="29079-385">The `TypeName` property of the <xref:System.Web.UI.WebControls.ObjectDataSource> is set to `AggregateData` and the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property is set to `NewData`.</span></span>

 [!code-csharp[ObjectDataSourceDataObjectTypeName#2](~/samples/snippets/csharp/VS_Snippets_WebNet/ObjectDataSourceDataObjectTypeName/CS/AggregateData.cs#2)]
 [!code-vb[ObjectDataSourceDataObjectTypeName#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/ObjectDataSourceDataObjectTypeName/VB/AggregateData.vb#2)]

 <span data-ttu-id="29079-386">下面的代码示例演示使用前面的代码示例中使用的两个类的网页。</span><span class="sxs-lookup"><span data-stu-id="29079-386">The following code example shows the Web page that uses the two classes that are used in the preceding code example.</span></span>

 [!code-aspx-csharp[ObjectDataSourceDataObjectTypeName#1](~/samples/snippets/csharp/VS_Snippets_WebNet/ObjectDataSourceDataObjectTypeName/CS/AggregateDataPageCS.aspx#1)]
 [!code-aspx-vb[ObjectDataSourceDataObjectTypeName#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/ObjectDataSourceDataObjectTypeName/VB/AggregateDataPageVB.aspx#1)]

 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-387">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-387">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-388">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-388">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-389">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-389">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4"><span data-ttu-id="29079-390">在 ObjectDataSource 控件中使用参数</span><span class="sxs-lookup"><span data-stu-id="29079-390">Using Parameters with the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Delete">
      <MemberSignature Language="C#" Value="public int Delete ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int32 Delete() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.Delete" />
      <MemberSignature Language="VB.NET" Value="Public Function Delete () As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; int Delete();" />
      <MemberSignature Language="F#" Value="member this.Delete : unit -&gt; int" Usage="objectDataSource.Delete " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-391">通过用 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" /> 集合中的所有参数调用由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" /> 属性标识的方法，执行删除操作。</span><span class="sxs-lookup"><span data-stu-id="29079-391">Performs a delete operation by calling the method that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" /> property with any parameters that are in the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" /> collection.</span></span></summary>
        <returns><span data-ttu-id="29079-392">如果在 <see cref="P:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.AffectedRows" /> 事件中设置了 <see cref="T:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs" /> 的 <see cref="E:System.Web.UI.WebControls.ObjectDataSource.Deleted" /> 属性，则为表示从基础数据存储中删除的行数的值，否则为 -1。</span><span class="sxs-lookup"><span data-stu-id="29079-392">A value that represents the number of rows deleted from the underlying data storage, if the <see cref="P:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.AffectedRows" /> property of the <see cref="T:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs" /> is set in the <see cref="E:System.Web.UI.WebControls.ObjectDataSource.Deleted" /> event; otherwise, -1.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-393">在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 操作之前，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnDeleting%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-393">Before the <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> operation is performed, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnDeleting%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event.</span></span> <span data-ttu-id="29079-394">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件以检查参数的值，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 操作之前执行任何预处理。</span><span class="sxs-lookup"><span data-stu-id="29079-394">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event to examine the values of the parameters and to perform any preprocessing before a <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> operation.</span></span> <span data-ttu-id="29079-395">若要执行删除操作，<xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象使用反射来创建由 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性标识的对象的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-395">To perform a delete operation, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object uses reflection to create an instance of the object that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property.</span></span> <span data-ttu-id="29079-396">然后，它使用任意关联的 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 属性调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-396">It then calls the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property, using any associated <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> properties.</span></span> <span data-ttu-id="29079-397">如果删除参数来自关联的数据绑定控件，则将根据 <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性创建参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-397">If the deletion parameters come from an associated data-bound control, the name of the parameters is created according to the <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property.</span></span> <span data-ttu-id="29079-398"><xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 操作完成后，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnDeleted%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-398">After the <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> operation completes, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnDeleted%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> event.</span></span> <span data-ttu-id="29079-399">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> 事件以检查任何返回值、输出参数和异常，并执行任何后续处理。</span><span class="sxs-lookup"><span data-stu-id="29079-399">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> event to examine any return values, output parameters, and exceptions, and to perform any post-processing.</span></span>

 <span data-ttu-id="29079-400"><xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.Delete%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-400">The <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> method delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.Delete%2A> method of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

## <a name="data-bound-controls"></a><span data-ttu-id="29079-401">数据绑定控件</span><span class="sxs-lookup"><span data-stu-id="29079-401">Data-Bound Controls</span></span>
 <span data-ttu-id="29079-402"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件与数据绑定控件（如 <xref:System.Web.UI.WebControls.GridView> 控件）关联时，无需从页代码中调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-402">When the <xref:System.Web.UI.WebControls.ObjectDataSource> control is associated with a data-bound control, such as the <xref:System.Web.UI.WebControls.GridView> control, it is not necessary to call the <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> method from page code.</span></span> <span data-ttu-id="29079-403">改为直接通过数据绑定控件调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-403">The <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> method is invoked directly by the data-bound control instead.</span></span>

 <span data-ttu-id="29079-404">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-404">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A>.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-405">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-405">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-406">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-406">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-407">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-407">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Deleted">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Deleted;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Deleted" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Deleted" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Deleted As ObjectDataSourceStatusEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceStatusEventHandler ^ Deleted;" />
      <MemberSignature Language="F#" Value="member this.Deleted : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " Usage="member this.Deleted : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-408"><see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> 操作完成时发生。</span><span class="sxs-lookup"><span data-stu-id="29079-408">Occurs when a <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> operation has completed.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-409">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> 事件以检查返回值或输出参数的值，或确定 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 操作完成后是否引发了异常。</span><span class="sxs-lookup"><span data-stu-id="29079-409">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> event to examine the values of a return value or output parameters, or to determine whether an exception was thrown after a <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> operation has completed.</span></span> <span data-ttu-id="29079-410">可从与事件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> 对象中获取返回值、输出参数和异常处理属性。</span><span class="sxs-lookup"><span data-stu-id="29079-410">The return value, output parameters, and exception handling properties are available from the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> object that is associated with the event.</span></span>

 <span data-ttu-id="29079-411">您可以使用 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.AffectedRows%2A> 属性来返回从 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法中删除的行数。</span><span class="sxs-lookup"><span data-stu-id="29079-411">You can use the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.AffectedRows%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> object to return the number of rows that were deleted from the <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> method.</span></span> <span data-ttu-id="29079-412">为此，请设置 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.AffectedRows%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-412">To do this, set the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.AffectedRows%2A> property.</span></span> <span data-ttu-id="29079-413">如果从 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性指定的方法返回已删除的行数，则可以从 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.ReturnValue%2A> 属性中获取值。</span><span class="sxs-lookup"><span data-stu-id="29079-413">If you return the number of deleted rows from the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property, the value is available from the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs.ReturnValue%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> object.</span></span>

 <span data-ttu-id="29079-414">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-414">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-415">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-415">This section contains two code examples.</span></span> <span data-ttu-id="29079-416">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-416">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-417">第二个代码示例演示了第一个代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-417">The second code example shows the `EmployeeLogic` class that is used in the first code example.</span></span>

 <span data-ttu-id="29079-418">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-418">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-419">最初，<xref:System.Web.UI.WebControls.GridView> 控件将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法来检索 `EmployeeLogic` 对象中的数据，以显示一组所有员工。</span><span class="sxs-lookup"><span data-stu-id="29079-419">Initially, the <xref:System.Web.UI.WebControls.GridView> control displays a set of all employees, using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property to retrieve the data from the `EmployeeLogic` object.</span></span> <span data-ttu-id="29079-420">由于 <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> 属性设置为 `true`，<xref:System.Web.UI.WebControls.GridView> 控件会自动显示 "**删除**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-420">Because the <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> property is set to `true`, the <xref:System.Web.UI.WebControls.GridView> control automatically displays a **Delete** button.</span></span>

 <span data-ttu-id="29079-421">如果单击 "**删除**" 按钮，则将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性指定的方法和 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中指定的任何参数执行删除操作。</span><span class="sxs-lookup"><span data-stu-id="29079-421">If you click the **Delete** button, the delete operation is performed using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property and any parameters that are specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection.</span></span> <span data-ttu-id="29079-422">在此代码示例中，还执行了一些预处理和后处理步骤。</span><span class="sxs-lookup"><span data-stu-id="29079-422">In this code example, some preprocessing and post-processing steps are also performed.</span></span> <span data-ttu-id="29079-423">在执行操作之前调用 `NorthwindEmployeeDeleting` 委托来处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件，并在操作完成后调用 `NorthwindEmployeeDeleted` 委托来处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> 事件，以执行异常处理。</span><span class="sxs-lookup"><span data-stu-id="29079-423">The `NorthwindEmployeeDeleting` delegate is called to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event before the operation is performed and the `NorthwindEmployeeDeleted` delegate is called to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> event after the operation has completed to perform exception handling.</span></span> <span data-ttu-id="29079-424">在此代码示例中，如果引发了 `NorthwindDataException`，则它由 `NorthwindEmployeeDeleted` 方法进行处理。</span><span class="sxs-lookup"><span data-stu-id="29079-424">In this code example, if a `NorthwindDataException` is thrown, it is handled by the `NorthwindEmployeeDeleted` method.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_10#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/CS/objds10cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_10#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/VB/objds10vb.aspx#1)]

 <span data-ttu-id="29079-425">下面的代码示例演示了前面的代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-425">The following code example shows the `EmployeeLogic` class that is used in the preceding code example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_10#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/CS/northwindemployee10.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_10#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/VB/northwindemployee10.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Deleting" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnDeleted(System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-426">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-426">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-427">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-427">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-428">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-428">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-429">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-429">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="DeleteMethod">
      <MemberSignature Language="C#" Value="public string DeleteMethod { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string DeleteMethod" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" />
      <MemberSignature Language="VB.NET" Value="Public Property DeleteMethod As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ DeleteMethod { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.DeleteMethod : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-430">获取或设置由 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件调用以删除数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-430">Gets or sets the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control invokes to delete data.</span></span></summary>
        <value><span data-ttu-id="29079-431">一个字符串，表示 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 用于删除数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-431">A string that represents the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> uses to delete data.</span></span> <span data-ttu-id="29079-432">默认值为空字符串("")。</span><span class="sxs-lookup"><span data-stu-id="29079-432">The default is an empty string ("").</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-433">假定业务对象每次删除一条记录，而不是成批删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-433">The business object is assumed to delete data one record at a time, rather than in a batch.</span></span>

 <span data-ttu-id="29079-434"><xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.DeleteMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-434">The <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.DeleteMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-435">请确保为 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件配置的参数名称与 select 方法返回的列名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-435">Make sure that the parameter names configured for the <xref:System.Web.UI.WebControls.ObjectDataSource> control in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection match the column names that are returned by the select method.</span></span>

## <a name="object-lifetime"></a><span data-ttu-id="29079-436">对象生存期</span><span class="sxs-lookup"><span data-stu-id="29079-436">Object Lifetime</span></span>
 <span data-ttu-id="29079-437"><xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性标识的方法可以是实例方法，也可以是 `static` （`Shared` Visual Basic）方法。</span><span class="sxs-lookup"><span data-stu-id="29079-437">The method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property can be an instance method or a `static` (`Shared` in Visual Basic) method.</span></span> <span data-ttu-id="29079-438">如果它是实例方法，则每次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性时都会创建并销毁业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-438">If it is an instance method, the business object is created and destroyed each time the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property is called.</span></span> <span data-ttu-id="29079-439">在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性之前，您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件来处理业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-439">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> events to work with the business object before the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property is called.</span></span> <span data-ttu-id="29079-440">你还可以处理在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性后引发的 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-440">You can also handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event that is raised after the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property is called.</span></span> <span data-ttu-id="29079-441">如果业务对象实现 <xref:System.IDisposable> 接口，则在销毁对象之前调用 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-441">If the business object implements the <xref:System.IDisposable> interface, the <xref:System.IDisposable.Dispose%2A> method is called before the object is destroyed.</span></span> <span data-ttu-id="29079-442">如果该方法是 `static` （`Shared` Visual Basic）方法，则永远不会创建业务对象，也不能处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>、<xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-442">If the method is a `static` (`Shared` in Visual Basic) method, the business object is never created and you cannot handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>, <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>, and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> events.</span></span>

## <a name="parameter-merging"></a><span data-ttu-id="29079-443">参数合并</span><span class="sxs-lookup"><span data-stu-id="29079-443">Parameter Merging</span></span>
 <span data-ttu-id="29079-444">从三个源将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合：</span><span class="sxs-lookup"><span data-stu-id="29079-444">Parameters are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection from three sources:</span></span>

-   <span data-ttu-id="29079-445">在运行时从数据绑定控件。</span><span class="sxs-lookup"><span data-stu-id="29079-445">From the data-bound control, at run time.</span></span>

-   <span data-ttu-id="29079-446">从 `DeleteParameters` 元素中，以声明方式。</span><span class="sxs-lookup"><span data-stu-id="29079-446">From the `DeleteParameters` element, declaratively.</span></span>

-   <span data-ttu-id="29079-447">从 `Deleting` 方法，以声明方式。</span><span class="sxs-lookup"><span data-stu-id="29079-447">From the `Deleting` method, declaratively.</span></span>

 <span data-ttu-id="29079-448">首先，将从数据绑定控件生成的所有参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-448">First, any parameters that are generated from data-bound controls are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection.</span></span> <span data-ttu-id="29079-449">例如，如果 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件绑定到 <xref:System.Web.UI.WebControls.GridView> 控件，该控件的列 `Name` 和 `Number`，则 `Name` 和 `Number` 的参数将添加到集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-449">For example, if the <xref:System.Web.UI.WebControls.ObjectDataSource> control is bound to a <xref:System.Web.UI.WebControls.GridView> control that has the columns `Name` and `Number`, parameters for `Name` and `Number` are added to the collection.</span></span> <span data-ttu-id="29079-450">参数的确切名称取决于 <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-450">The exact name of the parameter depends on the <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property.</span></span> <span data-ttu-id="29079-451">这些参数的数据类型为 `string`。</span><span class="sxs-lookup"><span data-stu-id="29079-451">The data type of these parameters is `string`.</span></span> <span data-ttu-id="29079-452">接下来，将添加 `DeleteParameters` 元素中列出的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-452">Next, the parameters that are listed in the `DeleteParameters` element are added.</span></span> <span data-ttu-id="29079-453">如果找到 `DeleteParameters` 元素中与已在 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中的参数相同的参数，则会修改现有参数，使其与 `DeleteParameters` 元素中指定的参数匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-453">If a parameter in the `DeleteParameters` element is found with the same name as a parameter that is already in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection, the existing parameter is modified to match the parameter that is specified in the `DeleteParameters` element.</span></span> <span data-ttu-id="29079-454">通常，这用于修改参数中数据的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-454">Typically, this is used to modify the type of the data in the parameter.</span></span> <span data-ttu-id="29079-455">最后，你可以以编程方式在 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件中添加和移除参数，这会在 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法运行之前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-455">Finally, you can programmatically add and remove parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event, which occurs before the <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> method is run.</span></span> <span data-ttu-id="29079-456">合并参数后，解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-456">The method is resolved after the parameters are merged.</span></span> <span data-ttu-id="29079-457">下一节将讨论方法解析。</span><span class="sxs-lookup"><span data-stu-id="29079-457">Method resolution is discussed in the next section.</span></span>

## <a name="method-resolution"></a><span data-ttu-id="29079-458">方法解析</span><span class="sxs-lookup"><span data-stu-id="29079-458">Method Resolution</span></span>
 <span data-ttu-id="29079-459">调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法时，数据绑定控件中的数据字段、`DeleteParameters` 元素中以声明方式创建的参数以及在 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件处理程序中添加的参数都将合并。</span><span class="sxs-lookup"><span data-stu-id="29079-459">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> method is called, the data fields from the data-bound control, the parameters that were created declaratively in the `DeleteParameters` element, and the parameters that were added in the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event handler are all merged.</span></span> <span data-ttu-id="29079-460">（有关详细信息，请参阅前面的部分。）然后，<xref:System.Web.UI.WebControls.ObjectDataSource> 对象将尝试查找要调用的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-460">(For more information, see the preceding section.) The <xref:System.Web.UI.WebControls.ObjectDataSource> object then attempts to find a method to call.</span></span> <span data-ttu-id="29079-461">首先，它会查找一个或多个具有在 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性中指定的名称的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-461">First, it looks for one or more methods with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property.</span></span> <span data-ttu-id="29079-462">如果未找到匹配项，则会引发 <xref:System.InvalidOperationException> 异常。</span><span class="sxs-lookup"><span data-stu-id="29079-462">If no match is found, an <xref:System.InvalidOperationException> exception is thrown.</span></span> <span data-ttu-id="29079-463">如果找到匹配项，则它将查找匹配的参数名称。</span><span class="sxs-lookup"><span data-stu-id="29079-463">If a match is found, it then looks for matching parameter names.</span></span> <span data-ttu-id="29079-464">例如，假设 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性指定的类型有两个名为 `DeleteARecord`的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-464">For example, suppose the type that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property has two methods named `DeleteARecord`.</span></span> <span data-ttu-id="29079-465">一个 `DeleteARecord` 具有一个参数，`ID`，另一个 `DeleteARecord` 具有两个参数，`Name` 和 `Number`。</span><span class="sxs-lookup"><span data-stu-id="29079-465">One `DeleteARecord` has one parameter, `ID`, and the other `DeleteARecord` has two parameters, `Name` and `Number`.</span></span> <span data-ttu-id="29079-466">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合只有一个名为 `ID`的参数，则将调用只包含 `ID` 参数的 `DeleteARecord` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-466">If the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection has only one parameter named `ID`, the `DeleteARecord` method with just the `ID` parameter is called.</span></span> <span data-ttu-id="29079-467">解析方法时未检查参数类型。</span><span class="sxs-lookup"><span data-stu-id="29079-467">The type of the parameter is not checked in resolving the methods.</span></span> <span data-ttu-id="29079-468">参数的顺序并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-468">The order of the parameters does not matter.</span></span>

 <span data-ttu-id="29079-469">如果设置了 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性，则会以不同的方式解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-469">If the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property is set, the method is resolved in a different way.</span></span> <span data-ttu-id="29079-470"><xref:System.Web.UI.WebControls.ObjectDataSource> 查找 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性中指定了名称的方法，该属性采用 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-470">The <xref:System.Web.UI.WebControls.ObjectDataSource> looks for a method with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property that takes one parameter of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-471">在这种情况下，参数名称并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-471">In this case, the name of the parameter does not matter.</span></span>



## Examples
 <span data-ttu-id="29079-472">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-472">This section contains two code examples.</span></span> <span data-ttu-id="29079-473">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-473">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-474">第二个代码示例演示了第一个代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-474">The second code example shows the `EmployeeLogic` class that is used in the first code example.</span></span>

 <span data-ttu-id="29079-475">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-475">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-476">最初，<xref:System.Web.UI.WebControls.GridView> 控件将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法来检索 `EmployeeLogic` 对象中的数据，以显示一组所有员工。</span><span class="sxs-lookup"><span data-stu-id="29079-476">Initially, the <xref:System.Web.UI.WebControls.GridView> control displays a set of all employees, using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property to retrieve the data from the `EmployeeLogic` object.</span></span> <span data-ttu-id="29079-477">由于 <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> 属性设置为 `true`，<xref:System.Web.UI.WebControls.GridView> 控件会自动显示 "**删除**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-477">Because the <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> property is set to `true`, the <xref:System.Web.UI.WebControls.GridView> control automatically displays a **Delete** button.</span></span>

 <span data-ttu-id="29079-478">如果单击 "**删除**" 按钮，则将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性指定的方法和 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中指定的任何参数执行删除操作。</span><span class="sxs-lookup"><span data-stu-id="29079-478">If you click the **Delete** button, the delete operation is performed using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property and any parameters that are specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection.</span></span> <span data-ttu-id="29079-479">在此代码示例中，还执行了一些预处理和后处理步骤。</span><span class="sxs-lookup"><span data-stu-id="29079-479">In this code example, some preprocessing and post-processing steps are also performed.</span></span> <span data-ttu-id="29079-480">调用 `NorthwindEmployeeDeleting` 委托在执行操作之前处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件，并在操作完成后调用 `NorthwindEmployeeDeleted` 委托来处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> 事件，以执行异常处理。</span><span class="sxs-lookup"><span data-stu-id="29079-480">The `NorthwindEmployeeDeleting` delegate is called to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event before the operation is performed, and the `NorthwindEmployeeDeleted` delegate is called to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> event after the operation has completed to perform exception handling.</span></span> <span data-ttu-id="29079-481">在此示例中，如果引发了 `NorthwindDataException`，则由 `NorthwindDataException` 委托处理。</span><span class="sxs-lookup"><span data-stu-id="29079-481">In this example, if a `NorthwindDataException` is thrown, it is handled by the `NorthwindDataException` delegate.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_10#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/CS/objds10cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_10#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/VB/objds10vb.aspx#1)]

 <span data-ttu-id="29079-482">下面的代码示例演示了前面的代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-482">The following code example shows the `EmployeeLogic` class that is used in the preceding code example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_10#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/CS/northwindemployee10.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_10#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/VB/northwindemployee10.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-483">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-483">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-484">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-484">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-485">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-485">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-486">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-486">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="DeleteParameters">
      <MemberSignature Language="C#" Value="public System.Web.UI.WebControls.ParameterCollection DeleteParameters { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Web.UI.WebControls.ParameterCollection DeleteParameters" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property DeleteParameters As ParameterCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::WebControls::ParameterCollection ^ DeleteParameters { System::Web::UI::WebControls::ParameterCollection ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.DeleteParameters : System.Web.UI.WebControls.ParameterCollection" Usage="System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(null)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.MergableProperty(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.Web.UI.PersistenceMode(System.Web.UI.PersistenceMode.InnerProperty)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ParameterCollection</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-487">获取参数集合，该集合包含由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" /> 方法使用的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-487">Gets the parameters collection that contains the parameters that are used by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" /> method.</span></span></summary>
        <value><span data-ttu-id="29079-488"><see cref="T:System.Web.UI.WebControls.ParameterCollection" />，包含由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" /> 方法使用的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-488">A <see cref="T:System.Web.UI.WebControls.ParameterCollection" /> that contains the parameters used by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" /> method.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-489"><xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中包含的参数的名称和类型必须匹配 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 方法签名中的参数的名称和类型。</span><span class="sxs-lookup"><span data-stu-id="29079-489">The names and types of the parameters that are contained in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection must match the names and types of the parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> method signature.</span></span> <span data-ttu-id="29079-490">参数名称受 <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性影响，并区分大小写。</span><span class="sxs-lookup"><span data-stu-id="29079-490">The parameter names are affected by the <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property and are case-sensitive.</span></span> <span data-ttu-id="29079-491">集合中的参数取决于数据绑定控件中的数据、以声明方式指定的参数和以编程方式添加的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-491">The parameters in the collection depend on the data that is in the data-bound control, the parameters that are specified declaratively, and the parameters that are added programmatically.</span></span> <span data-ttu-id="29079-492">有关详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 中的 "参数合并" 和[将参数用于 ObjectDataSource 控件](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4)。</span><span class="sxs-lookup"><span data-stu-id="29079-492">For more information, see "Parameter Merging" in <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> and [Using Parameters with the ObjectDataSource Control](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4).</span></span>

 <span data-ttu-id="29079-493"><xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 属性检索与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象所包含的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.DeleteParameters%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-493">The <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> property retrieves the <xref:System.Web.UI.WebControls.ObjectDataSourceView.DeleteParameters%2A> property that is contained by the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-494">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-494">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A>.</span></span>



## Examples
 <span data-ttu-id="29079-495">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-495">This section contains two code examples.</span></span> <span data-ttu-id="29079-496">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-496">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-497">第二个代码示例演示了第一个代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-497">The second code example shows the `EmployeeLogic` class that is used in the first code example.</span></span>

 <span data-ttu-id="29079-498">下面的代码示例演示如何使用具有业务对象的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 属性和用于删除数据的 <xref:System.Web.UI.WebControls.GridView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-498">The following code example demonstrates how to use the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-499">最初，<xref:System.Web.UI.WebControls.GridView> 控件将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法来检索 `EmployeeLogic` 对象中的数据，以显示一组所有员工。</span><span class="sxs-lookup"><span data-stu-id="29079-499">Initially, the <xref:System.Web.UI.WebControls.GridView> control displays a set of all employees, using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property to retrieve the data from the `EmployeeLogic` object.</span></span> <span data-ttu-id="29079-500">由于 <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> 属性设置为 `true`，<xref:System.Web.UI.WebControls.GridView> 控件会自动显示 "**删除**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-500">Because the <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> property is set to `true`, the <xref:System.Web.UI.WebControls.GridView> control automatically displays a **Delete** button.</span></span>

 <span data-ttu-id="29079-501">如果单击 "**删除**" 按钮，则会调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件，其中包含两个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-501">If you click the **Delete** button, the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event is called with two parameters.</span></span> <span data-ttu-id="29079-502">一个参数 `EmpID`来自 <xref:System.Web.UI.WebControls.DataGrid> 控件，并基于 <xref:System.Web.UI.WebControls.GridView.DataKeyNames%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-502">One parameter, `EmpID`, comes from the <xref:System.Web.UI.WebControls.DataGrid> control, and is based on the <xref:System.Web.UI.WebControls.GridView.DataKeyNames%2A> property.</span></span> <span data-ttu-id="29079-503">其他参数来自声明性 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-503">The other parameter comes from the declarative <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> property.</span></span> <span data-ttu-id="29079-504">`EmployeeLogic` 类重载了 `DeleteEmployee` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-504">The `EmployeeLogic` class overloads the `DeleteEmployee` method.</span></span> <span data-ttu-id="29079-505">一个重载采用 `NorthwindEmployee` 参数，另一个重载采用名为 `anID`的 <xref:System.Int32> 参数。</span><span class="sxs-lookup"><span data-stu-id="29079-505">One overload takes a `NorthwindEmployee` parameter, and the other takes an <xref:System.Int32> parameter named `anID`.</span></span> <span data-ttu-id="29079-506">在 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件中，<xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 属性中的条目将调整为仅包含一个名为 `anID` 的参数，其值来自 `original_EmpID`。</span><span class="sxs-lookup"><span data-stu-id="29079-506">In the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event, the entries in the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> property are adjusted to include only one parameter named `anID` with the value from `original_EmpID`.</span></span> <span data-ttu-id="29079-507">如果存在事件处理程序，则调用匹配的 `DeleteEmployee` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-507">When the event handler exists, the matching `DeleteEmployee` method is called.</span></span>

 <span data-ttu-id="29079-508">下面的代码示例演示显示 <xref:System.Web.UI.WebControls.DataGrid> 控件并处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件的网页。</span><span class="sxs-lookup"><span data-stu-id="29079-508">The following code example shows the Web page that displays the <xref:System.Web.UI.WebControls.DataGrid> control and handles the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_11#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_11/CS/objds11cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_11#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_11/VB/objds11vb.aspx#1)]

 <span data-ttu-id="29079-509">下面的代码示例演示了前面的代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-509">The following code example shows the `EmployeeLogic` class that is used in the preceding code example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_11#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_11/CS/northwindemployee11.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_11#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_11/VB/northwindemployee11.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-510">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-510">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-511">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-511">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-512">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-512">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Deleting">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler Deleting;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler Deleting" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Deleting" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Deleting As ObjectDataSourceMethodEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceMethodEventHandler ^ Deleting;" />
      <MemberSignature Language="F#" Value="member this.Deleting : System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler " Usage="member this.Deleting : System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-513">在 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> 操作前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-513">Occurs before a <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> operation.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-514">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件以执行特定于您的应用程序的其他初始化，验证参数的值，或在 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件执行删除操作之前更改参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-514">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event to perform additional initialization that is specific to your application, to validate the values of parameters, or to change the parameter values before the <xref:System.Web.UI.WebControls.ObjectDataSource> control performs the delete operation.</span></span> <span data-ttu-id="29079-515">参数可用作由 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> 对象公开的 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 属性访问的 <xref:System.Collections.IDictionary> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-515">The parameters are available as an <xref:System.Collections.IDictionary> collection that is accessed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> property, which is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> object.</span></span>

 <span data-ttu-id="29079-516">您可以通过将 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> 的 <xref:Microsoft.Win32.SessionEndingEventArgs.Cancel%2A> 属性设置为 `true`来取消删除操作。</span><span class="sxs-lookup"><span data-stu-id="29079-516">You can cancel the delete operation by setting the <xref:Microsoft.Win32.SessionEndingEventArgs.Cancel%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> to `true`.</span></span>

 <span data-ttu-id="29079-517">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-517">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-518">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-518">This section contains two code examples.</span></span> <span data-ttu-id="29079-519">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-519">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-520">第二个代码示例演示了第一个代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-520">The second code example shows the `EmployeeLogic` class that is used in the first code example.</span></span>

 <span data-ttu-id="29079-521">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来删除数据。</span><span class="sxs-lookup"><span data-stu-id="29079-521">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.GridView> control to delete data.</span></span> <span data-ttu-id="29079-522">最初，<xref:System.Web.UI.WebControls.GridView> 控件将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法来检索 `EmployeeLogic` 对象中的数据，以显示一组所有员工。</span><span class="sxs-lookup"><span data-stu-id="29079-522">Initially, the <xref:System.Web.UI.WebControls.GridView> control displays a set of all employees, using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property to retrieve the data from the `EmployeeLogic` object.</span></span> <span data-ttu-id="29079-523">由于 <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> 属性设置为 `true`，<xref:System.Web.UI.WebControls.GridView> 控件会自动显示 "**删除**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-523">Because the <xref:System.Web.UI.WebControls.GridView.AutoGenerateDeleteButton%2A> property is set to `true`, the <xref:System.Web.UI.WebControls.GridView> control automatically displays a **Delete** button.</span></span>

 <span data-ttu-id="29079-524">如果单击 "**删除**" 按钮，则将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性指定的方法和 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合中指定的任何参数执行删除操作。</span><span class="sxs-lookup"><span data-stu-id="29079-524">If you click the **Delete** button, the delete operation is performed using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property and any parameters that are specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection.</span></span> <span data-ttu-id="29079-525">在此代码示例中，还执行了一些预处理和后处理步骤。</span><span class="sxs-lookup"><span data-stu-id="29079-525">In this code example, some preprocessing and post-processing steps are also performed.</span></span> <span data-ttu-id="29079-526">调用 `NorthwindEmployeeDeleting` 委托在执行操作之前处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> 事件，并在操作完成后调用 `NorthwindEmployeeDeleted` 委托来处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> 事件，以执行异常处理。</span><span class="sxs-lookup"><span data-stu-id="29079-526">The `NorthwindEmployeeDeleting` delegate is called to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleting> event before the operation is performed, and the `NorthwindEmployeeDeleted` delegate is called to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Deleted> event after the operation has completed to perform exception handling.</span></span> <span data-ttu-id="29079-527">在此代码示例中，如果引发了 `NorthwindDataException`，则它由 `NorthwindEmployeeDeleted` 方法进行处理。</span><span class="sxs-lookup"><span data-stu-id="29079-527">In this code example, if a `NorthwindDataException` is thrown, it is handled by the `NorthwindEmployeeDeleted` method.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_10#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/CS/objds10cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_10#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/VB/objds10vb.aspx#1)]

 <span data-ttu-id="29079-528">下面的代码示例演示了前面的代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-528">The following code example shows the `EmployeeLogic` class that is used in the preceding code example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_10#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/CS/northwindemployee10.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_10#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_10/VB/northwindemployee10.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Deleted" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnDeleting(System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-529">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-529">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-530">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-530">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-531">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-531">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="EnableCaching">
      <MemberSignature Language="C#" Value="public virtual bool EnableCaching { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool EnableCaching" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.EnableCaching" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Property EnableCaching As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property bool EnableCaching { bool get(); void set(bool value); };" />
      <MemberSignature Language="F#" Value="member this.EnableCaching : bool with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.EnableCaching" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(false)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-532">获取或设置一个值，该值指示 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件是否启用数据缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-532">Gets or sets a value indicating whether the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control has data caching enabled.</span></span></summary>
        <value><span data-ttu-id="29079-533">如果为数据源控件启用数据缓存，则为 <see langword="true" />；否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="29079-533"><see langword="true" /> if data caching is enabled for the data source control; otherwise, <see langword="false" />.</span></span> <span data-ttu-id="29079-534">默认为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="29079-534">The default is <see langword="false" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-535"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件支持数据缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-535">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports data caching.</span></span> <span data-ttu-id="29079-536">在缓存数据时，调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法将从缓存中检索数据，而不是 <xref:System.Web.UI.WebControls.ObjectDataSource> 创建业务对象的实例并调用其数据方法。</span><span class="sxs-lookup"><span data-stu-id="29079-536">While data is cached, calls to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieve data from the cache rather than the <xref:System.Web.UI.WebControls.ObjectDataSource> creating an instance of the business object and calling its data method.</span></span> <span data-ttu-id="29079-537">缓存过期后，<xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法从业务对象中检索数据，然后再次缓存数据。</span><span class="sxs-lookup"><span data-stu-id="29079-537">When the cache expires, the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method retrieves data from the business object, and then caches the data again.</span></span>

 <span data-ttu-id="29079-538">当 <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> 属性设置为 `true` 并且 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 属性设置为大于0的值时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将自动缓存数据，该值指示在丢弃缓存条目之前缓存存储数据的秒数。</span><span class="sxs-lookup"><span data-stu-id="29079-538">The <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically caches data when the <xref:System.Web.UI.WebControls.ObjectDataSource.EnableCaching%2A> property is set to `true` and the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> property is set to a value greater than 0, which indicates the number of seconds that the cache stores data before the cache entry is discarded.</span></span> <span data-ttu-id="29079-539">值0表示无限长的缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-539">A value of 0 indicates an infinitely long cache.</span></span>



## Examples
 <span data-ttu-id="29079-540">以下三个示例显示了一个网页、一个代码隐藏页类和一个数据访问类，该数据访问类从 Northwind 数据库的 Employees 表中检索记录。</span><span class="sxs-lookup"><span data-stu-id="29079-540">The following three examples show a Web page, a code-behind page class, and a data-access class that retrieve records from the Employees table in the Northwind database.</span></span>

 <span data-ttu-id="29079-541">第一个示例显示一个网页，其中包含两个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件、一个 <xref:System.Web.UI.WebControls.DropDownList> 控件和一个 <xref:System.Web.UI.WebControls.DetailsView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-541">The first example shows a Web page that contains two <xref:System.Web.UI.WebControls.ObjectDataSource> controls, a <xref:System.Web.UI.WebControls.DropDownList> control, and a <xref:System.Web.UI.WebControls.DetailsView> control.</span></span> <span data-ttu-id="29079-542">第一个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DropDownList> 控件用于从数据库检索和显示雇员姓名。</span><span class="sxs-lookup"><span data-stu-id="29079-542">The first <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DropDownList> control are used to retrieve and display employee names from the database.</span></span> <span data-ttu-id="29079-543">第二个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DetailsView> 控件用于检索和显示用户选择的员工记录。</span><span class="sxs-lookup"><span data-stu-id="29079-543">The second <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DetailsView> control are used to retrieve and display the employee record that is selected by the user.</span></span>

 <span data-ttu-id="29079-544">为 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件启用了缓存。</span><span class="sxs-lookup"><span data-stu-id="29079-544">Caching is enabled for the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-545">因此，只会从数据库中检索一次每条记录。</span><span class="sxs-lookup"><span data-stu-id="29079-545">Therefore, each record is retrieved only one time from the database.</span></span> <span data-ttu-id="29079-546"><xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 属性设置为 "EmployeeDetails"，但任何字符串值都可以用作键。</span><span class="sxs-lookup"><span data-stu-id="29079-546">The <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> property is set to "EmployeeDetails", but any string value can work as the key.</span></span> <span data-ttu-id="29079-547">该网页还包含一个 <xref:System.Web.UI.WebControls.Button> 控件，用户可单击该控件以使缓存的数据过期。</span><span class="sxs-lookup"><span data-stu-id="29079-547">The Web page also includes a <xref:System.Web.UI.WebControls.Button> control that the user can click to expire the cached data.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_18#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default2.aspx#3)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_18#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default2.aspx#3)]

 <span data-ttu-id="29079-548">第二个示例演示 <xref:System.Web.UI.Control.Load> 事件的处理程序，以及 <xref:System.Web.UI.WebControls.Button> 控件的 <xref:System.Web.UI.WebControls.Button.Click> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-548">The second example shows a handler for the <xref:System.Web.UI.Control.Load> event and a handler for the <xref:System.Web.UI.WebControls.Button.Click> event of the <xref:System.Web.UI.WebControls.Button> control.</span></span> <span data-ttu-id="29079-549"><xref:System.Web.UI.Control.Load> 事件处理程序将创建一个注册表项，其中的键设置为 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 值。</span><span class="sxs-lookup"><span data-stu-id="29079-549">The <xref:System.Web.UI.Control.Load> event handler creates a cache item with a key set to the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> value.</span></span> <span data-ttu-id="29079-550"><xref:System.Web.UI.WebControls.Button.Click> 事件处理程序将移除其键等于 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> 值的缓存项。</span><span class="sxs-lookup"><span data-stu-id="29079-550">The <xref:System.Web.UI.WebControls.Button.Click> event handler removes the cache item whose key is equal to the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheKeyDependency%2A> value.</span></span> <span data-ttu-id="29079-551">删除缓存项后，所有依赖于该键的缓存数据都将过期。</span><span class="sxs-lookup"><span data-stu-id="29079-551">When the cache item is removed, all the cached data that is dependent on the key is expired.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#4](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default2.aspx.cs#4)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#4](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default2.aspx.vb#4)]

 <span data-ttu-id="29079-552">第三个示例显示与 Northwind 数据库交互的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-552">The third example shows the data access class that interacts with the Northwind database.</span></span> <span data-ttu-id="29079-553">类使用 LINQ 查询 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-553">The class uses LINQ to query the Employees table.</span></span> <span data-ttu-id="29079-554">该示例需要一个表示 Northwind 数据库的 LINQ to SQL 类和 "Employees" 表。</span><span class="sxs-lookup"><span data-stu-id="29079-554">The example requires a LINQ to SQL class that represents the Northwind database and the Employees table.</span></span> <span data-ttu-id="29079-555">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-555">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/App_Code/EmployeeLogic.cs#5)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/App_Code/EmployeeLogic.vb#5)]

 ]]></format>
        </remarks>
        <exception cref="T:System.NotSupportedException"><span data-ttu-id="29079-556">当由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.EnableCaching" /> 属性指定的方法返回 <see langword="true" /> 时，会将 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性设置为 <see cref="T:System.Data.Common.DbDataReader" />。</span><span class="sxs-lookup"><span data-stu-id="29079-556">The <see cref="P:System.Web.UI.WebControls.ObjectDataSource.EnableCaching" /> property is set to <see langword="true" /> when the method specified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property returns a <see cref="T:System.Data.Common.DbDataReader" />.</span></span></exception>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.CacheDuration" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-557">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-557">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-558">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-558">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-559">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-559">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="EnablePaging">
      <MemberSignature Language="C#" Value="public bool EnablePaging { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool EnablePaging" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.EnablePaging" />
      <MemberSignature Language="VB.NET" Value="Public Property EnablePaging As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool EnablePaging { bool get(); void set(bool value); };" />
      <MemberSignature Language="F#" Value="member this.EnablePaging : bool with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.EnablePaging" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(false)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-560">获取或设置一个值，该值指示数据源控件是否支持对它检索的数据集进行分页。</span><span class="sxs-lookup"><span data-stu-id="29079-560">Gets or sets a value that indicates whether the data source control supports paging through the set of data that it retrieves.</span></span></summary>
        <value><span data-ttu-id="29079-561">如果数据源控件通过它检索的数据支持分页，则为 <see langword="true" />；否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="29079-561"><see langword="true" /> if the data source control supports paging through the data it retrieves; otherwise, <see langword="false" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-562">通过设置 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 的 "<xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>"、"<xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A>"、"<xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A>" 和 "<xref:System.Web.UI.WebControls.ObjectDataSource>" 属性，然后在业务对象中使用正确的参数定义 select 方法，可处理 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件进行分页。</span><span class="sxs-lookup"><span data-stu-id="29079-562">Paging by the <xref:System.Web.UI.WebControls.ObjectDataSource> control is handled by setting the <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A>, and <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> properties of the <xref:System.Web.UI.WebControls.ObjectDataSource> and defining a select method in the business object with the proper parameters.</span></span> <span data-ttu-id="29079-563">如果将 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性设置为 `true`，则 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合将为请求的第一行包含两个附加参数，并为请求的行数提供两个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-563">When the <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property is set to `true`, the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection includes two additional parameters for the first row that is requested and the number of rows that are requested.</span></span> <span data-ttu-id="29079-564">这两个参数的命名方式由 <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性定义。</span><span class="sxs-lookup"><span data-stu-id="29079-564">These two parameters are named as defined by the <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> properties.</span></span> <span data-ttu-id="29079-565">`Select` 方法应从指定索引处开始，返回请求的行数。</span><span class="sxs-lookup"><span data-stu-id="29079-565">The `Select` method should return the requested number of rows, starting at the specified index.</span></span> <span data-ttu-id="29079-566">由于数据可能不会被页面大小平均分割，因此最后一页可能包含较少的行。</span><span class="sxs-lookup"><span data-stu-id="29079-566">Because the data might not divide evenly by the page size, the last page might contain fewer rows.</span></span> <span data-ttu-id="29079-567">因此，所请求的行数实际上是返回的最大行数。</span><span class="sxs-lookup"><span data-stu-id="29079-567">Thus, the number of rows that are requested is actually the maximum number of rows that are returned.</span></span>

 <span data-ttu-id="29079-568">如果对关联的数据绑定控件启用了分页，则数据绑定控件将调用 `Select` 方法，该方法具有所需的起始索引和行数。</span><span class="sxs-lookup"><span data-stu-id="29079-568">When paging is enabled on the associated data-bound control, the data-bound control calls the `Select` method with the start index and number of rows that are required.</span></span> <span data-ttu-id="29079-569">此外，如果设置 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性，数据绑定控件将在呈现页导航控件之前调用方法。</span><span class="sxs-lookup"><span data-stu-id="29079-569">Additionally, if the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is set, the data-bound control calls the method before rendering the pager controls.</span></span> <span data-ttu-id="29079-570">例如，如果某个 <xref:System.Web.UI.WebControls.GridView> 控件的页大小启用了分页，而该控件的页大小为5，并且由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性指定的方法返回20个，则在页导航中只显示4个页。</span><span class="sxs-lookup"><span data-stu-id="29079-570">For example, if a <xref:System.Web.UI.WebControls.GridView> control has paging enabled with a page size of 5, and the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property returns 20, only 4 pages are displayed in the pager.</span></span>

 <span data-ttu-id="29079-571"><xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性委托给 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.EnablePaging%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-571">The <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.EnablePaging%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object.</span></span>



## Examples
 <span data-ttu-id="29079-572">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够选择页面中显示的记录数。</span><span class="sxs-lookup"><span data-stu-id="29079-572">The following three examples show a Web page, a code-behind page class, and a data-access class that enable the user to pick how many records are displayed in the page.</span></span>

 <span data-ttu-id="29079-573">网页包含 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性设置为 `true`的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-573">The Web page contains an <xref:System.Web.UI.WebControls.ObjectDataSource> control whose <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property is set to `true`.</span></span> <span data-ttu-id="29079-574"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性设置为方法的名称，该方法返回查询中的记录总数。</span><span class="sxs-lookup"><span data-stu-id="29079-574">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is set to the name of a method that returns the total number of records in the query.</span></span> <span data-ttu-id="29079-575"><xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性和 <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 属性设置为 Select 方法中使用的参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-575">The <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> property and the <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> property are set to the names of the parameters that are used in the Select method.</span></span> <span data-ttu-id="29079-576">此页还包含一个 <xref:System.Web.UI.WebControls.DropDownList> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-576">The page also contains a <xref:System.Web.UI.WebControls.DropDownList> control.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx#1)]

 <span data-ttu-id="29079-577">第二个示例显示 <xref:System.Web.UI.WebControls.DropDownList> 控件的 <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-577">The second example shows a handler for the <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> event of the <xref:System.Web.UI.WebControls.DropDownList> control.</span></span> <span data-ttu-id="29079-578">处理程序中的代码将 <xref:System.Web.UI.WebControls.GridView.PageSize%2A> 属性设置为用户的选择。</span><span class="sxs-lookup"><span data-stu-id="29079-578">The code in the handler sets the <xref:System.Web.UI.WebControls.GridView.PageSize%2A> property to the user's selection.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx.vb#2)]

 <span data-ttu-id="29079-579">第三个示例显示了从 Customers 表检索数据的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-579">The third example shows the data access class that retrieves data from the Customers table.</span></span> <span data-ttu-id="29079-580">它包括一个名为 `GetSubsetOfEmployees`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-580">It includes a method named `GetSubsetOfEmployees`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-581">该示例还包括一个名为 `GetEmployeeCount`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-581">The example also includes a method named `GetEmployeeCount`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-582">类使用 LINQ 查询 Customers 表。</span><span class="sxs-lookup"><span data-stu-id="29079-582">The class uses LINQ to query the Customers table.</span></span> <span data-ttu-id="29079-583">该示例需要一个表示 Northwind 数据库和 Customers 表的 LINQ to SQL 类。</span><span class="sxs-lookup"><span data-stu-id="29079-583">The example requires a LINQ to SQL class that represents the Northwind database and Customers table.</span></span> <span data-ttu-id="29079-584">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-584">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/App_Code/CustomerLogic.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/App_Code/CustomerLogic.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSourceView.CanPage" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-585">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-585">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-586">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-586">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-587">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-587">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="FilterExpression">
      <MemberSignature Language="C#" Value="public string FilterExpression { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string FilterExpression" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" />
      <MemberSignature Language="VB.NET" Value="Public Property FilterExpression As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ FilterExpression { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.FilterExpression : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.FilterExpression" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-588">获取或设置当调用由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性指定的方法时应用的筛选表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-588">Gets or sets a filtering expression that is applied when the method that is specified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property is called.</span></span></summary>
        <value><span data-ttu-id="29079-589">一个字符串，表示在使用由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性标识的方法或函数检索数据时应用的筛选表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-589">A string that represents a filtering expression that is applied when data is retrieved by using the method or function identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-590">仅当 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件才支持筛选数据。</span><span class="sxs-lookup"><span data-stu-id="29079-590">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports filtering data only when the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method returns a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object.</span></span>

 <span data-ttu-id="29079-591">用于 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性的语法是格式字符串样式表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-591">The syntax that is used for the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property is a format string-style expression.</span></span> <span data-ttu-id="29079-592">筛选表达式语法与 <xref:System.Data.DataColumn.Expression%2A> 属性接受的语法相同。</span><span class="sxs-lookup"><span data-stu-id="29079-592">The filter expression syntax is the same syntax that is accepted by the <xref:System.Data.DataColumn.Expression%2A> property.</span></span> <span data-ttu-id="29079-593">如果将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合，还可以包含格式字符串占位符。</span><span class="sxs-lookup"><span data-stu-id="29079-593">If you add parameters to the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection, you can also include format string placeholders.</span></span> <span data-ttu-id="29079-594">例如，在要替换参数值的表达式中包含 `"{0}"`。</span><span class="sxs-lookup"><span data-stu-id="29079-594">For example, include `"{0}"` in the expression to substitute for parameter values.</span></span> <span data-ttu-id="29079-595">占位符根据 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合中参数的索引进行替换。</span><span class="sxs-lookup"><span data-stu-id="29079-595">The placeholders are replaced according to the index of the parameter in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection.</span></span>

 <span data-ttu-id="29079-596">可以在 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性中包含参数。</span><span class="sxs-lookup"><span data-stu-id="29079-596">You can include parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property.</span></span> <span data-ttu-id="29079-597">如果参数的类型是字符串或字符类型，则将参数括在单引号内。</span><span class="sxs-lookup"><span data-stu-id="29079-597">If the type of the parameter is a string or character type, enclose the parameter in single quotation marks.</span></span> <span data-ttu-id="29079-598">如果参数是数值类型，则不需要引号。</span><span class="sxs-lookup"><span data-stu-id="29079-598">Quotation marks are not required if the parameter is a numeric type.</span></span>

 <span data-ttu-id="29079-599"><xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合包含为在 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性中找到的占位符计算的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-599">The <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection contains the parameters that are evaluated for the placeholders that are found in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property.</span></span>

 <span data-ttu-id="29079-600"><xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.FilterExpression%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-600">The <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.FilterExpression%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

> [!NOTE]
>  <span data-ttu-id="29079-601">应该验证从客户端接收的任何筛选器参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-601">You should validate any filter parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-602">运行时只需将参数值替换为筛选表达式，并将其应用于 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回的 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象。</span><span class="sxs-lookup"><span data-stu-id="29079-602">The runtime simply substitutes the parameter value into the filter expression and applies it to the <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object that is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-603">如果使用 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性作为安全措施来限制返回的项目数，则必须在进行筛选之前验证参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-603">If you are using the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property as a security measure to limit the number of items that are returned, you must validate the parameter values before the filtering occurs.</span></span>



## Examples
 <span data-ttu-id="29079-604">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件显示筛选的数据，以便从中间层业务对象中检索数据，并使用 <xref:System.Web.UI.WebControls.GridView> 控件来显示结果。</span><span class="sxs-lookup"><span data-stu-id="29079-604">The following code example demonstrates how to display filtered data using an <xref:System.Web.UI.WebControls.ObjectDataSource> control to retrieve data from a middle-tier business object and a <xref:System.Web.UI.WebControls.GridView> control to display the results.</span></span> <span data-ttu-id="29079-605">仅当检索数据的方法将其检索为 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件才能筛选数据。</span><span class="sxs-lookup"><span data-stu-id="29079-605">The <xref:System.Web.UI.WebControls.ObjectDataSource> control can filter data only when the method that retrieves the data retrieves it as a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object.</span></span> <span data-ttu-id="29079-606">出于此原因，<xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识将数据作为 <xref:System.Data.DataSet>检索的业务对象方法。</span><span class="sxs-lookup"><span data-stu-id="29079-606">For this reason, the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property identifies a business object method that retrieves data as a <xref:System.Data.DataSet>.</span></span>

 <span data-ttu-id="29079-607">此代码示例由 <xref:System.Web.UI.WebControls.TextBox> 控件、<xref:System.Web.UI.WebControls.GridView> 控件、<xref:System.Web.UI.WebControls.ObjectDataSource> 控件和**提交**按钮组成。</span><span class="sxs-lookup"><span data-stu-id="29079-607">The code example consists of a <xref:System.Web.UI.WebControls.TextBox> control, a <xref:System.Web.UI.WebControls.GridView> control, the <xref:System.Web.UI.WebControls.ObjectDataSource> control, and a **Submit** button.</span></span> <span data-ttu-id="29079-608">默认情况下，将使用其中一个 Northwind 商贸员工的名称填充 <xref:System.Web.UI.WebControls.TextBox>。</span><span class="sxs-lookup"><span data-stu-id="29079-608">By default, the <xref:System.Web.UI.WebControls.TextBox> is populated with the name of one of the Northwind Traders employees.</span></span> <span data-ttu-id="29079-609"><xref:System.Web.UI.WebControls.GridView> 显示 <xref:System.Web.UI.WebControls.TextBox>中的名称所标识的员工的相关信息。</span><span class="sxs-lookup"><span data-stu-id="29079-609">The <xref:System.Web.UI.WebControls.GridView> displays information about the employee that is identified by the name in the <xref:System.Web.UI.WebControls.TextBox>.</span></span> <span data-ttu-id="29079-610">若要检索另一个雇员的数据，请在 <xref:System.Web.UI.WebControls.TextBox>中输入雇员的全名，然后单击 "**提交**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-610">To retrieve data on another employee, enter the full name of the employee in the <xref:System.Web.UI.WebControls.TextBox>, and then click the **Submit** button.</span></span>

 <span data-ttu-id="29079-611"><xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性指定一个表达式，该表达式用于筛选由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法检索的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-611">The <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property specifies an expression that is used to filter the data that is retrieved by the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-612">它使用计算结果为 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合中包含的参数的参数占位符。</span><span class="sxs-lookup"><span data-stu-id="29079-612">It uses parameter placeholders that are evaluated to the parameters that are contained in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection.</span></span> <span data-ttu-id="29079-613">在此示例中，参数占位符由单引号界定，因为参数的类型是可能包含空格的字符串类型。</span><span class="sxs-lookup"><span data-stu-id="29079-613">In this example, the parameter placeholder is bounded by single quotation marks because the type of the parameter is a string type that might contain spaces.</span></span> <span data-ttu-id="29079-614">如果参数的类型是数值或日期类型，则不需要用到边界引号。</span><span class="sxs-lookup"><span data-stu-id="29079-614">If the type of the parameter is a numeric or date type, bounding quotation marks are not required.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-615">此示例具有一个接受用户输入的文本框，这是一个潜在的安全威胁。</span><span class="sxs-lookup"><span data-stu-id="29079-615">This example has a text box that accepts user input, which is a potential security threat.</span></span> <span data-ttu-id="29079-616">默认情况下，ASP.NET 网页验证用户输入是否不包含脚本或 HTML 元素。</span><span class="sxs-lookup"><span data-stu-id="29079-616">By default, ASP.NET Web pages validate that user input does not include script or HTML elements.</span></span> <span data-ttu-id="29079-617">有关详细信息，请参阅[脚本侵入概述](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="29079-617">For more information, see [Script Exploits Overview](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100)).</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_9#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/CS/objds9cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_9#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/VB/objds9vb.aspx#1)]

 <span data-ttu-id="29079-618">下面的代码示例提供了前面的代码示例使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-618">The following code example provides an example of a middle-tier business object that the preceding code example uses.</span></span> <span data-ttu-id="29079-619">此代码示例包含两个基本类：</span><span class="sxs-lookup"><span data-stu-id="29079-619">The code example consists of two basic classes:</span></span>

-   <span data-ttu-id="29079-620">`EmployeeLogic` 类，该类封装业务逻辑。</span><span class="sxs-lookup"><span data-stu-id="29079-620">The `EmployeeLogic` class, which is a class that encapsulates business logic.</span></span>

-   <span data-ttu-id="29079-621">`NorthwindEmployee` 类，该类是一个仅包含从数据层加载和保存数据所需的基本功能的模型类。</span><span class="sxs-lookup"><span data-stu-id="29079-621">The `NorthwindEmployee` class, which is a model class that contains only the basic functionality that is required to load and persist data from the data tier.</span></span>

 <span data-ttu-id="29079-622">为简单起见，`EmployeeLogic` 类创建一组静态数据，而不是从数据层检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-622">For simplicity, the `EmployeeLogic` class creates a static set of data, rather than retrieving the data from a data tier.</span></span> <span data-ttu-id="29079-623">它在此示例中也很有帮助，因为示例需要提供 Northwind 商贸员工的全名才能演示筛选。</span><span class="sxs-lookup"><span data-stu-id="29079-623">It is also helpful for this example, because the sample relies on you to provide the full name of a Northwind Traders employee to demonstrate filtering.</span></span> <span data-ttu-id="29079-624">对于完整的工作示例，必须使用所提供的 Web 窗体代码示例来编译并使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-624">For a complete working example, you must compile and use these classes with the Web Forms code examples that are provided.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_9#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/CS/northwindemployee9.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_9#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/VB/northwindemployee9.vb#2)]

 ]]></format>
        </remarks>
        <exception cref="T:System.NotSupportedException"><span data-ttu-id="29079-625">设置了 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> 属性，但 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> 方法没有返回 <see cref="T:System.Data.DataSet" /> 或 <see cref="T:System.Data.DataTable" />。</span><span class="sxs-lookup"><span data-stu-id="29079-625">The <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> property was set and the <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> method does not return a <see cref="T:System.Data.DataSet" /> or <see cref="T:System.Data.DataTable" />.</span></span></exception>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterParameters" />
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Filtering" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-626">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-626">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-627">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-627">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-628">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-628">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Filtering">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceFilteringEventHandler Filtering;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceFilteringEventHandler Filtering" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Filtering" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Filtering As ObjectDataSourceFilteringEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceFilteringEventHandler ^ Filtering;" />
      <MemberSignature Language="F#" Value="member this.Filtering : System.Web.UI.WebControls.ObjectDataSourceFilteringEventHandler " Usage="member this.Filtering : System.Web.UI.WebControls.ObjectDataSourceFilteringEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceFilteringEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-629">执行筛选操作前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-629">Occurs before a filter operation.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-630">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Filtering> 事件，以便在 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件执行筛选操作之前对筛选器参数值执行验证操作。</span><span class="sxs-lookup"><span data-stu-id="29079-630">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Filtering> event to perform validation operations on filter parameter values before the <xref:System.Web.UI.WebControls.ObjectDataSource> control performs a filter operation.</span></span> <span data-ttu-id="29079-631">您可以通过将 <xref:System.Web.UI.WebControls.ObjectDataSourceFilteringEventArgs> 的 <xref:System.ComponentModel.CancelEventArgs.Cancel%2A> 属性设置为 `true`来取消所选操作。</span><span class="sxs-lookup"><span data-stu-id="29079-631">You can cancel the selected operation by setting the <xref:System.ComponentModel.CancelEventArgs.Cancel%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceFilteringEventArgs> to `true`.</span></span> <span data-ttu-id="29079-632">仅当设置了 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性时才引发事件。</span><span class="sxs-lookup"><span data-stu-id="29079-632">The event is raised only if the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property is set.</span></span>

 <span data-ttu-id="29079-633"><xref:System.Web.UI.WebControls.ObjectDataSource.Filtering?displayProperty=nameWithType> 事件委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.Filtering?displayProperty=nameWithType> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-633">The <xref:System.Web.UI.WebControls.ObjectDataSource.Filtering?displayProperty=nameWithType> event delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.Filtering?displayProperty=nameWithType> event of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-634">应该验证从客户端接收的任何筛选器参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-634">You should validate any filter parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-635">运行时只需将参数值替换为筛选表达式，并将其应用于 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回的 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象。</span><span class="sxs-lookup"><span data-stu-id="29079-635">The runtime simply substitutes the parameter value into the filter expression and applies it to the <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object that is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-636">如果使用 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性作为安全措施来限制返回的项目数，则必须在进行筛选之前验证参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-636">If you are using the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property as a security measure to limit the number of items that are returned, you must validate the parameter values before the filtering occurs.</span></span>

 <span data-ttu-id="29079-637">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-637">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-638">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-638">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-639">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-639">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-640">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-640">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="FilterParameters">
      <MemberSignature Language="C#" Value="public System.Web.UI.WebControls.ParameterCollection FilterParameters { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Web.UI.WebControls.ParameterCollection FilterParameters" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.FilterParameters" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property FilterParameters As ParameterCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::WebControls::ParameterCollection ^ FilterParameters { System::Web::UI::WebControls::ParameterCollection ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.FilterParameters : System.Web.UI.WebControls.ParameterCollection" Usage="System.Web.UI.WebControls.ObjectDataSource.FilterParameters" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(null)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.MergableProperty(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.Web.UI.PersistenceMode(System.Web.UI.PersistenceMode.InnerProperty)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ParameterCollection</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-641">获取与 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> 字符串中的任何参数占位符关联的参数的集合。</span><span class="sxs-lookup"><span data-stu-id="29079-641">Gets a collection of parameters that are associated with any parameter placeholders in the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> string.</span></span></summary>
        <value><span data-ttu-id="29079-642"><see cref="T:System.Web.UI.WebControls.ParameterCollection" />，它包含与在 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> 属性中找到的任何参数占位符相关联的一组参数。</span><span class="sxs-lookup"><span data-stu-id="29079-642">A <see cref="T:System.Web.UI.WebControls.ParameterCollection" /> that contains a set of parameters associated with any parameter placeholders found in the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> property.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-643">仅当 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件才支持筛选数据。</span><span class="sxs-lookup"><span data-stu-id="29079-643">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports filtering data only when the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method returns a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object.</span></span>

 <span data-ttu-id="29079-644">用于 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 的语法是格式字符串样式表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-644">The syntax that is used for the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> is a format string-style expression.</span></span> <span data-ttu-id="29079-645">筛选表达式语法与 <xref:System.Data.DataColumn.Expression%2A> 属性接受的语法相同。</span><span class="sxs-lookup"><span data-stu-id="29079-645">The filter expression syntax is the same syntax that is accepted by the <xref:System.Data.DataColumn.Expression%2A> property.</span></span> <span data-ttu-id="29079-646">如果将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合，还可以包含格式字符串占位符。</span><span class="sxs-lookup"><span data-stu-id="29079-646">If you add parameters to the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection, you can also include format string placeholders.</span></span> <span data-ttu-id="29079-647">例如，在要替换参数值的表达式中包含 `"{0}"`。</span><span class="sxs-lookup"><span data-stu-id="29079-647">For example, include `"{0}"` in the expression to substitute for parameter values.</span></span> <span data-ttu-id="29079-648">占位符根据 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合中参数的索引进行替换。</span><span class="sxs-lookup"><span data-stu-id="29079-648">The placeholders are replaced according to the index of the parameter in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection.</span></span>

 <span data-ttu-id="29079-649">可以在 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性中包含参数。</span><span class="sxs-lookup"><span data-stu-id="29079-649">You can include parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property.</span></span> <span data-ttu-id="29079-650">如果参数为字符串或字符类型，则将参数括在单引号内。</span><span class="sxs-lookup"><span data-stu-id="29079-650">If the parameter is a string or character type, enclose the parameter in single quotation marks.</span></span> <span data-ttu-id="29079-651">如果参数是数值类型，则不需要引号。</span><span class="sxs-lookup"><span data-stu-id="29079-651">Quotation marks are not required if the parameter is a numeric type.</span></span>

 <span data-ttu-id="29079-652"><xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 属性检索与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象所包含的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.FilterParameters%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-652">The <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> property retrieves the <xref:System.Web.UI.WebControls.ObjectDataSourceView.FilterParameters%2A> property that is contained by the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>



## Examples
 <span data-ttu-id="29079-653">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-653">This section contains two code examples.</span></span> <span data-ttu-id="29079-654">第一个代码示例演示如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象显示筛选的数据，以便从中间层业务对象中检索数据，并使用 <xref:System.Web.UI.WebControls.GridView> 控件来显示结果。</span><span class="sxs-lookup"><span data-stu-id="29079-654">The first code example demonstrates how to display filtered data using an <xref:System.Web.UI.WebControls.ObjectDataSource> object to retrieve data from a middle-tier business object and a <xref:System.Web.UI.WebControls.GridView> control to display the results.</span></span> <span data-ttu-id="29079-655">第二个代码示例提供了在第一个代码示例中使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-655">The second code example provides an example of a middle-tier business object that is used in the first code example.</span></span>

 <span data-ttu-id="29079-656">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件显示筛选的数据，以便从中间层业务对象中检索数据，并使用 <xref:System.Web.UI.WebControls.GridView> 控件来显示结果。</span><span class="sxs-lookup"><span data-stu-id="29079-656">The following code example demonstrates how to display filtered data using an <xref:System.Web.UI.WebControls.ObjectDataSource> control to retrieve data from a middle-tier business object and a <xref:System.Web.UI.WebControls.GridView> control to display the results.</span></span> <span data-ttu-id="29079-657">仅当检索数据的方法将其检索为 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件才能筛选数据。</span><span class="sxs-lookup"><span data-stu-id="29079-657">The <xref:System.Web.UI.WebControls.ObjectDataSource> control can filter data only when the method that retrieves the data retrieves it as a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object.</span></span> <span data-ttu-id="29079-658">出于此原因，<xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识将数据作为 <xref:System.Data.DataSet>检索的业务对象方法。</span><span class="sxs-lookup"><span data-stu-id="29079-658">For this reason, the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property identifies a business object method that retrieves data as a <xref:System.Data.DataSet>.</span></span>

 <span data-ttu-id="29079-659">此代码示例由 <xref:System.Web.UI.WebControls.TextBox> 控件、<xref:System.Web.UI.WebControls.GridView> 控件、<xref:System.Web.UI.WebControls.ObjectDataSource> 控件和**提交**按钮组成。</span><span class="sxs-lookup"><span data-stu-id="29079-659">The code example consists of a <xref:System.Web.UI.WebControls.TextBox> control, a <xref:System.Web.UI.WebControls.GridView> control, the <xref:System.Web.UI.WebControls.ObjectDataSource> control, and a **Submit** button.</span></span> <span data-ttu-id="29079-660">默认情况下，将使用其中一个 Northwind 商贸员工的名称填充 <xref:System.Web.UI.WebControls.TextBox>。</span><span class="sxs-lookup"><span data-stu-id="29079-660">By default, the <xref:System.Web.UI.WebControls.TextBox> is populated with the name of one of the Northwind Traders employees.</span></span> <span data-ttu-id="29079-661"><xref:System.Web.UI.WebControls.GridView> 显示 <xref:System.Web.UI.WebControls.TextBox>中的名称所标识的员工的相关信息。</span><span class="sxs-lookup"><span data-stu-id="29079-661">The <xref:System.Web.UI.WebControls.GridView> displays information about the employee that is identified by the name in the <xref:System.Web.UI.WebControls.TextBox>.</span></span> <span data-ttu-id="29079-662">若要检索另一个雇员的数据，请在 "<xref:System.Web.UI.WebControls.TextBox>中输入雇员的全名，然后单击"**提交**"按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-662">To retrieve data on another employee, in the <xref:System.Web.UI.WebControls.TextBox>, enter the full name of the employee, and then click the **Submit** button.</span></span>

 <span data-ttu-id="29079-663"><xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性指定一个表达式，该表达式用于筛选 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性检索的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-663">The <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property specifies an expression that is used to filter the data that is retrieved by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-664">它使用计算结果为 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合中包含的参数的参数占位符。</span><span class="sxs-lookup"><span data-stu-id="29079-664">It uses parameter placeholders that are evaluated to the parameters that are contained in the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection.</span></span> <span data-ttu-id="29079-665">在此示例中，参数占位符由单引号界定，因为参数的类型是可能包含空格的字符串类型。</span><span class="sxs-lookup"><span data-stu-id="29079-665">In this example, the parameter placeholder is bounded by single quotation marks because the type of the parameter is a string type that might contain spaces.</span></span> <span data-ttu-id="29079-666">如果参数的类型是数值或日期类型，则不需要用到边界引号。</span><span class="sxs-lookup"><span data-stu-id="29079-666">If the type of the parameter is a numeric or date type, bounding quotation marks are not required.</span></span> <span data-ttu-id="29079-667"><xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 集合包含一个参数 <xref:System.Web.UI.WebControls.FormParameter>，该参数绑定到 <xref:System.Web.UI.WebControls.TextBox> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-667">The <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> collection contains one parameter, a <xref:System.Web.UI.WebControls.FormParameter> object that is bound to the <xref:System.Web.UI.WebControls.TextBox> control.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-668">应该验证从客户端接收的任何筛选器参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-668">You should validate any filter parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-669">运行时只需将参数值替换为筛选表达式，并将其应用于 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回的 <xref:System.Data.DataView> 对象。</span><span class="sxs-lookup"><span data-stu-id="29079-669">The runtime simply substitutes the parameter value into the filter expression and applies it to the <xref:System.Data.DataView> object that is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span> <span data-ttu-id="29079-670">如果使用 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性作为安全措施来限制返回的项目数，则必须在进行筛选之前验证参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-670">If you are using the <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property as a security measure to limit the number of items that are returned, you must validate the parameter values before the filtering occurs.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_9#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/CS/objds9cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_9#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/VB/objds9vb.aspx#1)]

 <span data-ttu-id="29079-671">下面的代码示例提供了前面的代码示例使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-671">The following code example provides an example of a middle-tier business object that the preceding code example uses.</span></span> <span data-ttu-id="29079-672">此代码示例包含两个基本类：</span><span class="sxs-lookup"><span data-stu-id="29079-672">The code example consists of two basic classes:</span></span>

-   <span data-ttu-id="29079-673">`EmployeeLogic` 类，该类封装业务逻辑。</span><span class="sxs-lookup"><span data-stu-id="29079-673">The `EmployeeLogic` class, which is a class that encapsulates business logic.</span></span>

-   <span data-ttu-id="29079-674">`NorthwindEmployee` 类，该类是一个仅包含从数据层加载和保存数据所需的基本功能的模型类。</span><span class="sxs-lookup"><span data-stu-id="29079-674">The `NorthwindEmployee` class, which is a model class that contains only the basic functionality that is required to load and persist data from the data tier.</span></span>

 <span data-ttu-id="29079-675">为简单起见，`EmployeeLogic` 类创建一组静态数据，而不是从数据层检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-675">For simplicity, the `EmployeeLogic` class creates a static set of data, rather than retrieving the data from a data tier.</span></span> <span data-ttu-id="29079-676">它在此示例中也很有帮助，因为示例需要提供 Northwind 商贸员工的全名才能演示筛选。</span><span class="sxs-lookup"><span data-stu-id="29079-676">It is also helpful for this example, because the sample relies on you to provide the full name of a Northwind Traders employee to demonstrate filtering.</span></span> <span data-ttu-id="29079-677">对于完整的工作示例，必须使用所提供的 Web 窗体代码示例来编译并使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-677">For a complete working example, you must compile and use these classes with the Web Forms code examples that are provided.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_9#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/CS/northwindemployee9.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_9#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_9/VB/northwindemployee9.vb#2)]

 ]]></format>
        </remarks>
        <exception cref="T:System.NotSupportedException"><span data-ttu-id="29079-678">您设置了 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> 属性，但 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> 方法没有返回 <see cref="T:System.Data.DataSet" /> 或 <see cref="T:System.Data.DataTable" />。</span><span class="sxs-lookup"><span data-stu-id="29079-678">You set the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" /> property and the <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> method does not return a <see cref="T:System.Data.DataSet" /> or <see cref="T:System.Data.DataTable" />.</span></span></exception>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.FilterExpression" />
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Filtering" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-679">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-679">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-680">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-680">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-681">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-681">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="GetView">
      <MemberSignature Language="C#" Value="protected override System.Web.UI.DataSourceView GetView (string viewName);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance class System.Web.UI.DataSourceView GetView(string viewName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.GetView(System.String)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Function GetView (viewName As String) As DataSourceView" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override System::Web::UI::DataSourceView ^ GetView(System::String ^ viewName);" />
      <MemberSignature Language="F#" Value="override this.GetView : string -&gt; System.Web.UI.DataSourceView" Usage="objectDataSource.GetView viewName" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.DataSourceView</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="viewName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="viewName"><span data-ttu-id="29079-682">要检索的视图的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-682">The name of the view to retrieve.</span></span> <span data-ttu-id="29079-683">由于 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 只支持一个视图，因此 <paramref name="viewName" /> 被忽略。</span><span class="sxs-lookup"><span data-stu-id="29079-683">Because the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> supports only one view, <paramref name="viewName" /> is ignored.</span></span></param>
        <summary><span data-ttu-id="29079-684">检索与数据源控件关联的命名数据源视图。</span><span class="sxs-lookup"><span data-stu-id="29079-684">Retrieves the named data source view that is associated with the data source control.</span></span></summary>
        <returns><span data-ttu-id="29079-685">与 <see cref="T:System.Web.UI.WebControls.ObjectDataSourceView" /> 关联的名为 <see langword="DefaultView" /> 的 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" />。</span><span class="sxs-lookup"><span data-stu-id="29079-685">The <see cref="T:System.Web.UI.WebControls.ObjectDataSourceView" /> named <see langword="DefaultView" /> that is associated with the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-686"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件仅支持一个数据源视图。</span><span class="sxs-lookup"><span data-stu-id="29079-686">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports only one data source view.</span></span> <span data-ttu-id="29079-687">与所有数据源视图对象一样，与数据源控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 定义其功能，执行从基础数据存储检索数据所需的所有工作，并执行排序、插入、删除和更新等操作。</span><span class="sxs-lookup"><span data-stu-id="29079-687">As with all data source view objects, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the data source control defines its capabilities, performs all the work that is necessary to retrieve data from the underlying data storage, and performs operations such as sorting, inserting, deleting, and updating.</span></span>

 <span data-ttu-id="29079-688"><xref:System.Web.UI.WebControls.ObjectDataSource.GetView%2A> 方法旨在通过数据绑定控件（而不是页代码）进行调用。</span><span class="sxs-lookup"><span data-stu-id="29079-688">The <xref:System.Web.UI.WebControls.ObjectDataSource.GetView%2A> method is intended to be called by data-bound controls, not by page code.</span></span>

 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="29079-689">指定的 <paramref name="viewName" /> 为 <see langword="null" /> 或 <see langword="DefaultView" /> 以外的值。</span><span class="sxs-lookup"><span data-stu-id="29079-689">The specified <paramref name="viewName" /> is <see langword="null" /> or something other than <see langword="DefaultView" />.</span></span></exception>
        <altmember cref="T:System.Web.UI.WebControls.ObjectDataSourceView" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.GetViewNames" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-690">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-690">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-691">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-691">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-692">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-692">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="GetViewNames">
      <MemberSignature Language="C#" Value="protected override System.Collections.ICollection GetViewNames ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance class System.Collections.ICollection GetViewNames() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.GetViewNames" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Function GetViewNames () As ICollection" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override System::Collections::ICollection ^ GetViewNames();" />
      <MemberSignature Language="F#" Value="override this.GetViewNames : unit -&gt; System.Collections.ICollection" Usage="objectDataSource.GetViewNames " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Collections.ICollection</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-693">检索名称的集合，这些名称表示与 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 对象关联的视图对象的列表。</span><span class="sxs-lookup"><span data-stu-id="29079-693">Retrieves a collection of names representing the list of view objects that are associated with the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> object.</span></span></summary>
        <returns><span data-ttu-id="29079-694">包含视图名称的 <see cref="T:System.Collections.ICollection" />，这些视图与 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 关联。</span><span class="sxs-lookup"><span data-stu-id="29079-694">An <see cref="T:System.Collections.ICollection" /> that contains the names of the views associated with the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-695"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件在其基础数据上仅支持一个名为 `DefaultView`的视图。</span><span class="sxs-lookup"><span data-stu-id="29079-695">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports only one view, named `DefaultView`, on its underlying data.</span></span> <span data-ttu-id="29079-696"><xref:System.Web.UI.WebControls.ObjectDataSource.GetViewNames%2A> 方法返回这一个视图名称的单元素集合。</span><span class="sxs-lookup"><span data-stu-id="29079-696">The <xref:System.Web.UI.WebControls.ObjectDataSource.GetViewNames%2A> method returns a single-element collection of this one view name.</span></span>

 <span data-ttu-id="29079-697"><xref:System.Web.UI.WebControls.ObjectDataSource.GetViewNames%2A> 方法旨在通过数据绑定控件（而不是页代码）进行调用。</span><span class="sxs-lookup"><span data-stu-id="29079-697">The <xref:System.Web.UI.WebControls.ObjectDataSource.GetViewNames%2A> method is intended to be called by data-bound controls, not by page code.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.GetView(System.String)" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-698">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-698">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-699">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-699">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-700">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-700">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Insert">
      <MemberSignature Language="C#" Value="public int Insert ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int32 Insert() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />
      <MemberSignature Language="VB.NET" Value="Public Function Insert () As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; int Insert();" />
      <MemberSignature Language="F#" Value="member this.Insert : unit -&gt; int" Usage="objectDataSource.Insert " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-701">通过调用由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" /> 属性标识的方法和 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" /> 集合中的所有参数，执行插入操作。</span><span class="sxs-lookup"><span data-stu-id="29079-701">Performs an insert operation by calling the method that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" /> property and any parameters in the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" /> collection.</span></span></summary>
        <returns><span data-ttu-id="29079-702">一个表示插入到基础数据存储中的行数的值。</span><span class="sxs-lookup"><span data-stu-id="29079-702">A value that represents the number of rows inserted into the underlying data storage.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-703">在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作之前，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnInserting%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-703">Before the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation is performed, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnInserting%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event.</span></span> <span data-ttu-id="29079-704">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件以检查参数的值，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作之前执行任何预处理。</span><span class="sxs-lookup"><span data-stu-id="29079-704">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event to examine the values of the parameters and to perform any preprocessing before an <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation.</span></span> <span data-ttu-id="29079-705">若要执行插入操作，<xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象使用反射来创建由 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性标识的对象的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-705">To perform an insert operation, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object uses reflection to create an instance of the object that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property.</span></span> <span data-ttu-id="29079-706">然后，它使用任意关联的 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 属性调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-706">It then calls the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property, using any associated <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> properties.</span></span> <span data-ttu-id="29079-707"><xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作完成后，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnInserted%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserted> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-707">After the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation completes, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnInserted%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserted> event.</span></span> <span data-ttu-id="29079-708">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserted> 事件以检查任何返回值、输出参数和异常，并执行任何后续处理。</span><span class="sxs-lookup"><span data-stu-id="29079-708">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserted> event to examine any return values, output parameters, and exceptions, and to perform any post-processing.</span></span>

 <span data-ttu-id="29079-709"><xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.Insert%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-709">The <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.Insert%2A> method of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-710">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-710">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>.</span></span>

## <a name="data-bound-controls"></a><span data-ttu-id="29079-711">数据绑定控件</span><span class="sxs-lookup"><span data-stu-id="29079-711">Data-Bound Controls</span></span>
 <span data-ttu-id="29079-712">当 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与数据绑定控件（如 <xref:System.Web.UI.WebControls.GridView> 控件）关联时，无需从页代码中调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-712">When the <xref:System.Web.UI.WebControls.ObjectDataSource> object is associated with a data-bound control, such as the <xref:System.Web.UI.WebControls.GridView> control, it is not necessary to call the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method from page code.</span></span> <span data-ttu-id="29079-713">改为直接通过数据绑定控件调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-713">The <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method is invoked directly by the data-bound control instead.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/a806fa2c-fe6a-405f-869c-74e804a642ea"><span data-ttu-id="29079-714">演练：到自定义业务对象的数据绑定</span><span class="sxs-lookup"><span data-stu-id="29079-714">Walkthrough: Data Binding to a Custom Business Object</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-715">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-715">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-716">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-716">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-717">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-717">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Inserted">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Inserted;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Inserted" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Inserted" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Inserted As ObjectDataSourceStatusEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceStatusEventHandler ^ Inserted;" />
      <MemberSignature Language="F#" Value="member this.Inserted : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " Usage="member this.Inserted : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-718">在 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" /> 操作完成时发生。</span><span class="sxs-lookup"><span data-stu-id="29079-718">Occurs when an <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" /> operation has completed.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-719">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserted> 事件以检查返回值或输出参数的值，或确定 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作完成后是否引发了异常。</span><span class="sxs-lookup"><span data-stu-id="29079-719">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserted> event to examine the values of a return value or output parameters, or to determine whether an exception was thrown after an <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation has completed.</span></span> <span data-ttu-id="29079-720">可从与事件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> 对象中获取返回值、输出参数和异常处理属性。</span><span class="sxs-lookup"><span data-stu-id="29079-720">The return value, output parameters, and exception handling properties are available from the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> object that is associated with the event.</span></span>

 <span data-ttu-id="29079-721">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-721">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Inserting" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnInserted(System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-722">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-722">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-723">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-723">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-724">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-724">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Inserting">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler Inserting;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler Inserting" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Inserting" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Inserting As ObjectDataSourceMethodEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceMethodEventHandler ^ Inserting;" />
      <MemberSignature Language="F#" Value="member this.Inserting : System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler " Usage="member this.Inserting : System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-725">在 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" /> 操作前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-725">Occurs before an <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" /> operation.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-726">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件以执行特定于您的应用程序的其他初始化，验证参数的值，或在 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件执行插入操作之前更改参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-726">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event to perform additional initialization that is specific to your application, to validate the values of parameters, or to change the parameter values before the <xref:System.Web.UI.WebControls.ObjectDataSource> control performs the insert operation.</span></span> <span data-ttu-id="29079-727">参数可用作由 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> 对象公开的 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 属性访问的 <xref:System.Collections.IDictionary> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-727">The parameters are available as an <xref:System.Collections.IDictionary> collection that is accessed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> property, which is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> object.</span></span>

 <span data-ttu-id="29079-728">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-728">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-729">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-729">This section contains two code examples.</span></span> <span data-ttu-id="29079-730">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.DetailsView> 控件结合使用以插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-730">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.DetailsView> control to insert data.</span></span> <span data-ttu-id="29079-731">第二个代码示例提供了在第一个代码示例中使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-731">The second code example provides an example of the middle-tier business object that is used in the first code example.</span></span>

 <span data-ttu-id="29079-732">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.DetailsView> 控件结合使用以插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-732">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.DetailsView> control to insert data.</span></span> <span data-ttu-id="29079-733">最初，<xref:System.Web.UI.WebControls.DetailsView> 显示新的 `NorthwindEmployee` 记录以及自动生成的 "**插入**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-733">Initially, the <xref:System.Web.UI.WebControls.DetailsView> displays a new `NorthwindEmployee` record, along with an automatically generated **Insert** button.</span></span> <span data-ttu-id="29079-734">在 <xref:System.Web.UI.WebControls.DetailsView> 控件的字段中输入数据后，单击 "**插入**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-734">After you enter data into the fields of the <xref:System.Web.UI.WebControls.DetailsView> control, click the **Insert** button.</span></span> <span data-ttu-id="29079-735"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识执行插入操作的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-735">The <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property identifies which method performs the insert operation.</span></span>

 <span data-ttu-id="29079-736">在此示例中，`UpdateEmployeeInfo` 方法用于执行插入;但是，它需要 `NorthwindEmployee` 参数才能插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-736">In this example, the `UpdateEmployeeInfo` method is used to perform an insert; however, it requires a `NorthwindEmployee` parameter to insert the data.</span></span> <span data-ttu-id="29079-737">出于此原因，<xref:System.Web.UI.WebControls.DetailsView> 控制自动传递的字符串集合是不够的。</span><span class="sxs-lookup"><span data-stu-id="29079-737">For this reason, the collection of strings that the <xref:System.Web.UI.WebControls.DetailsView> control passes automatically is not sufficient.</span></span> <span data-ttu-id="29079-738">`NorthwindEmployeeInserting` 委托是处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件的 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler> 对象，它使你能够在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作之前操作输入参数。</span><span class="sxs-lookup"><span data-stu-id="29079-738">The `NorthwindEmployeeInserting` delegate is an <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler> object that handles the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event and enables you to manipulate the input parameters before the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation proceeds.</span></span> <span data-ttu-id="29079-739">由于 `UpdateEmployeeInfo` 方法需要将 `NorthwindEmployee` 对象作为参数，因此将使用字符串的集合创建一个参数，并使用该方法所需的参数名称（`ne`）将其添加到 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-739">Because the `UpdateEmployeeInfo` method requires a `NorthwindEmployee` object as a parameter, one is created using the collection of strings and is added to the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> collection using a parameter name (`ne`) that the method expects.</span></span> <span data-ttu-id="29079-740">使用现有的中间层对象作为数据源时，可以执行如下所述的步骤，这些类型和方法不是专门用于 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的类型和方法。</span><span class="sxs-lookup"><span data-stu-id="29079-740">You might perform steps like these when using an existing middle-tier object as a data source with types and methods that are not designed specifically for use with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-741">执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作时，将调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-741">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation is performed, the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property is called.</span></span> <span data-ttu-id="29079-742">如果对象的 `Insert` 方法具有包含参数的方法签名，则 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合必须包含名称与方法签名参数相匹配的参数，<xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法才能成功完成。</span><span class="sxs-lookup"><span data-stu-id="29079-742">If the `Insert` method of the object has a method signature that includes parameters, the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection must contain a parameter with names that match the method signature parameters for the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method to complete successfully.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_4#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/CS/objds4cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_4#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/VB/objds4vb.aspx#1)]

 <span data-ttu-id="29079-743">下面的代码示例提供了前面的代码示例使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-743">The following code example provides an example of a middle-tier business object that the preceding code example uses.</span></span> <span data-ttu-id="29079-744">此代码示例包含两个基本类：</span><span class="sxs-lookup"><span data-stu-id="29079-744">The code example consists of two basic classes:</span></span>

-   <span data-ttu-id="29079-745">`EmployeeLogic` 类，该类是一个封装业务逻辑的无状态类。</span><span class="sxs-lookup"><span data-stu-id="29079-745">The `EmployeeLogic` class, which is a stateless class that encapsulates business logic.</span></span>

-   <span data-ttu-id="29079-746">`NorthwindEmployee` 类，该类是一个仅包含从数据层加载和保存数据所需的基本功能的模型类。</span><span class="sxs-lookup"><span data-stu-id="29079-746">The `NorthwindEmployee` class, which is a model class that contains only the basic functionality that is required to load and persist data from the data tier.</span></span>

 <span data-ttu-id="29079-747">提供额外的 `NorthwindDataException` 类是一种方便的方式。</span><span class="sxs-lookup"><span data-stu-id="29079-747">An additional `NorthwindDataException` class is provided as a convenience.</span></span> <span data-ttu-id="29079-748">若要获取完整的工作示例，必须编译并使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-748">For a complete working example, you must compile and use these classes.</span></span> <span data-ttu-id="29079-749">不完全实现 `UpdateEmployeeInfo` 方法，因此当您试验此示例时，不会将数据插入 Northwind 商贸数据库中。</span><span class="sxs-lookup"><span data-stu-id="29079-749">The `UpdateEmployeeInfo` method is not completely implemented, so you will not insert data into the Northwind Traders database when you experiment with this example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_4#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/CS/northwindemployee4.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_4#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/VB/northwindemployee4.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Inserted" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnInserting(System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-750">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-750">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-751">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-751">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-752">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-752">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="InsertMethod">
      <MemberSignature Language="C#" Value="public string InsertMethod { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string InsertMethod" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" />
      <MemberSignature Language="VB.NET" Value="Public Property InsertMethod As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ InsertMethod { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.InsertMethod : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.InsertMethod" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-753">获取或设置由 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件调用以插入数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-753">Gets or sets the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control invokes to insert data.</span></span></summary>
        <value><span data-ttu-id="29079-754">一个字符串，表示 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 用于插入数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-754">A string that represents the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> uses to insert data.</span></span> <span data-ttu-id="29079-755">默认值为空字符串("")。</span><span class="sxs-lookup"><span data-stu-id="29079-755">The default is an empty string ("").</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-756">假定业务对象每次插入一条记录，而不是在批处理中插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-756">The business object is assumed to insert data one record at a time, rather than in a batch.</span></span>

 <span data-ttu-id="29079-757"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.InsertMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-757">The <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.InsertMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> object.</span></span>

## <a name="object-lifetime"></a><span data-ttu-id="29079-758">对象生存期</span><span class="sxs-lookup"><span data-stu-id="29079-758">Object Lifetime</span></span>
 <span data-ttu-id="29079-759"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识的方法可以是实例方法，也可以是 `static` （`Shared` Visual Basic）方法。</span><span class="sxs-lookup"><span data-stu-id="29079-759">The method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property can be an instance method or a `static` (`Shared` in Visual Basic) method.</span></span> <span data-ttu-id="29079-760">如果它是实例方法，则每次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性指定的方法时都会创建并销毁业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-760">If it is an instance method, the business object is created and destroyed each time the method specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property is called.</span></span> <span data-ttu-id="29079-761">在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性之前，您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件来处理业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-761">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> events to work with the business object before the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property is called.</span></span> <span data-ttu-id="29079-762">你还可以处理在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> 属性指定的方法之后引发的 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-762">You can also handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event that is raised after the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteMethod%2A> property is called.</span></span> <span data-ttu-id="29079-763">如果业务对象实现 <xref:System.IDisposable> 接口，则在销毁对象之前调用 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-763">If the business object implements the <xref:System.IDisposable> interface, the <xref:System.IDisposable.Dispose%2A> method is called before the object is destroyed.</span></span> <span data-ttu-id="29079-764">如果该方法是 `static` 的（`Shared` Visual Basic），则永远不会创建业务对象，也不能处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>、<xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-764">If the method is `static` (`Shared` in Visual Basic), the business object is never created and you cannot handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>, <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>, and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> events.</span></span>

## <a name="parameter-merging"></a><span data-ttu-id="29079-765">参数合并</span><span class="sxs-lookup"><span data-stu-id="29079-765">Parameter Merging</span></span>
 <span data-ttu-id="29079-766">从三个源将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合：</span><span class="sxs-lookup"><span data-stu-id="29079-766">Parameters are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection from three sources:</span></span>

-   <span data-ttu-id="29079-767">在运行时从数据绑定控件。</span><span class="sxs-lookup"><span data-stu-id="29079-767">From the data-bound control, at run time.</span></span>

-   <span data-ttu-id="29079-768">从 `InsertParameters` 元素中，以声明方式。</span><span class="sxs-lookup"><span data-stu-id="29079-768">From the `InsertParameters` element, declaratively.</span></span>

-   <span data-ttu-id="29079-769">从 `Inserting` 方法，以编程方式。</span><span class="sxs-lookup"><span data-stu-id="29079-769">From the `Inserting` method, programmatically.</span></span>

 <span data-ttu-id="29079-770">首先，将从数据绑定控件生成的所有参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-770">First, any parameters that are generated from data-bound controls are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection.</span></span> <span data-ttu-id="29079-771">例如，如果 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件绑定到 <xref:System.Web.UI.WebControls.GridView> 控件，该控件具有 `Name` 和 `Number`的列，则 `Name` 和 `Number` 的参数将添加到集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-771">For example, if the <xref:System.Web.UI.WebControls.ObjectDataSource> control is bound to a <xref:System.Web.UI.WebControls.GridView> control that has the columns `Name` and `Number`, the parameters for `Name` and `Number` are added to the collection.</span></span> <span data-ttu-id="29079-772">这些参数的数据类型为 `string`。</span><span class="sxs-lookup"><span data-stu-id="29079-772">The data type of these parameters is `string`.</span></span> <span data-ttu-id="29079-773">接下来，将添加 `InsertParameters` 元素中列出的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-773">Next, the parameters that are listed in the `InsertParameters` element are added.</span></span> <span data-ttu-id="29079-774">如果找到 `InsertParameters` 元素中与已在 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中的参数相同的参数，则会修改现有参数，使其与 `InsertParameters` 元素中指定的参数匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-774">If a parameter in the `InsertParameters` element is found with the same name as a parameter that is already in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection, the existing parameter is modified to match the parameter that is specified in the `InsertParameters` element.</span></span> <span data-ttu-id="29079-775">通常，这用于修改参数中数据的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-775">Typically, this is used to modify the type of the data in the parameter.</span></span> <span data-ttu-id="29079-776">最后，你可以以编程方式在 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件中添加和移除参数，这会在 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法运行之前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-776">Finally, you can programmatically add and remove parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event, which occurs before the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method is run.</span></span> <span data-ttu-id="29079-777">合并参数后，解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-777">The method is resolved after the parameters are merged.</span></span> <span data-ttu-id="29079-778">下一节将讨论方法解析。</span><span class="sxs-lookup"><span data-stu-id="29079-778">Method resolution is discussed in the next section.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-779">你应验证从客户端接收的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-779">You should validate any parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-780">运行时只需将参数值替换为 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性即可。</span><span class="sxs-lookup"><span data-stu-id="29079-780">The runtime simply substitutes the parameter value into the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property.</span></span>

## <a name="method-resolution"></a><span data-ttu-id="29079-781">方法解析</span><span class="sxs-lookup"><span data-stu-id="29079-781">Method Resolution</span></span>
 <span data-ttu-id="29079-782">调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法时，数据绑定控件中的数据字段、`InsertParameters` 元素中以声明方式创建的参数以及在 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件处理程序中添加的参数都将合并。</span><span class="sxs-lookup"><span data-stu-id="29079-782">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method is called, the data fields from the data-bound control, the parameters that were created declaratively in the `InsertParameters` element, and the parameters that were added in the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event handler are all merged.</span></span> <span data-ttu-id="29079-783">（有关详细信息，请参阅前面的部分。）然后，<xref:System.Web.UI.WebControls.ObjectDataSource> 对象将尝试查找要调用的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-783">(For more information, see the preceding section.) The <xref:System.Web.UI.WebControls.ObjectDataSource> object then attempts to find a method to call.</span></span> <span data-ttu-id="29079-784">首先，它会查找一个或多个具有在 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性中指定的名称的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-784">First, it looks for one or more methods with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property.</span></span> <span data-ttu-id="29079-785">如果未找到匹配项，则会引发 <xref:System.InvalidOperationException> 异常。</span><span class="sxs-lookup"><span data-stu-id="29079-785">If no match is found, an <xref:System.InvalidOperationException> exception is thrown.</span></span> <span data-ttu-id="29079-786">如果找到匹配项，则它将查找匹配的参数名称。</span><span class="sxs-lookup"><span data-stu-id="29079-786">If a match is found, it then looks for matching parameter names.</span></span> <span data-ttu-id="29079-787">例如，假设 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性指定的类型有两个名为 `InsertARecord`的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-787">For example, suppose a type that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property has two methods named `InsertARecord`.</span></span> <span data-ttu-id="29079-788">一个 `InsertARecord` 具有一个参数，`ID`，另一个 `InsertARecord` 具有两个参数，`Name` 和 `Number`。</span><span class="sxs-lookup"><span data-stu-id="29079-788">One `InsertARecord` has one parameter, `ID`, and the other `InsertARecord` has two parameters, `Name` and `Number`.</span></span> <span data-ttu-id="29079-789">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合只有一个名为 `ID`的参数，则将调用只包含 `ID` 参数的 `InsertARecord` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-789">If the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection has only one parameter named `ID`, the `InsertARecord` method with just the `ID` parameter is called.</span></span> <span data-ttu-id="29079-790">解析方法时未检查参数类型。</span><span class="sxs-lookup"><span data-stu-id="29079-790">The type of the parameter is not checked in resolving the methods.</span></span> <span data-ttu-id="29079-791">参数的顺序并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-791">The order of the parameters does not matter.</span></span>

 <span data-ttu-id="29079-792">如果设置了 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性，则会以不同的方式解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-792">If the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property is set, the method is resolved in a different way.</span></span> <span data-ttu-id="29079-793"><xref:System.Web.UI.WebControls.ObjectDataSource> 查找 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性中指定了名称的方法，该属性采用 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-793">The <xref:System.Web.UI.WebControls.ObjectDataSource> looks for a method with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property that takes one parameter of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-794">在这种情况下，参数名称并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-794">In this case, the name of the parameter does not matter.</span></span>



## Examples
 <span data-ttu-id="29079-795">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-795">This section contains two code examples.</span></span> <span data-ttu-id="29079-796">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.DetailsView> 控件结合使用以插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-796">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.DetailsView> control to insert data.</span></span> <span data-ttu-id="29079-797">第二个代码示例提供了在第一个代码示例中使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-797">The second code example provides an example of the middle-tier business object that is used in the first code example.</span></span>

 <span data-ttu-id="29079-798">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.DetailsView> 控件结合使用以插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-798">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.DetailsView> control to insert data.</span></span> <span data-ttu-id="29079-799">最初，<xref:System.Web.UI.WebControls.DetailsView> 显示新的 `NorthwindEmployee` 记录以及自动生成的 "**插入**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-799">Initially, the <xref:System.Web.UI.WebControls.DetailsView> displays a new `NorthwindEmployee` record, along with an automatically generated **Insert** button.</span></span> <span data-ttu-id="29079-800">在 <xref:System.Web.UI.WebControls.DetailsView> 控件的字段中输入数据后，单击 "**插入**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-800">After you enter data into the fields of the <xref:System.Web.UI.WebControls.DetailsView> control, click the **Insert** button.</span></span> <span data-ttu-id="29079-801"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识执行插入操作的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-801">The <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property identifies which method performs the insert operation.</span></span>

 <span data-ttu-id="29079-802">在此示例中，`UpdateEmployeeInfo` 方法用于执行插入;但是，它需要 `NorthwindEmployee` 参数才能插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-802">In this example, the `UpdateEmployeeInfo` method is used to perform an insert; however, it requires a `NorthwindEmployee` parameter to insert the data.</span></span> <span data-ttu-id="29079-803">出于此原因，<xref:System.Web.UI.WebControls.DetailsView> 控制自动传递的字符串集合是不够的。</span><span class="sxs-lookup"><span data-stu-id="29079-803">For this reason, the collection of strings that the <xref:System.Web.UI.WebControls.DetailsView> control passes automatically is not sufficient.</span></span> <span data-ttu-id="29079-804">`NorthwindEmployeeInserting` 委托是处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> 事件的 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler> 对象，它使你能够在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作之前操作输入参数。</span><span class="sxs-lookup"><span data-stu-id="29079-804">The `NorthwindEmployeeInserting` delegate is an <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler> object that handles the <xref:System.Web.UI.WebControls.ObjectDataSource.Inserting> event and enables you to manipulate the input parameters before the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation proceeds.</span></span> <span data-ttu-id="29079-805">由于 `UpdateEmployeeInfo` 方法需要将 `NorthwindEmployee` 对象作为参数，因此将使用字符串的集合创建一个参数，并使用该方法所需的参数名称（`ne`）将其添加到 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-805">Because the `UpdateEmployeeInfo` method requires a `NorthwindEmployee` object as a parameter, one is created using the collection of strings and is added to the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> collection using a parameter name (`ne`) that the method expects.</span></span> <span data-ttu-id="29079-806">使用现有的中间层对象作为数据源时，可以执行如下所述的步骤，这些类型和方法不是专门用于 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的类型和方法。</span><span class="sxs-lookup"><span data-stu-id="29079-806">You might perform steps like these when using an existing middle-tier object as a data source with types and methods that are not designed specifically for use with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-807">执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作时，将调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-807">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation is performed, the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property is called.</span></span> <span data-ttu-id="29079-808">如果对象的 `Insert` 方法具有包含参数的方法签名，则 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合必须包含名称与方法签名参数相匹配的参数，<xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法才能成功完成。</span><span class="sxs-lookup"><span data-stu-id="29079-808">If the `Insert` method of the object has a method signature that includes parameters, the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection must contain a parameter with names that match the method signature parameters for the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method to complete successfully.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_4#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/CS/objds4cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_4#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/VB/objds4vb.aspx#1)]

 <span data-ttu-id="29079-809">下面的代码示例提供了前面的代码示例使用的中间层业务对象的示例。</span><span class="sxs-lookup"><span data-stu-id="29079-809">The following code example provides an example of a middle-tier business object that the preceding code example uses.</span></span> <span data-ttu-id="29079-810">此代码示例包含两个基本类：</span><span class="sxs-lookup"><span data-stu-id="29079-810">The code example consists of two basic classes:</span></span>

-   <span data-ttu-id="29079-811">`EmployeeLogic` 类，该类是一个封装业务逻辑的无状态类。</span><span class="sxs-lookup"><span data-stu-id="29079-811">The `EmployeeLogic` class, which is a stateless class that encapsulates business logic.</span></span>

-   <span data-ttu-id="29079-812">`NorthwindEmployee` 类，该类是一个仅包含从数据层加载和保存数据所需的基本功能的模型类。</span><span class="sxs-lookup"><span data-stu-id="29079-812">The `NorthwindEmployee` class, which is a model class that contains only the basic functionality that is required to load and persist data from the data tier.</span></span>

 <span data-ttu-id="29079-813">提供额外的 `NorthwindDataException` 类是一种方便的方式。</span><span class="sxs-lookup"><span data-stu-id="29079-813">An additional `NorthwindDataException` class is provided as a convenience.</span></span> <span data-ttu-id="29079-814">若要获取完整的工作示例，必须编译并使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-814">For a complete working example, you must compile and use these classes.</span></span> <span data-ttu-id="29079-815">不完全实现 `UpdateEmployeeInfo` 方法，因此当您试验此示例时，不会将数据插入 Northwind 商贸数据库中。</span><span class="sxs-lookup"><span data-stu-id="29079-815">The `UpdateEmployeeInfo` method is not completely implemented, so you will not insert data into the Northwind Traders database when you experiment with this example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_4#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/CS/northwindemployee4.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_4#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_4/VB/northwindemployee4.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-816">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-816">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-817">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-817">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-818">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-818">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-819">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-819">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="InsertParameters">
      <MemberSignature Language="C#" Value="public System.Web.UI.WebControls.ParameterCollection InsertParameters { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Web.UI.WebControls.ParameterCollection InsertParameters" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.InsertParameters" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property InsertParameters As ParameterCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::WebControls::ParameterCollection ^ InsertParameters { System::Web::UI::WebControls::ParameterCollection ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.InsertParameters : System.Web.UI.WebControls.ParameterCollection" Usage="System.Web.UI.WebControls.ObjectDataSource.InsertParameters" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(null)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.MergableProperty(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.Web.UI.PersistenceMode(System.Web.UI.PersistenceMode.InnerProperty)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ParameterCollection</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-820">获取参数集合，该集合包含由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" /> 属性使用的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-820">Gets the parameters collection that contains the parameters that are used by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" /> property.</span></span></summary>
        <value><span data-ttu-id="29079-821">包含由 <see cref="T:System.Web.UI.WebControls.ParameterCollection" /> 属性标识的方法所使用的参数的 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" />。</span><span class="sxs-lookup"><span data-stu-id="29079-821">A <see cref="T:System.Web.UI.WebControls.ParameterCollection" /> that contains the parameters used by the method identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" /> property.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-822"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中包含的参数的名称和类型必须匹配 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性签名中的参数的名称和类型。</span><span class="sxs-lookup"><span data-stu-id="29079-822">The names and types of the parameters that are contained in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection must match the names and types of the parameters that are in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property signature.</span></span> <span data-ttu-id="29079-823">参数名称区分大小写。</span><span class="sxs-lookup"><span data-stu-id="29079-823">The parameter names are case sensitive.</span></span> <span data-ttu-id="29079-824">在使用提供参数的数据绑定控件（如 <xref:System.Web.UI.WebControls.GridView> 和 <xref:System.Web.UI.WebControls.DetailsView> 控件）时，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件会自动将集合中显式指定的所有参数与数据绑定控件提供的参数合并。</span><span class="sxs-lookup"><span data-stu-id="29079-824">When working with data-bound controls that supply parameters, such as the <xref:System.Web.UI.WebControls.GridView> and <xref:System.Web.UI.WebControls.DetailsView> controls, the <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically merges any parameters that are explicitly specified in the collection with the parameters that are provided by the data-bound control.</span></span> <span data-ttu-id="29079-825">这一点很重要，因为数据绑定控件始终将其参数作为 <xref:System.String> 类型提供，如果方法签名包含数字或日期类型，则必须在具有正确类型的 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中显式包含一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-825">This is important because data-bound controls always supply their parameters as <xref:System.String> types, and if the method signature includes numeric or date types, you must explicitly include a parameter in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection with the correct type.</span></span> <span data-ttu-id="29079-826">否则，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将根据集合中的参数定义的类型尝试强制转换参数。</span><span class="sxs-lookup"><span data-stu-id="29079-826">Otherwise, the <xref:System.Web.UI.WebControls.ObjectDataSource> control attempts to cast the parameters according to the type that is defined by the parameters in the collection.</span></span> <span data-ttu-id="29079-827">有关详细信息，请参阅[将参数用于 ObjectDataSource 控件](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4)。</span><span class="sxs-lookup"><span data-stu-id="29079-827">For more information, see [Using Parameters with the ObjectDataSource Control](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4).</span></span>

 <span data-ttu-id="29079-828"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 属性检索与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 包含的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.InsertParameters%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-828">The <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> property retrieves the <xref:System.Web.UI.WebControls.ObjectDataSourceView.InsertParameters%2A> property that is contained by the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-829">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-829">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A>.</span></span>



## Examples
 <span data-ttu-id="29079-830">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-830">This section contains two code examples.</span></span> <span data-ttu-id="29079-831">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.DetailsView> 控件结合使用以插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-831">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.DetailsView> control to insert data.</span></span> <span data-ttu-id="29079-832">第二个代码示例提供了在第一个代码示例中使用的 `Insert` 方法的示例实现。</span><span class="sxs-lookup"><span data-stu-id="29079-832">The second code example provides an example implementation of the `Insert` method that is used in the first code example.</span></span>

 <span data-ttu-id="29079-833">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.DetailsView> 控件结合使用以插入数据。</span><span class="sxs-lookup"><span data-stu-id="29079-833">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.DetailsView> control to insert data.</span></span> <span data-ttu-id="29079-834">最初，<xref:System.Web.UI.WebControls.DetailsView> 显示文本框，您可以在其中输入新 `NorthwindEmployee` 记录的数据以及自动生成的 "**插入**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-834">Initially, the <xref:System.Web.UI.WebControls.DetailsView> displays text boxes in which you can enter data for a new `NorthwindEmployee` record, along with an automatically generated **Insert** button.</span></span> <span data-ttu-id="29079-835">在 <xref:System.Web.UI.WebControls.DetailsView> 控件的字段中输入数据后，单击 "**插入**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-835">After you enter data into the fields of the <xref:System.Web.UI.WebControls.DetailsView> control, click the **Insert** button.</span></span> <span data-ttu-id="29079-836"><xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识执行插入操作的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-836">The <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property identifies which method performs the insert operation.</span></span>

 <span data-ttu-id="29079-837">单击 "**插入**" 按钮时，将使用 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性指定的方法和 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中指定的任何参数执行该操作。</span><span class="sxs-lookup"><span data-stu-id="29079-837">If you click the **Insert** button, the operation is performed using the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property and any parameters that are specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection.</span></span> <span data-ttu-id="29079-838">在此代码示例中，在与监察员 ID 相对应的 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合中指定一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-838">In this code example, one parameter is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection that corresponds to the supervisor's ID.</span></span> <span data-ttu-id="29079-839">这是因为，即使 ID 作为 <xref:System.Web.UI.WebControls.BoundField> 对象显示在 <xref:System.Web.UI.WebControls.DetailsView> 控件的 <xref:System.Web.UI.WebControls.GridView.Rows%2A> 集合中，它也将作为字符串传递到 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-839">This is because even though the ID is displayed in the <xref:System.Web.UI.WebControls.GridView.Rows%2A> collection for the <xref:System.Web.UI.WebControls.DetailsView> control as a <xref:System.Web.UI.WebControls.BoundField> object, it is passed as a string to the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-840">通过将其显式添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合，并将其 <xref:System.Web.UI.WebControls.Parameter.Type%2A> 属性设置为 <xref:System.TypeCode.Int32> 值，它将作为 <xref:System.Int32>（而不是字符串）通过 <xref:System.Web.UI.WebControls.ObjectDataSource> 将其正确传递给方法。</span><span class="sxs-lookup"><span data-stu-id="29079-840">By adding it explicitly to the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection with a <xref:System.Web.UI.WebControls.Parameter.Type%2A> property set to the <xref:System.TypeCode.Int32> value, it will be passed correctly by the <xref:System.Web.UI.WebControls.ObjectDataSource> to the method as an <xref:System.Int32>, not as a string.</span></span>

 <span data-ttu-id="29079-841">执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 操作时，将调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-841">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> operation is performed, the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property is called.</span></span> <span data-ttu-id="29079-842">如果对象的 <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法具有包含参数的方法签名，则 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> 集合必须包含名称与方法签名参数匹配的参数，<xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> 方法才能成功完成。</span><span class="sxs-lookup"><span data-stu-id="29079-842">If the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method of the object has a method signature that includes parameters, the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertParameters%2A> collection must contain parameters that have names that match the method signature parameters for the <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A> method to complete successfully.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-843">你应验证从客户端接收的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-843">You should validate any parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-844">运行时只需将参数值替换为 <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> 属性即可。</span><span class="sxs-lookup"><span data-stu-id="29079-844">The runtime simply substitutes the parameter value into the <xref:System.Web.UI.WebControls.ObjectDataSource.InsertMethod%2A> property.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_8#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_8/CS/objds8cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_8#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_8/VB/objds8vb.aspx#1)]

 <span data-ttu-id="29079-845">下面的代码示例提供了前面的代码示例使用的 `Insert` 方法的示例实现。</span><span class="sxs-lookup"><span data-stu-id="29079-845">The following code example provides an example implementation of the `Insert` method that the preceding code example uses.</span></span> <span data-ttu-id="29079-846">将 `InsertNewEmployeeWrapper` 方法添加到 <xref:System.Web.UI.WebControls.ObjectDataSource> 类概述中提供的 `EmployeeLogic` 中间层对象，使对象能够更轻松地在 Web 方案中与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件一起工作，而无需对实际的业务逻辑进行重大的重写。</span><span class="sxs-lookup"><span data-stu-id="29079-846">The `InsertNewEmployeeWrapper` method is added to the `EmployeeLogic` middle-tier object that is provided in the <xref:System.Web.UI.WebControls.ObjectDataSource> class overview to enable the object to work more easily with the <xref:System.Web.UI.WebControls.ObjectDataSource> control in Web scenarios, without a substantial rewrite to the actual business logic.</span></span>

 <span data-ttu-id="29079-847">若要运行该示例，必须在 <xref:System.Web.UI.WebControls.ObjectDataSource> 类概述中提供 `NorthwindEmployee` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-847">To run the example, you must have the `NorthwindEmployee` class that is provided in the <xref:System.Web.UI.WebControls.ObjectDataSource> class overview.</span></span> <span data-ttu-id="29079-848">此示例仅演示了如何使用参数将 <xref:System.Web.UI.WebControls.ObjectDataSource> 连接到用于获取新数据库记录的数据的业务对象方法。</span><span class="sxs-lookup"><span data-stu-id="29079-848">This example illustrates only how to connect the <xref:System.Web.UI.WebControls.ObjectDataSource> to a business object method that gets data for a new database record by using parameters.</span></span> <span data-ttu-id="29079-849">此示例不会将记录添加到数据库，因为 `NorthwindEmployee` 类的 `Save` 方法不包括用于更新数据库的代码。</span><span class="sxs-lookup"><span data-stu-id="29079-849">The example does not add records to the database, because the `Save` method of the `NorthwindEmployee` class does not include code to update the database.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_8#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_8/CS/northwindemployee8.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_8#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_8/VB/northwindemployee8.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.InsertMethod" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Insert" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-850">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-850">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-851">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-851">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-852">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-852">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="LoadViewState">
      <MemberSignature Language="C#" Value="protected override void LoadViewState (object savedState);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void LoadViewState(object savedState) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.LoadViewState(System.Object)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub LoadViewState (savedState As Object)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void LoadViewState(System::Object ^ savedState);" />
      <MemberSignature Language="F#" Value="override this.LoadViewState : obj -&gt; unit" Usage="objectDataSource.LoadViewState savedState" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="savedState" Type="System.Object" />
      </Parameters>
      <Docs>
        <param name="savedState"><span data-ttu-id="29079-853">包含控件的已保存视图状态值的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-853">An object that contains the saved view state values for the control.</span></span></param>
        <summary><span data-ttu-id="29079-854">加载以前保存的 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件的视图状态。</span><span class="sxs-lookup"><span data-stu-id="29079-854">Loads the previously saved view state of the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-855">此方法主要由 .NET Framework 基础结构使用，不应在代码中直接使用。</span><span class="sxs-lookup"><span data-stu-id="29079-855">This method is used primarily by the .NET Framework infrastructure and is not intended to be used directly from your code.</span></span> <span data-ttu-id="29079-856">不过，控件开发人员可以重写此方法，以指定自定义服务器控件如何还原其视图状态。</span><span class="sxs-lookup"><span data-stu-id="29079-856">However, control developers can override this method to specify how a custom server control restores its view state.</span></span> <span data-ttu-id="29079-857">有关详细信息，请参阅[ASP.NET 状态管理概述](https://docs.microsoft.com/previous-versions/aspnet/75x4ha6s(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="29079-857">For more information, see [ASP.NET State Management Overview](https://docs.microsoft.com/previous-versions/aspnet/75x4ha6s(v=vs.100)).</span></span>

 <span data-ttu-id="29079-858"><xref:System.Web.UI.WebControls.ObjectDataSource.LoadViewState%2A> 方法用于加载以前保存的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的视图状态。</span><span class="sxs-lookup"><span data-stu-id="29079-858">The <xref:System.Web.UI.WebControls.ObjectDataSource.LoadViewState%2A> method is used to load the previously saved view state of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 ]]></format>
        </remarks>
        <block subset="none" type="overrides"><para><span data-ttu-id="29079-859"><see cref="M:System.Web.UI.WebControls.ObjectDataSource.LoadViewState(System.Object)" /> 方法主要由控件开发人员在扩展 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件时使用。</span><span class="sxs-lookup"><span data-stu-id="29079-859">The <see cref="M:System.Web.UI.WebControls.ObjectDataSource.LoadViewState(System.Object)" /> method is used primarily by control developers when extending the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control.</span></span></para></block>
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-860">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-860">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-861">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-861">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-862">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-862">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="MaximumRowsParameterName">
      <MemberSignature Language="C#" Value="public string MaximumRowsParameterName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string MaximumRowsParameterName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName" />
      <MemberSignature Language="VB.NET" Value="Public Property MaximumRowsParameterName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ MaximumRowsParameterName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.MaximumRowsParameterName : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("maximumRows")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-863">获取或设置业务对象数据检索方法参数的名称，该参数用于指示要检索的数据源分页支持的记录数。</span><span class="sxs-lookup"><span data-stu-id="29079-863">Gets or sets the name of the business object data retrieval method parameter that is used to indicate the number of records to retrieve for data source paging support.</span></span></summary>
        <value><span data-ttu-id="29079-864">用于指示要检索的记录数的 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 参数名。</span><span class="sxs-lookup"><span data-stu-id="29079-864">The name of the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> parameter that is used to indicate the number of records to retrieve.</span></span> <span data-ttu-id="29079-865">默认值为<c>"maximumRows"</c>。</span><span class="sxs-lookup"><span data-stu-id="29079-865">The default is <c>"maximumRows"</c>.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-866"><xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性用于支持数据源分页。</span><span class="sxs-lookup"><span data-stu-id="29079-866">The <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> property is used to support data source paging.</span></span> <span data-ttu-id="29079-867">有关 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件如何支持分页的信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-867">For information about how paging is supported by the <xref:System.Web.UI.WebControls.ObjectDataSource> control, see <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>.</span></span>

 <span data-ttu-id="29079-868"><xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.MaximumRowsParameterName%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-868">The <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.MaximumRowsParameterName%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>



## Examples
 <span data-ttu-id="29079-869">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够选择页面中显示的记录数。</span><span class="sxs-lookup"><span data-stu-id="29079-869">The following three examples show a Web page, a code-behind page class, and a data-access class that enable the user to pick how many records are displayed in the page.</span></span>

 <span data-ttu-id="29079-870">网页包含 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性设置为 `true`的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-870">The Web page contains an <xref:System.Web.UI.WebControls.ObjectDataSource> control whose <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property is set to `true`.</span></span> <span data-ttu-id="29079-871"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性设置为方法的名称，该方法返回查询中的记录总数。</span><span class="sxs-lookup"><span data-stu-id="29079-871">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is set to the name of a method that returns the total number of records in the query.</span></span> <span data-ttu-id="29079-872"><xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性和 <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 属性设置为 Select 方法中使用的参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-872">The <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> property and the <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> property are set to the names of the parameters that are used in the Select method.</span></span> <span data-ttu-id="29079-873">此页还包含一个 <xref:System.Web.UI.WebControls.DropDownList> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-873">The page also contains a <xref:System.Web.UI.WebControls.DropDownList> control.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx#1)]

 <span data-ttu-id="29079-874">第二个示例显示 <xref:System.Web.UI.WebControls.DropDownList> 控件的 <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-874">The second example shows a handler for the <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> event of the <xref:System.Web.UI.WebControls.DropDownList> control.</span></span> <span data-ttu-id="29079-875">处理程序中的代码将 <xref:System.Web.UI.WebControls.GridView.PageSize%2A> 属性设置为用户的选择。</span><span class="sxs-lookup"><span data-stu-id="29079-875">The code in the handler sets the <xref:System.Web.UI.WebControls.GridView.PageSize%2A> property to the user's selection.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx.vb#2)]

 <span data-ttu-id="29079-876">第三个示例显示了从 Customers 表检索数据的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-876">The third example shows the data access class that retrieves data from the Customers table.</span></span> <span data-ttu-id="29079-877">它包括一个名为 `GetSubsetOfEmployees`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-877">It includes a method named `GetSubsetOfEmployees`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-878">该示例还包括一个名为 `GetEmployeeCount`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-878">The example also includes a method named `GetEmployeeCount`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-879">类使用 LINQ 查询 Customers 表。</span><span class="sxs-lookup"><span data-stu-id="29079-879">The class uses LINQ to query the Customers table.</span></span> <span data-ttu-id="29079-880">该示例需要一个表示 Northwind 数据库和 Customers 表的 LINQ to SQL 类。</span><span class="sxs-lookup"><span data-stu-id="29079-880">The example requires a LINQ to SQL class that represents the Northwind database and Customers table.</span></span> <span data-ttu-id="29079-881">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-881">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/App_Code/CustomerLogic.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/App_Code/CustomerLogic.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.EnablePaging" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSourceView.CanPage" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-882">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-882">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-883">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-883">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-884">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-884">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ObjectCreated">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler ObjectCreated;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler ObjectCreated" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event ObjectCreated As ObjectDataSourceObjectEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceObjectEventHandler ^ ObjectCreated;" />
      <MemberSignature Language="F#" Value="member this.ObjectCreated : System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler " Usage="member this.ObjectCreated : System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-885">在创建由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" /> 属性标识的对象之后发生。</span><span class="sxs-lookup"><span data-stu-id="29079-885">Occurs after the object that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" /> property is created.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-886">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 事件，以便调用业务对象上的其他方法、设置属性或执行特定于业务对象的其他初始化，<xref:System.Web.UI.WebControls.ObjectDataSource> 对象将调用业务对象数据方法来执行数据操作。</span><span class="sxs-lookup"><span data-stu-id="29079-886">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> event to call other methods on the business object, set properties, or perform other initialization that is specific to the business object before the <xref:System.Web.UI.WebControls.ObjectDataSource> object calls the business object data method to perform a data operation.</span></span> <span data-ttu-id="29079-887">对象的引用由 <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs.ObjectInstance%2A> 属性访问，该属性由 <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs> 对象公开。</span><span class="sxs-lookup"><span data-stu-id="29079-887">A reference to the object is accessed by the <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs.ObjectInstance%2A> property, which is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs> object.</span></span>

 <span data-ttu-id="29079-888">如果标识用于执行数据操作的方法是 `static` （`Shared` 在 Visual Basic 中），则永远不会引发 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-888">If the method that is identified to perform the data operation is `static` (`Shared` in Visual Basic), the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> events are never raised.</span></span>

 <span data-ttu-id="29079-889">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-889">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating" />
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-890">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-890">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-891">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-891">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-892">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-892">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ObjectCreating">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler ObjectCreating;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler ObjectCreating" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event ObjectCreating As ObjectDataSourceObjectEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceObjectEventHandler ^ ObjectCreating;" />
      <MemberSignature Language="F#" Value="member this.ObjectCreating : System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler " Usage="member this.ObjectCreating : System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceObjectEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-893">在创建由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" /> 属性标识的对象之前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-893">Occurs before the object that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" /> property is created.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-894">如果标识用于执行数据操作的方法是 `static` （`Shared` 在 Visual Basic 中），则永远不会引发 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-894">If the method that is identified to perform the data operation is `static` (`Shared` in Visual Basic), the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> events are never raised.</span></span>

 <span data-ttu-id="29079-895"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件将自动调用业务对象的无参数构造函数，以使用反射来创建它的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-895">The <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically calls the parameterless constructor of a business object to create an instance of it using reflection.</span></span> <span data-ttu-id="29079-896">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件以显式调用另一个构造函数，并将生成的对象实例设置为关联 <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs.ObjectInstance%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-896">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> event to explicitly call another constructor, and set the instance of the object that results to the <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs.ObjectInstance%2A> property of the associated <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs> object.</span></span>

 <span data-ttu-id="29079-897">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-897">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-898">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-898">This section contains two code examples.</span></span> <span data-ttu-id="29079-899">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来显示信息。</span><span class="sxs-lookup"><span data-stu-id="29079-899">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.GridView> control to display information.</span></span> <span data-ttu-id="29079-900">第二个代码示例提供了在第一个代码示例中使用的中间层业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-900">The second code example provides the middle-tier business object that is used in the first code example.</span></span>

 <span data-ttu-id="29079-901">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来显示信息。</span><span class="sxs-lookup"><span data-stu-id="29079-901">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.GridView> control to display information.</span></span> <span data-ttu-id="29079-902">对于您的网页执行的每个数据操作，都可以使用非常昂贵的业务对象（就时间或资源而言）。</span><span class="sxs-lookup"><span data-stu-id="29079-902">You might work with a business object that is very expensive to create (in terms of time or resources) for every data operation your Web page performs.</span></span> <span data-ttu-id="29079-903">处理昂贵对象的一种方法是创建一次实例，然后将其缓存起来进行后续操作，而不是为每个数据操作创建并销毁它。</span><span class="sxs-lookup"><span data-stu-id="29079-903">One way to work with an expensive object might be to create an instance of it once, and then cache it for subsequent operations instead of creating and destroying it for every data operation.</span></span>

> [!NOTE]
>  <span data-ttu-id="29079-904">在生产应用程序中，多个请求可能会同时使用同一个实例。</span><span class="sxs-lookup"><span data-stu-id="29079-904">In a production application, multiple requests might end up simultaneously using the same instance.</span></span> <span data-ttu-id="29079-905">因此，需要在线程安全的方式下实现该对象。</span><span class="sxs-lookup"><span data-stu-id="29079-905">Therefore, the object needs to be implemented in a thread-safe manner.</span></span>

 <span data-ttu-id="29079-906">此代码示例演示了此模式。</span><span class="sxs-lookup"><span data-stu-id="29079-906">This code example demonstrates this pattern.</span></span> <span data-ttu-id="29079-907">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件以首先检查某个对象的缓存，并且仅创建该对象的实例（如果尚未缓存）。</span><span class="sxs-lookup"><span data-stu-id="29079-907">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> event to check the cache for an object first, and only create an instance of the object, if one is not already cached.</span></span> <span data-ttu-id="29079-908">然后，处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件以便缓存业务对象以供将来使用，而不是将其销毁。</span><span class="sxs-lookup"><span data-stu-id="29079-908">Then, handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event to cache the business object for future use, instead of destroying it.</span></span> <span data-ttu-id="29079-909">在此代码示例中，将 <xref:System.Web.UI.WebControls.ObjectDataSourceDisposingEventArgs> 对象的 <xref:System.ComponentModel.CancelEventArgs.Cancel?displayProperty=nameWithType> 属性设置为 `true`，以指示 <xref:System.Web.UI.WebControls.ObjectDataSource> 不调用对象上的 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-909">In this code example, the <xref:System.ComponentModel.CancelEventArgs.Cancel?displayProperty=nameWithType> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceDisposingEventArgs> object is set to `true` to direct the <xref:System.Web.UI.WebControls.ObjectDataSource> to not call <xref:System.IDisposable.Dispose%2A> method on the object.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_16#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/CS/objds16cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_16#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/VB/objds16vb.aspx#1)]

 <span data-ttu-id="29079-910">下面的代码示例提供了前面的代码示例使用的中间层业务对象示例。</span><span class="sxs-lookup"><span data-stu-id="29079-910">The following code example provides the example middle-tier business object that the preceding code example uses.</span></span> <span data-ttu-id="29079-911">此代码示例由 `EmployeeLogic` 类定义的基本业务对象组成，该对象是一个封装业务逻辑的有状态类。</span><span class="sxs-lookup"><span data-stu-id="29079-911">The code example consists of a basic business object, defined by the `EmployeeLogic` class, which is a stateful class that encapsulates business logic.</span></span> <span data-ttu-id="29079-912">若要获取完整的工作示例，必须将此代码编译为库，并从 ASP.NET 页（.aspx 文件）使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-912">For a complete working example, you must compile this code as a library and use these classes from an ASP.NET page (.aspx file).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_16#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/CS/northwindemployee16.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_16#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/VB/northwindemployee16.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnObjectCreating(System.Web.UI.WebControls.ObjectDataSourceEventArgs)" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-913">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-913">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-914">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-914">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-915">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-915">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ObjectDisposing">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceDisposingEventHandler ObjectDisposing;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceDisposingEventHandler ObjectDisposing" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event ObjectDisposing As ObjectDataSourceDisposingEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceDisposingEventHandler ^ ObjectDisposing;" />
      <MemberSignature Language="F#" Value="member this.ObjectDisposing : System.Web.UI.WebControls.ObjectDataSourceDisposingEventHandler " Usage="member this.ObjectDisposing : System.Web.UI.WebControls.ObjectDataSourceDisposingEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceDisposingEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-916">在丢弃由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" /> 属性标识的对象之前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-916">Occurs before the object that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" /> property is discarded.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-917"><xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件始终在丢弃业务对象的实例之前引发。</span><span class="sxs-lookup"><span data-stu-id="29079-917">The <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event is always raised before the instance of the business object is discarded.</span></span> <span data-ttu-id="29079-918">如果业务对象实现 <xref:System.IDisposable> 接口，则在引发此事件后调用 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-918">If the business object implements the <xref:System.IDisposable> interface, the <xref:System.IDisposable.Dispose%2A> method is called after this event is raised.</span></span>

 <span data-ttu-id="29079-919">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件，以便调用对象上的其他方法、设置属性或在销毁对象之前执行特定于对象的清理。</span><span class="sxs-lookup"><span data-stu-id="29079-919">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event to call other methods on the object, set properties, or perform clean-up that is specific to the object before the object is destroyed.</span></span> <span data-ttu-id="29079-920">对象的引用由 <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs.ObjectInstance%2A> 属性访问，该属性由 <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs> 对象公开。</span><span class="sxs-lookup"><span data-stu-id="29079-920">A reference to the object is accessed by the <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs.ObjectInstance%2A> property, which is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSourceEventArgs> object.</span></span>

 <span data-ttu-id="29079-921">将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与 LINQ to SQL 类结合使用时，必须在 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件的处理程序中取消对数据上下文类的释放。</span><span class="sxs-lookup"><span data-stu-id="29079-921">When you use a <xref:System.Web.UI.WebControls.ObjectDataSource> control with a LINQ to SQL class, you must cancel the disposing of the data-context class in an handler for the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event.</span></span> <span data-ttu-id="29079-922">此步骤是必需的，因为 LINQ to SQL 支持延迟执行，而 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件尝试在选择操作之后释放数据上下文。</span><span class="sxs-lookup"><span data-stu-id="29079-922">This step is necessary because LINQ to SQL supports deferred execution, whereas the <xref:System.Web.UI.WebControls.ObjectDataSource> control tries to dispose the data context after the Select operation.</span></span>

 <span data-ttu-id="29079-923">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-923">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-924">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-924">This section contains two code examples.</span></span> <span data-ttu-id="29079-925">第一个代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来显示信息。</span><span class="sxs-lookup"><span data-stu-id="29079-925">The first code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> object with a business object and a <xref:System.Web.UI.WebControls.GridView> control to display information.</span></span> <span data-ttu-id="29079-926">第二个代码示例提供了在第一个代码示例中使用的中间层业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-926">The second code example provides the middle-tier business object that is used in the first code example.</span></span>

 <span data-ttu-id="29079-927">下面的代码示例演示如何将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与业务对象和 <xref:System.Web.UI.WebControls.GridView> 控件结合使用来显示信息。</span><span class="sxs-lookup"><span data-stu-id="29079-927">The following code example demonstrates how to use an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a business object and a <xref:System.Web.UI.WebControls.GridView> control to display information.</span></span> <span data-ttu-id="29079-928">对于您的网页执行的每个数据操作，都可以使用非常昂贵的业务对象（就时间或资源而言）。</span><span class="sxs-lookup"><span data-stu-id="29079-928">You might work with a business object that is very expensive to create (in terms of time or resources) for every data operation your Web page performs.</span></span> <span data-ttu-id="29079-929">处理昂贵对象的一种方法是创建一次实例，然后将其缓存起来进行后续操作，而不是为每个数据操作创建并销毁它。</span><span class="sxs-lookup"><span data-stu-id="29079-929">One way to work with an expensive object might be to create an instance of it once, and then cache it for subsequent operations instead of creating and destroying it for every data operation.</span></span> <span data-ttu-id="29079-930">此示例演示了此模式。</span><span class="sxs-lookup"><span data-stu-id="29079-930">This example demonstrates this pattern.</span></span> <span data-ttu-id="29079-931">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件以便首先检查某个对象的缓存，并仅创建该对象的实例（如果尚未缓存）。</span><span class="sxs-lookup"><span data-stu-id="29079-931">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> event to check the cache for an object first, and only create an instance of it, if one is not already cached.</span></span> <span data-ttu-id="29079-932">然后，处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件以便缓存业务对象以供将来使用，而不是将其销毁。</span><span class="sxs-lookup"><span data-stu-id="29079-932">Then, handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event to cache the business object for future use, instead of destroying it.</span></span> <span data-ttu-id="29079-933">在此代码示例中，将 <xref:System.Web.UI.WebControls.ObjectDataSourceDisposingEventArgs> 对象的 <xref:System.ComponentModel.CancelEventArgs.Cancel?displayProperty=nameWithType> 属性设置为 `true`，以指示 <xref:System.Web.UI.WebControls.ObjectDataSource> 不调用对象上的 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-933">In this code example, the <xref:System.ComponentModel.CancelEventArgs.Cancel?displayProperty=nameWithType> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceDisposingEventArgs> object is set to `true` to direct the <xref:System.Web.UI.WebControls.ObjectDataSource> to not call the <xref:System.IDisposable.Dispose%2A> method on the object.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_16#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/CS/objds16cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_16#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/VB/objds16vb.aspx#1)]

 <span data-ttu-id="29079-934">下面的代码示例提供了前面的代码示例使用的中间层业务对象示例。</span><span class="sxs-lookup"><span data-stu-id="29079-934">The following code example provides the example middle-tier business object that the preceding code example uses.</span></span> <span data-ttu-id="29079-935">此代码示例由 `EmployeeLogic` 类定义的基本业务对象组成，该对象是一个封装业务逻辑的有状态类。</span><span class="sxs-lookup"><span data-stu-id="29079-935">The code example consists of a basic business object, defined by the `EmployeeLogic` class, which is a stateful class that encapsulates business logic.</span></span> <span data-ttu-id="29079-936">若要获取完整的工作示例，必须将此代码编译为库，并从 ASP.NET 页（.aspx 文件）使用这些类。</span><span class="sxs-lookup"><span data-stu-id="29079-936">For a complete working example, you must compile this code as a library and use these classes from an ASP.NET page (.aspx file).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_16#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/CS/northwindemployee16.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_16#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_16/VB/northwindemployee16.vb#2)]

 <span data-ttu-id="29079-937">下面的示例演示了在将 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件与 LINQ to SQL 类结合使用时如何处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-937">The following example shows how to handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event when using an <xref:System.Web.UI.WebControls.ObjectDataSource> control with a LINQ to SQL class.</span></span>

```vb
Public Sub ExampleObjectDisposing(ByVal sender As Object, _
        ByVal e As ObjectDataSourceDisposingEventArgs)
    e.Cancel = True
End Sub
```

```csharp
public void ExampleObjectDisposing(object sender,
        ObjectDataSourceDisposingEventArgs e)
{
    e.Cancel = true;
}
```

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-938">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-938">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-939">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-939">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-940">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-940">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="OldValuesParameterFormatString">
      <MemberSignature Language="C#" Value="public string OldValuesParameterFormatString { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string OldValuesParameterFormatString" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString" />
      <MemberSignature Language="VB.NET" Value="Public Property OldValuesParameterFormatString As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ OldValuesParameterFormatString { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.OldValuesParameterFormatString : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("{0}")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-941">获取或设置一个格式字符串，该字符串应用于传递给 <see langword="Delete" /> 或 <see langword="Update" /> 方法的原始值的参数名称。</span><span class="sxs-lookup"><span data-stu-id="29079-941">Gets or sets a format string to apply to the names of the parameters for original values that are passed to the <see langword="Delete" /> or <see langword="Update" /> methods.</span></span></summary>
        <value><span data-ttu-id="29079-942">一个表示格式字符串的字符串，它应用于传递给 <paramref name="oldValues" /> 或 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> 方法的任何 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> 或键参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-942">A string that represents a format string applied to the names of any <paramref name="oldValues" /> or key parameters passed to the <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Delete" /> or <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> methods.</span></span> <span data-ttu-id="29079-943">默认值为<c>"{0}"</c>，这意味着参数名称为字段名称。</span><span class="sxs-lookup"><span data-stu-id="29079-943">The default is <c>"{0}"</c>, which means the parameter name is the field name.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-944"><xref:System.Web.UI.WebControls.ObjectDataSourceView.OldValuesParameterFormatString%2A> 属性的值仅应用于主键，如使用数据绑定控件的 `DataKeyNames` 属性标识的值，或者在 <xref:System.Web.UI.WebControls.ObjectDataSourceView.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.CompareAllValues> 值并且将原始值集传递给相应的数据方法时的删除和更新方案。</span><span class="sxs-lookup"><span data-stu-id="29079-944">The value of the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OldValuesParameterFormatString%2A> property is applied to primary keys only, such as those that are identified with the `DataKeyNames` property of a data-bound control, or in delete and update scenarios where the <xref:System.Web.UI.WebControls.ObjectDataSourceView.ConflictDetection%2A> property is set to the <xref:System.Web.UI.ConflictOptions.CompareAllValues> value, and the set of original values are passed to the corresponding data method.</span></span>

 <span data-ttu-id="29079-945">下面是两种可能更改 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OldValuesParameterFormatString%2A> 属性的常见方案：</span><span class="sxs-lookup"><span data-stu-id="29079-945">The following are two common scenarios where you might change the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OldValuesParameterFormatString%2A> property:</span></span>

-   <span data-ttu-id="29079-946">你可能需要更改属性以区分更新中的旧值和新值。</span><span class="sxs-lookup"><span data-stu-id="29079-946">You might want to change the property to differentiate between old and new values in updates.</span></span> <span data-ttu-id="29079-947"><xref:System.Web.UI.WebControls.ObjectDataSourceView.ConflictDetection%2A> 属性设置为 <xref:System.Web.UI.ConflictOptions.CompareAllValues> 值时，会将原始值和新值的参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-947">When the <xref:System.Web.UI.WebControls.ObjectDataSourceView.ConflictDetection%2A> property is set to the <xref:System.Web.UI.ConflictOptions.CompareAllValues> value, parameters for both the original and new values are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection.</span></span> <span data-ttu-id="29079-948">如果没有格式字符串，则将为每个数据字段创建两个具有相同名称的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-948">Without the formatting string, two parameters with the same name would be created for each data field.</span></span> <span data-ttu-id="29079-949">通过更改原始值参数的名称，可以将数据与原始数据源进行比较，以检测冲突并比较键值。</span><span class="sxs-lookup"><span data-stu-id="29079-949">By changing the name of the original value parameter, you can compare the data to the original data source to detect conflicts and compare key values.</span></span>

-   <span data-ttu-id="29079-950">某些可视化设计器为原始值和键实现了特定的命名方案。</span><span class="sxs-lookup"><span data-stu-id="29079-950">Some visual designers implement a particular naming scheme for original values and keys.</span></span>

 <span data-ttu-id="29079-951"><xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OldValuesParameterFormatString%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-951">The <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OldValuesParameterFormatString%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.ConflictDetection" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-952">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-952">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-953">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-953">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-954">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-954">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="OnInit">
      <MemberSignature Language="C#" Value="protected internal override void OnInit (EventArgs e);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void OnInit(class System.EventArgs e) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.OnInit(System.EventArgs)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub OnInit (e As EventArgs)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void OnInit(EventArgs ^ e);" />
      <MemberSignature Language="F#" Value="override this.OnInit : EventArgs -&gt; unit" Usage="objectDataSource.OnInit e" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="e" Type="System.EventArgs" />
      </Parameters>
      <Docs>
        <param name="e"><span data-ttu-id="29079-955">包含事件数据的 <see cref="T:System.EventArgs" />。</span><span class="sxs-lookup"><span data-stu-id="29079-955">An <see cref="T:System.EventArgs" /> that contains event data.</span></span></param>
        <summary><span data-ttu-id="29079-956">将 <see cref="E:System.Web.UI.Page.LoadComplete" /> 事件处理程序添加到包含 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件的页。</span><span class="sxs-lookup"><span data-stu-id="29079-956">Adds a <see cref="E:System.Web.UI.Page.LoadComplete" /> event handler to the page that contains the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-957">引发事件时，将通过委托调用事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-957">Raising an event invokes the event handler through a delegate.</span></span> <span data-ttu-id="29079-958">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-958">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>

 <span data-ttu-id="29079-959"><xref:System.Web.UI.WebControls.ObjectDataSource.OnInit%2A> 方法还允许派生类对事件进行处理而不必附加委托。</span><span class="sxs-lookup"><span data-stu-id="29079-959">The <xref:System.Web.UI.WebControls.ObjectDataSource.OnInit%2A> method also allows derived classes to handle the event without attaching a delegate.</span></span> <span data-ttu-id="29079-960">这是在派生类中处理事件的首选技术。</span><span class="sxs-lookup"><span data-stu-id="29079-960">This is the preferred technique for handling the event in a derived class.</span></span>

 ]]></format>
        </remarks>
        <block subset="none" type="overrides"><para><span data-ttu-id="29079-961">在派生类中重写 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.OnInit(System.EventArgs)" /> 方法时，请确保调用基类的 <see cref="M:System.Web.UI.Control.OnInit(System.EventArgs)" /> 方法，以便注册的委托接收事件。</span><span class="sxs-lookup"><span data-stu-id="29079-961">When overriding the <see cref="M:System.Web.UI.WebControls.ObjectDataSource.OnInit(System.EventArgs)" /> method in a derived class, be sure to call the <see cref="M:System.Web.UI.Control.OnInit(System.EventArgs)" /> method for the base class so that registered delegates receive the event.</span></span></para></block>
        <altmember cref="T:System.Web.UI.WebControls.ObjectDataSource" />
        <altmember cref="M:System.Web.UI.Control.OnInit(System.EventArgs)" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-962">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-962">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-963">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-963">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-964">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-964">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ParsingCulture">
      <MemberSignature Language="C#" Value="public System.Web.UI.WebControls.ParsingCulture ParsingCulture { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Web.UI.WebControls.ParsingCulture ParsingCulture" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.ParsingCulture" />
      <MemberSignature Language="VB.NET" Value="Public Property ParsingCulture As ParsingCulture" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::WebControls::ParsingCulture ParsingCulture { System::Web::UI::WebControls::ParsingCulture get(); void set(System::Web::UI::WebControls::ParsingCulture value); };" />
      <MemberSignature Language="F#" Value="member this.ParsingCulture : System.Web.UI.WebControls.ParsingCulture with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.ParsingCulture" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue(Mono.Cecil.CustomAttributeArgument)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ParsingCulture</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-965">当将字符串值转换为实际属性类型来构造由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName" /> 指示的对象类型时，获取或设置表示哪些区域性信息被用了的值。</span><span class="sxs-lookup"><span data-stu-id="29079-965">Gets a or sets a value that indicates what culture information is used when converting string values to actual property types in order to construct an object of the type indicated by <see cref="P:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName" />.</span></span></summary>
        <value><span data-ttu-id="29079-966">区域性信息。</span><span class="sxs-lookup"><span data-stu-id="29079-966">The culture information.</span></span> <span data-ttu-id="29079-967">默认值是 <see cref="F:System.Web.UI.WebControls.ParsingCulture.Invariant" />。</span><span class="sxs-lookup"><span data-stu-id="29079-967">The default value is <see cref="F:System.Web.UI.WebControls.ParsingCulture.Invariant" />.</span></span></value>
        <remarks>To be added.</remarks>
        <altmember cref="T:System.Globalization.CultureInfo" />
      </Docs>
    </Member>
    <Member MemberName="SaveViewState">
      <MemberSignature Language="C#" Value="protected override object SaveViewState ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance object SaveViewState() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.SaveViewState" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Function SaveViewState () As Object" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override System::Object ^ SaveViewState();" />
      <MemberSignature Language="F#" Value="override this.SaveViewState : unit -&gt; obj" Usage="objectDataSource.SaveViewState " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Object</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-968">保存 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件的状态。</span><span class="sxs-lookup"><span data-stu-id="29079-968">Saves the state of the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control.</span></span></summary>
        <returns><span data-ttu-id="29079-969">返回服务器控件的当前视图状态；如果没有与此控件关联的视图状态，则返回 <see langword="null" />。</span><span class="sxs-lookup"><span data-stu-id="29079-969">Returns the server control's current view state; otherwise, returns <see langword="null" />, if there is no view state associated with the control.</span></span></returns>
        <remarks>To be added.</remarks>
        <altmember cref="M:System.Web.UI.IStateManager.SaveViewState" />
        <altmember cref="T:System.Web.UI.WebControls.ObjectDataSource" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-970">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-970">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-971">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-971">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-972">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-972">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Select">
      <MemberSignature Language="C#" Value="public System.Collections.IEnumerable Select ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance class System.Collections.IEnumerable Select() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
      <MemberSignature Language="VB.NET" Value="Public Function Select () As IEnumerable" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::Collections::IEnumerable ^ Select();" />
      <MemberSignature Language="F#" Value="member this.Select : unit -&gt; System.Collections.IEnumerable" Usage="objectDataSource.Select " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Collections.IEnumerable</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-973">通过用 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 集合中的参数调用由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" /> 属性标识的方法，从基础数据存储中检索数据。</span><span class="sxs-lookup"><span data-stu-id="29079-973">Retrieves data from the underlying data storage by calling the method that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property with the parameters in the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" /> collection.</span></span></summary>
        <returns><span data-ttu-id="29079-974">一个数据行的 <see cref="T:System.Collections.IEnumerable" /> 列表。</span><span class="sxs-lookup"><span data-stu-id="29079-974">An <see cref="T:System.Collections.IEnumerable" /> list of data rows.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-975">指定的方法可能具有任何方法签名，但它必须从下表中列出的某个类型返回或派生，以便 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件成功调用它。</span><span class="sxs-lookup"><span data-stu-id="29079-975">The specified method might have any method signature, but it must return or be derived from one of the types listed in the following table for the <xref:System.Web.UI.WebControls.ObjectDataSource> control to call it successfully.</span></span>

|<span data-ttu-id="29079-976">返回类型</span><span class="sxs-lookup"><span data-stu-id="29079-976">Return type</span></span>|<span data-ttu-id="29079-977">操作</span><span class="sxs-lookup"><span data-stu-id="29079-977">Action</span></span>|
|-----------------|------------|
|<xref:System.Collections.IEnumerable>|<span data-ttu-id="29079-978"><xref:System.Collections.IEnumerable> 由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-978">The <xref:System.Collections.IEnumerable> is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Data.DataTable>|<span data-ttu-id="29079-979">使用 <xref:System.Data.DataTable> 创建 <xref:System.Data.DataView>，并由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-979">A <xref:System.Data.DataView> is created by using the <xref:System.Data.DataTable> and returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Data.DataView>|<span data-ttu-id="29079-980"><xref:System.Data.DataView> 由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-980">The <xref:System.Data.DataView> is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Data.DataSet>|<span data-ttu-id="29079-981">提取 <xref:System.Data.DataSet> 的第一个 <xref:System.Data.DataTable>，并通过 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法创建并返回 <xref:System.Data.DataView>。</span><span class="sxs-lookup"><span data-stu-id="29079-981">The first <xref:System.Data.DataTable> of the <xref:System.Data.DataSet> is extracted and a <xref:System.Data.DataView> is created and returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Object>|<span data-ttu-id="29079-982">对象包装在一个 <xref:System.Collections.IEnumerable> 集合中，并由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-982">The object is wrapped in a one-element <xref:System.Collections.IEnumerable> collection and returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|

 <span data-ttu-id="29079-983"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识的方法可以是实例方法，也可以是 `static` （`Shared` Visual Basic）方法。</span><span class="sxs-lookup"><span data-stu-id="29079-983">The method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property can be an instance method or a `static` (`Shared` in Visual Basic) method.</span></span> <span data-ttu-id="29079-984">如果它是实例方法，则每次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法时都会创建并销毁业务对象，只不过相同的实例用于调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法和由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性指定的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-984">If it is an instance method, the business object is created and destroyed each time the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property is called, except that the same instance is used to call the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property and the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property.</span></span> <span data-ttu-id="29079-985"><xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回 <xref:System.Collections.IEnumerable> 接口。</span><span class="sxs-lookup"><span data-stu-id="29079-985">The <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method returns an <xref:System.Collections.IEnumerable> interface.</span></span> <span data-ttu-id="29079-986">但是，若要启用缓存和筛选方案，返回值必须是 <xref:System.Data.DataSet> 的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-986">However, to enable caching and filtering scenarios, the return value must be a <xref:System.Data.DataSet> object.</span></span> <span data-ttu-id="29079-987">虽然 <xref:System.Data.DataSet> 类未实现 <xref:System.Collections.IEnumerable> 接口，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件会自动提取实现 <xref:System.Collections.IEnumerable>的默认 <xref:System.Data.DataView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-987">While the <xref:System.Data.DataSet> class does not implement the <xref:System.Collections.IEnumerable> interface, the <xref:System.Web.UI.WebControls.ObjectDataSource> control automatically extracts the default <xref:System.Data.DataView> control, which implements the <xref:System.Collections.IEnumerable>.</span></span>

 <span data-ttu-id="29079-988">在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 操作之前，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnSelecting%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-988">Before the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> operation is performed, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnSelecting%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event.</span></span> <span data-ttu-id="29079-989">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件以检查参数的值，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 操作之前执行任何预处理。</span><span class="sxs-lookup"><span data-stu-id="29079-989">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event to examine the values of the parameters and to perform any preprocessing before a <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> operation.</span></span> <span data-ttu-id="29079-990">若要执行数据检索操作，<xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象使用反射来创建由 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性标识的对象的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-990">To perform a data retrieval operation, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object uses reflection to create an instance of the object that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property.</span></span> <span data-ttu-id="29079-991">然后，它使用任意关联的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 属性调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-991">It then calls the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, using any associated <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> properties.</span></span> <span data-ttu-id="29079-992"><xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 操作完成后，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnSelected%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-992">After the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> operation completes, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnSelected%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> event.</span></span> <span data-ttu-id="29079-993">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 事件以检查任何返回值、输出参数和异常，并执行任何后续处理。</span><span class="sxs-lookup"><span data-stu-id="29079-993">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> event to examine any return values, output parameters, and exceptions, and to perform any post-processing.</span></span>

 <span data-ttu-id="29079-994">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性返回一个 <xref:System.Data.DataSet>、<xref:System.Data.DataTable>或 <xref:System.Data.DataView> 对象并启用了缓存，则 <xref:System.Web.UI.WebControls.ObjectDataSource> 操作期间，<xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 将从缓存中检索数据并将数据保存到缓存中。</span><span class="sxs-lookup"><span data-stu-id="29079-994">If the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property returns a <xref:System.Data.DataSet>, <xref:System.Data.DataTable>, or <xref:System.Data.DataView> object and caching is enabled, the <xref:System.Web.UI.WebControls.ObjectDataSource> retrieves data from and saves data to the cache during the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> operation.</span></span> <span data-ttu-id="29079-995">缓存是根据 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> 属性的组合指定的缓存行为来创建、丢弃或刷新的。</span><span class="sxs-lookup"><span data-stu-id="29079-995">The cache is created, discarded, or refreshed based on the caching behavior that is specified by the combination of the <xref:System.Web.UI.WebControls.ObjectDataSource.CacheDuration%2A> and <xref:System.Web.UI.WebControls.ObjectDataSource.CacheExpirationPolicy%2A> properties.</span></span>

 <span data-ttu-id="29079-996">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性返回 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 对象，但指定了 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> 属性，则使用任何提供的 <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> 属性进行计算，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 操作期间将生成的筛选器应用于数据列表。</span><span class="sxs-lookup"><span data-stu-id="29079-996">If the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property returns a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> object, and a <xref:System.Web.UI.WebControls.ObjectDataSource.FilterExpression%2A> property has been specified, it is evaluated with any supplied <xref:System.Web.UI.WebControls.ObjectDataSource.FilterParameters%2A> properties and the resulting filter is applied to the list of data during the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> operation.</span></span>

 <span data-ttu-id="29079-997"><xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.Select%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-997">The <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.Select%2A> method of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-998">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-998">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A>.</span></span>

## <a name="data-bound-controls"></a><span data-ttu-id="29079-999">数据绑定控件</span><span class="sxs-lookup"><span data-stu-id="29079-999">Data-Bound Controls</span></span>
 <span data-ttu-id="29079-1000"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件与数据绑定控件（如 <xref:System.Web.UI.WebControls.GridView> 控件）关联时，无需从页代码中调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1000">When the <xref:System.Web.UI.WebControls.ObjectDataSource> control is associated with a data-bound control, such as the <xref:System.Web.UI.WebControls.GridView> control, it is not necessary to call the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method from page code.</span></span> <span data-ttu-id="29079-1001">改为直接通过数据绑定控件调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1001">The <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is invoked directly by the data-bound control instead.</span></span>



## Examples
 <span data-ttu-id="29079-1002">有关代码示例，请参阅<xref:System.Web.UI.WebControls.ObjectDataSource>。</span><span class="sxs-lookup"><span data-stu-id="29079-1002">For a code example, see <xref:System.Web.UI.WebControls.ObjectDataSource>.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1003">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1003">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1004">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1004">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1005">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1005">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SelectCountMethod">
      <MemberSignature Language="C#" Value="public string SelectCountMethod { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string SelectCountMethod" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod" />
      <MemberSignature Language="VB.NET" Value="Public Property SelectCountMethod As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ SelectCountMethod { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.SelectCountMethod : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1006">获取或设置 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件调用以检索行数的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1006">Gets or sets the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control invokes to retrieve a row count.</span></span></summary>
        <value><span data-ttu-id="29079-1007">表示 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 用于检索行数的方法或函数的名称的字符串。</span><span class="sxs-lookup"><span data-stu-id="29079-1007">A string that represents the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> uses to retrieve a row count.</span></span> <span data-ttu-id="29079-1008">此方法必须返回一个整数 (<see cref="T:System.Int32" />)。</span><span class="sxs-lookup"><span data-stu-id="29079-1008">The method must return an integer (<see cref="T:System.Int32" />).</span></span> <span data-ttu-id="29079-1009">默认值为空字符串("")。</span><span class="sxs-lookup"><span data-stu-id="29079-1009">The default is an empty string ("").</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1010"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性标识用于检索总行数的业务对象方法，以支持数据源分页。</span><span class="sxs-lookup"><span data-stu-id="29079-1010">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property identifies a business object method that is used to retrieve a total row count, to support data source paging.</span></span> <span data-ttu-id="29079-1011">仅当 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性设置为 `true`时，才计算 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1011">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is evaluated only if the <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property is set to `true`.</span></span>

 <span data-ttu-id="29079-1012"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.SelectCountMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1012">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.SelectCountMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1013">有关 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件如何支持分页的信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-1013">For information about how paging is supported by the <xref:System.Web.UI.WebControls.ObjectDataSource> control, see <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>.</span></span>



## Examples
 <span data-ttu-id="29079-1014">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够选择页面中显示的记录数。</span><span class="sxs-lookup"><span data-stu-id="29079-1014">The following three examples show a Web page, a code-behind page class, and a data-access class that enable the user to pick how many records are displayed in the page.</span></span>

 <span data-ttu-id="29079-1015">网页包含 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性设置为 `true`的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1015">The Web page contains an <xref:System.Web.UI.WebControls.ObjectDataSource> control whose <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property is set to `true`.</span></span> <span data-ttu-id="29079-1016"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性设置为方法的名称，该方法返回查询中的记录总数。</span><span class="sxs-lookup"><span data-stu-id="29079-1016">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is set to the name of a method that returns the total number of records in the query.</span></span> <span data-ttu-id="29079-1017"><xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性和 <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 属性设置为 Select 方法中使用的参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1017">The <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> property and the <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> property are set to the names of the parameters that are used in the Select method.</span></span> <span data-ttu-id="29079-1018">此页还包含一个 <xref:System.Web.UI.WebControls.DropDownList> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1018">The page also contains a <xref:System.Web.UI.WebControls.DropDownList> control.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx#1)]

 <span data-ttu-id="29079-1019">第二个示例显示 <xref:System.Web.UI.WebControls.DropDownList> 控件的 <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-1019">The second example shows a handler for the <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> event of the <xref:System.Web.UI.WebControls.DropDownList> control.</span></span> <span data-ttu-id="29079-1020">处理程序中的代码将 <xref:System.Web.UI.WebControls.GridView.PageSize%2A> 属性设置为用户的选择。</span><span class="sxs-lookup"><span data-stu-id="29079-1020">The code in the handler sets the <xref:System.Web.UI.WebControls.GridView.PageSize%2A> property to the user's selection.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx.vb#2)]

 <span data-ttu-id="29079-1021">第三个示例显示了从 Customers 表检索数据的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-1021">The third example shows the data access class that retrieves data from the Customers table.</span></span> <span data-ttu-id="29079-1022">它包括一个名为 `GetSubsetOfEmployees`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1022">It includes a method named `GetSubsetOfEmployees`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1023">该示例还包括一个名为 `GetEmployeeCount`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1023">The example also includes a method named `GetEmployeeCount`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1024">类使用 LINQ 查询 Customers 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1024">The class uses LINQ to query the Customers table.</span></span> <span data-ttu-id="29079-1025">该示例需要一个表示 Northwind 数据库和 Customers 表的 LINQ to SQL 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1025">The example requires a LINQ to SQL class that represents the Northwind database and Customers table.</span></span> <span data-ttu-id="29079-1026">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-1026">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/App_Code/CustomerLogic.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/App_Code/CustomerLogic.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.EnablePaging" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSourceView.CanRetrieveTotalRowCount" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1027">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1027">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1028">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1028">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1029">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1029">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Selected">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Selected;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Selected" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Selected" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Selected As ObjectDataSourceStatusEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceStatusEventHandler ^ Selected;" />
      <MemberSignature Language="F#" Value="member this.Selected : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " Usage="member this.Selected : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1030"><see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> 操作完成时发生。</span><span class="sxs-lookup"><span data-stu-id="29079-1030">Occurs when a <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> operation has completed.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1031">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 事件以检查返回值或输出参数的值，或确定 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 操作完成后是否引发了异常。</span><span class="sxs-lookup"><span data-stu-id="29079-1031">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> event to examine the values of a return value or output parameters, or to determine whether an exception was thrown after a <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> operation has completed.</span></span> <span data-ttu-id="29079-1032">可从与事件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> 对象中获取返回值、输出参数和异常处理属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1032">The return value, output parameters, and exception handling properties are available from the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> object that is associated with the event.</span></span>

 <span data-ttu-id="29079-1033">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-1033">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-1034">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够在 Northwind 数据库中检索和更新 Employees 表中的记录。</span><span class="sxs-lookup"><span data-stu-id="29079-1034">The following three examples show a Web page, a code-behind page class, and a data-access class that enable a user to retrieve and update records in the Employees table in the Northwind database.</span></span>

 <span data-ttu-id="29079-1035">第一个示例显示一个网页，其中包含两个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件、一个 <xref:System.Web.UI.WebControls.DropDownList> 控件和一个 <xref:System.Web.UI.WebControls.DetailsView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1035">The first example shows a Web page that contains two <xref:System.Web.UI.WebControls.ObjectDataSource> controls, a <xref:System.Web.UI.WebControls.DropDownList> control, and a <xref:System.Web.UI.WebControls.DetailsView> control.</span></span> <span data-ttu-id="29079-1036">第一个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DropDownList> 控件用于从数据库检索和显示雇员姓名。</span><span class="sxs-lookup"><span data-stu-id="29079-1036">The first <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DropDownList> control are used to retrieve and display employee names from the database.</span></span> <span data-ttu-id="29079-1037">第二个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DetailsView> 控件用于从用户选择的员工记录中检索、显示和修改数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1037">The second <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DetailsView> control are used to retrieve, display, and modify the data from the employee record that is selected by the user.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_18#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_18#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default.aspx#1)]

 <span data-ttu-id="29079-1038">第二个示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-1038">The second example shows handlers for the <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> and <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> events.</span></span> <span data-ttu-id="29079-1039"><xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 事件处理程序将序列化包含从 Employee 表中检索到的数据的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1039">The <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> event handler serializes the object that contains data that was retrieved from the Employee table.</span></span> <span data-ttu-id="29079-1040">序列化的对象存储在视图状态中。</span><span class="sxs-lookup"><span data-stu-id="29079-1040">The serialized object is stored in view state.</span></span> <span data-ttu-id="29079-1041"><xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件处理程序在视图状态中对对象进行反序列化，该对象包含要更新的数据记录的原始数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1041">The <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event handler deserializes the object in view state that contains the original data for the data record that is being updated.</span></span> <span data-ttu-id="29079-1042">包含原始数据的对象将作为参数传递给 Update 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1042">The object that contains the original data is passed as a parameter to the Update method.</span></span> <span data-ttu-id="29079-1043">必须将原始数据传递到数据库，以便可以使用它来检查数据是否已被其他进程修改。</span><span class="sxs-lookup"><span data-stu-id="29079-1043">The original data must be passed to the database so that it can be used to check whether the data has been modified by another process.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default.aspx.vb#2)]

 <span data-ttu-id="29079-1044">第三个示例显示与 Northwind 数据库交互的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-1044">The third example shows the data access class that interacts with the Northwind database.</span></span> <span data-ttu-id="29079-1045">类使用 LINQ 来查询和更新 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1045">The class uses LINQ to query and update the Employees table.</span></span> <span data-ttu-id="29079-1046">该示例需要一个 LINQ to SQL 类，该类表示 Northwind 数据库和 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1046">The example requires a LINQ to SQL class that represents the Northwind database and Employees table.</span></span> <span data-ttu-id="29079-1047">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-1047">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/App_Code/EmployeeLogic.cs#5)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/App_Code/EmployeeLogic.vb#5)]

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Selecting" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnSelected(System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1048">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1048">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1049">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1049">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1050">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1050">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Selecting">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceSelectingEventHandler Selecting;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceSelectingEventHandler Selecting" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Selecting" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Selecting As ObjectDataSourceSelectingEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceSelectingEventHandler ^ Selecting;" />
      <MemberSignature Language="F#" Value="member this.Selecting : System.Web.UI.WebControls.ObjectDataSourceSelectingEventHandler " Usage="member this.Selecting : System.Web.UI.WebControls.ObjectDataSourceSelectingEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceSelectingEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1051">在 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> 操作前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-1051">Occurs before a <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" /> operation.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1052">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件以执行特定于您的应用程序的附加初始化，验证参数的值，或在 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件执行数据检索操作之前更改参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1052">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event to perform additional initialization that is specific to your application, to validate the values of parameters, or to change the parameter values before the <xref:System.Web.UI.WebControls.ObjectDataSource> control performs the data retrieval operation.</span></span> <span data-ttu-id="29079-1053">参数可用作由 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> 对象公开的 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 属性访问的 <xref:System.Collections.IDictionary> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-1053">The parameters are available as an <xref:System.Collections.IDictionary> collection that is accessed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> property, which is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> object.</span></span>

 <span data-ttu-id="29079-1054">如果设置了 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性，则对 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法的单个调用会引发此事件两次。</span><span class="sxs-lookup"><span data-stu-id="29079-1054">This event can be fired twice for a single call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method, if the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is set.</span></span> <span data-ttu-id="29079-1055"><xref:System.Web.UI.WebControls.ObjectDataSourceSelectingEventArgs> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceSelectingEventArgs.ExecutingSelectCount%2A> 属性用于确定是否调用了 select 来检索数据或检索计数。</span><span class="sxs-lookup"><span data-stu-id="29079-1055">The <xref:System.Web.UI.WebControls.ObjectDataSourceSelectingEventArgs.ExecutingSelectCount%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceSelectingEventArgs> object is used to determine if select was called to retrieve data or retrieve the count.</span></span>

 <span data-ttu-id="29079-1056">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-1056">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Selected" />
        <altmember cref="M:System.Web.UI.WebControls.SqlDataSourceView.OnSelecting(System.Web.UI.WebControls.SqlDataSourceSelectingEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1057">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1057">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1058">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1058">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1059">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1059">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SelectMethod">
      <MemberSignature Language="C#" Value="public string SelectMethod { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string SelectMethod" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" />
      <MemberSignature Language="VB.NET" Value="Public Property SelectMethod As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ SelectMethod { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.SelectMethod : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.SelectMethod" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1060">获取或设置 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件调用以检索数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1060">Gets or sets the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control invokes to retrieve data.</span></span></summary>
        <value><span data-ttu-id="29079-1061">一个字符串，表示 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 用于检索数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1061">A string that represents the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> uses to retrieve data.</span></span> <span data-ttu-id="29079-1062">默认值为空字符串("")。</span><span class="sxs-lookup"><span data-stu-id="29079-1062">The default is an empty string ("").</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1063">指定的方法可以具有任何方法签名，但它必须返回下表中显示的类型之一，以便 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件成功调用它。</span><span class="sxs-lookup"><span data-stu-id="29079-1063">The specified method can have any method signature, but it must return one of the types shown in the following table for the <xref:System.Web.UI.WebControls.ObjectDataSource> control to call it successfully.</span></span>

|<span data-ttu-id="29079-1064">返回类型</span><span class="sxs-lookup"><span data-stu-id="29079-1064">Return type</span></span>|<span data-ttu-id="29079-1065">操作</span><span class="sxs-lookup"><span data-stu-id="29079-1065">Action</span></span>|
|-----------------|------------|
|<xref:System.Collections.IEnumerable>|<span data-ttu-id="29079-1066"><xref:System.Collections.IEnumerable> 由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-1066">The <xref:System.Collections.IEnumerable> is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Data.DataTable>|<span data-ttu-id="29079-1067">使用 <xref:System.Data.DataTable> 创建 <xref:System.Data.DataView>，并由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-1067">A <xref:System.Data.DataView> is created using the <xref:System.Data.DataTable> and returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Data.DataView>|<span data-ttu-id="29079-1068"><xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回 <xref:System.Data.DataView>。</span><span class="sxs-lookup"><span data-stu-id="29079-1068">A <xref:System.Data.DataView> is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Data.DataSet>|<span data-ttu-id="29079-1069">提取 <xref:System.Data.DataSet> 的第一个 <xref:System.Data.DataTable>，并通过 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法创建并返回 <xref:System.Data.DataView>。</span><span class="sxs-lookup"><span data-stu-id="29079-1069">The first <xref:System.Data.DataTable> of the <xref:System.Data.DataSet> is extracted, and a <xref:System.Data.DataView> is created and returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|
|<xref:System.Object>|<span data-ttu-id="29079-1070">对象包装在一个 <xref:System.Collections.IEnumerable> 集合中，并由 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法返回。</span><span class="sxs-lookup"><span data-stu-id="29079-1070">The object is wrapped in a one-element <xref:System.Collections.IEnumerable> collection and returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method.</span></span>|

 <span data-ttu-id="29079-1071"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.SelectMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1071">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.SelectMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-1072">使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 类删除或更新数据时，请确保在 <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> 集合或 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合中为 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件配置的参数名称与 select 方法返回的列名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-1072">When you use the <xref:System.Web.UI.WebControls.ObjectDataSource> class to delete or update data, make sure that the parameter names configured for the <xref:System.Web.UI.WebControls.ObjectDataSource> control in the <xref:System.Web.UI.WebControls.ObjectDataSource.DeleteParameters%2A> collection or <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection match the column names that are returned by the select method.</span></span>

## <a name="object-lifetime"></a><span data-ttu-id="29079-1073">对象生存期</span><span class="sxs-lookup"><span data-stu-id="29079-1073">Object Lifetime</span></span>
 <span data-ttu-id="29079-1074"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性标识的方法可以是实例方法，也可以是 `static` （`Shared` Visual Basic）方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1074">The method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property can be an instance method or a `static` (`Shared` in Visual Basic) method.</span></span> <span data-ttu-id="29079-1075">如果它是实例方法，则每次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法时都会创建并销毁业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1075">If it is an instance method, the business object is created and destroyed each time the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property is called.</span></span> <span data-ttu-id="29079-1076">在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法之前，您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件来处理业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1076">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> events to work with the business object before the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property is called.</span></span> <span data-ttu-id="29079-1077">你还可以处理在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法之后引发的 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-1077">You can also handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event that is raised after the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property is called.</span></span> <span data-ttu-id="29079-1078">如果业务对象实现 <xref:System.IDisposable> 接口，则在销毁对象之前调用 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1078">If the business object implements the <xref:System.IDisposable> interface, the <xref:System.IDisposable.Dispose%2A> method is called before the object is destroyed.</span></span> <span data-ttu-id="29079-1079">如果该方法是 `static` 的（`Shared` Visual Basic），则永远不会创建业务对象，也不能处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>、<xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-1079">If the method is `static` (`Shared` in Visual Basic), the business object is never created and you cannot handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>, <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>, and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> events.</span></span>

## <a name="parameter-merging"></a><span data-ttu-id="29079-1080">参数合并</span><span class="sxs-lookup"><span data-stu-id="29079-1080">Parameter Merging</span></span>
 <span data-ttu-id="29079-1081">从这些源中将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合：</span><span class="sxs-lookup"><span data-stu-id="29079-1081">Parameters are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection from these sources:</span></span>

-   <span data-ttu-id="29079-1082">以声明方式从 `SelectParameters` 元素。</span><span class="sxs-lookup"><span data-stu-id="29079-1082">Declaratively from the `SelectParameters` element.</span></span>

-   <span data-ttu-id="29079-1083">以编程方式从 `Selecting` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1083">Programmatically from the `Selecting` method.</span></span>

 <span data-ttu-id="29079-1084">首先，添加 `SelectParameters` 元素中列出的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1084">First, the parameters listed in the `SelectParameters` element are added.</span></span> <span data-ttu-id="29079-1085">其次，参数以编程方式在 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件中添加和移除，该事件在 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法运行之前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-1085">Second, parameters are programmatically added and removed in the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event, which occurs before the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is run.</span></span> <span data-ttu-id="29079-1086">合并参数后，解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1086">The method is resolved after the parameters are merged.</span></span> <span data-ttu-id="29079-1087">下一节将讨论方法解析。</span><span class="sxs-lookup"><span data-stu-id="29079-1087">Method resolution is discussed in the next section.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1088">你应验证从客户端接收的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1088">You should validate any parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-1089">运行时只需将参数值替换为 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性即可。</span><span class="sxs-lookup"><span data-stu-id="29079-1089">The runtime simply substitutes the parameter value into the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span>

## <a name="method-resolution"></a><span data-ttu-id="29079-1090">方法解析</span><span class="sxs-lookup"><span data-stu-id="29079-1090">Method Resolution</span></span>
 <span data-ttu-id="29079-1091">调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时，数据绑定控件中的数据字段、`SelectParameters` 元素中以声明方式创建的参数以及在 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件处理程序中添加的参数都将合并。</span><span class="sxs-lookup"><span data-stu-id="29079-1091">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is called, the data fields from the data-bound control, the parameters that were created declaratively in the `SelectParameters` element, and the parameters that were added in the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event handler are all merged.</span></span> <span data-ttu-id="29079-1092">（有关详细信息，请参阅前面的部分。）然后，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将尝试查找要调用的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1092">(For more information, see the preceding section.) The <xref:System.Web.UI.WebControls.ObjectDataSource> control then attempts to find a method to call.</span></span> <span data-ttu-id="29079-1093">首先，它会查找一个或多个具有在 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性中指定的名称的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1093">First, it looks for one or more methods with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-1094">如果未找到匹配项，则会引发 <xref:System.InvalidOperationException> 异常。</span><span class="sxs-lookup"><span data-stu-id="29079-1094">If no match is found, an <xref:System.InvalidOperationException> exception is thrown.</span></span> <span data-ttu-id="29079-1095">如果找到匹配项，则它将查找匹配的参数名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1095">If a match is found, it then looks for matching parameter names.</span></span> <span data-ttu-id="29079-1096">例如，假设 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性指定的类型有两个名为 `SelectARecord`的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1096">For example, suppose a type that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property has two methods named `SelectARecord`.</span></span> <span data-ttu-id="29079-1097">一个 `SelectARecord` 具有一个参数，`ID`，另一个 `SelectARecord` 具有两个参数，`Name` 和 `Number`。</span><span class="sxs-lookup"><span data-stu-id="29079-1097">One `SelectARecord` has one parameter, `ID`, and the other `SelectARecord` has two parameters, `Name` and `Number`.</span></span> <span data-ttu-id="29079-1098">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合只有一个名为 `ID`的参数，则将调用只包含 `ID` 参数的 `SelectARecord` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1098">If the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection has only one parameter named `ID`, the `SelectARecord` method with just the `ID` parameter is called.</span></span> <span data-ttu-id="29079-1099">解析方法时未检查参数类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1099">The type of the parameter is not checked in resolving the methods.</span></span> <span data-ttu-id="29079-1100">参数的顺序并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-1100">The order of the parameters does not matter.</span></span>

 <span data-ttu-id="29079-1101">如果设置了 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性，则会以不同的方式解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1101">If the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property is set, the method is resolved in a different way.</span></span> <span data-ttu-id="29079-1102"><xref:System.Web.UI.WebControls.ObjectDataSource> 查找 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性中指定了名称的方法，该属性采用 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1102">The <xref:System.Web.UI.WebControls.ObjectDataSource> looks for a method with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property that takes one parameter of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-1103">在这种情况下，参数名称并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-1103">In this case, the name of the parameter does not matter.</span></span>



## Examples
 <span data-ttu-id="29079-1104">下面的代码示例演示 <xref:System.Web.UI.WebControls.GridView> 控件如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件在 Web 窗体页上显示数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1104">The following code example demonstrates how a <xref:System.Web.UI.WebControls.GridView> control can display data using an <xref:System.Web.UI.WebControls.ObjectDataSource> control on a Web Forms page.</span></span> <span data-ttu-id="29079-1105"><xref:System.Web.UI.WebControls.ObjectDataSource> 标识部分或完全限定类名及其 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性，并使用调用的方法来检索带有 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1105">The <xref:System.Web.UI.WebControls.ObjectDataSource> identifies a partially or fully qualified class name with its <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property and a method that is called to retrieve data with its <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-1106">在运行时，将创建对象并使用反射调用方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1106">At run time, the object is created and the method is called using reflection.</span></span> <span data-ttu-id="29079-1107"><xref:System.Web.UI.WebControls.GridView> 控件枚举由 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法返回的 <xref:System.Collections.IEnumerable> 集合，并显示数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1107">The <xref:System.Web.UI.WebControls.GridView> control enumerates through the <xref:System.Collections.IEnumerable> collection that is returned by the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, and displays the data.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/CS/objds1cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/VB/objds1vb.aspx#1)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1108">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1108">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1109">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1109">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1110">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1110">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-1111">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-1111">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SelectParameters">
      <MemberSignature Language="C#" Value="public System.Web.UI.WebControls.ParameterCollection SelectParameters { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Web.UI.WebControls.ParameterCollection SelectParameters" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property SelectParameters As ParameterCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::WebControls::ParameterCollection ^ SelectParameters { System::Web::UI::WebControls::ParameterCollection ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.SelectParameters : System.Web.UI.WebControls.ParameterCollection" Usage="System.Web.UI.WebControls.ObjectDataSource.SelectParameters" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(null)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.MergableProperty(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.Web.UI.PersistenceMode(System.Web.UI.PersistenceMode.InnerProperty)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ParameterCollection</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1112">获取参数的集合，这些参数由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性指定的方法使用。</span><span class="sxs-lookup"><span data-stu-id="29079-1112">Gets a collection of parameters that are used by the method specified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property.</span></span></summary>
        <value><span data-ttu-id="29079-1113">参数的集合，这些参数由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 属性指定的方法使用。</span><span class="sxs-lookup"><span data-stu-id="29079-1113">A collection of parameters that are used by the method specified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> property.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1114"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 属性可获取与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.SelectParameters%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1114">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> property gets the <xref:System.Web.UI.WebControls.ObjectDataSourceView.SelectParameters%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-1115">使用 `SelectParameters` 元素以声明方式将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合，或在 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件的处理程序中以编程方式向其添加参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1115">You add parameters to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection declaratively by using the `SelectParameters` element or programmatically in the handler for the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event.</span></span> <span data-ttu-id="29079-1116">在运行时，将在 `SelectParameters` 元素中列出的参数首先添加到集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-1116">At run time, parameters listed in the `SelectParameters` element are added to the collection first.</span></span> <span data-ttu-id="29079-1117">然后，<xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件的处理程序会添加或删除集合中的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1117">Parameters in the collection are then added or removed by the handler for the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event.</span></span> <span data-ttu-id="29079-1118"><xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件在 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法运行前引发。</span><span class="sxs-lookup"><span data-stu-id="29079-1118">The <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event is raised before the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is run.</span></span>

 <span data-ttu-id="29079-1119">在运行 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法之前，<xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合中包含的参数的名称和类型必须与 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法的签名相匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-1119">Before the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is run, the names and types of the parameters that are contained in the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection must match the signature of the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-1120">例如，如果一个名为 `GetEmployeesByStateAndAge` 的 select 方法采用 `string` 并且整数作为参数，则 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> 集合必须包含两个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1120">For example, if a select method named `GetEmployeesByStateAndAge` takes a `string` and an integer as parameters, the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectParameters%2A> collection must contain two parameters.</span></span> <span data-ttu-id="29079-1121">第一个参数必须解析为字符串，第二个参数必须解析为一个整数。</span><span class="sxs-lookup"><span data-stu-id="29079-1121">The first parameter must resolve to a string and the second parameter must resolve to an integer.</span></span> <span data-ttu-id="29079-1122">可以在 `SelectParameters` 元素的标记中指定这两个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1122">Both parameters can be specified in markup in the `SelectParameters` element.</span></span> <span data-ttu-id="29079-1123">或者，可以将它们添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件处理程序中，也可以在标记中添加一个参数，并以编程方式添加另一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1123">Alternatively, they can be can be added in the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event handler, or one parameter can be added in markup and the other one can be added programmatically.</span></span>

 <span data-ttu-id="29079-1124">有关详细信息，请参阅[将参数用于 ObjectDataSource 控件](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4)和 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1124">For more information, see [Using Parameters with the ObjectDataSource Control](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4) and the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod> property.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1125">在 <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> 事件处理程序的代码中或 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性指定的方法中，请确保验证从客户端收到的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1125">In the code for the <xref:System.Web.UI.WebControls.ObjectDataSource.Selecting> event handler or in the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, make sure that you validate any parameter value that is received from the client.</span></span>



## Examples
 <span data-ttu-id="29079-1126">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件检索单个数据记录并将其显示在 <xref:System.Web.UI.WebControls.DetailsView> 控件中。</span><span class="sxs-lookup"><span data-stu-id="29079-1126">The following code example demonstrates how to retrieve a single data record using an <xref:System.Web.UI.WebControls.ObjectDataSource> control and display it in a <xref:System.Web.UI.WebControls.DetailsView> control.</span></span> <span data-ttu-id="29079-1127"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件通过调用 `EmployeeLogic` 类的 `GetEmployee` 方法来检索特定的雇员记录。</span><span class="sxs-lookup"><span data-stu-id="29079-1127">The <xref:System.Web.UI.WebControls.ObjectDataSource> control retrieves a specific employee record by calling the `GetEmployee` method of the `EmployeeLogic` class.</span></span> <span data-ttu-id="29079-1128">`GetEmployee` 方法需要 employee ID 参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1128">The `GetEmployee` method requires an employee ID parameter.</span></span> <span data-ttu-id="29079-1129"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件在标记中使用 `QueryStringParameter` 元素来创建 <xref:System.Web.UI.WebControls.QueryStringParameter> 对象，该对象将从 URL 检索指定的查询字符串参数的值并将其传递给 `GetEmployee` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1129">The <xref:System.Web.UI.WebControls.ObjectDataSource> control uses a `QueryStringParameter` element in markup to create a <xref:System.Web.UI.WebControls.QueryStringParameter> object that will retrieve the value of a specified query-string parameter from the URL and pass it to the `GetEmployee` method.</span></span>

 <span data-ttu-id="29079-1130">其他参数类可用于检索来自其他源的值，例如控件属性、窗体字段、cookie、ASP.NET 配置文件数据或会话状态。</span><span class="sxs-lookup"><span data-stu-id="29079-1130">Other parameter classes can be used to retrieve values from other sources, such as control properties, form fields, cookies, ASP.NET profile data, or session state.</span></span> <span data-ttu-id="29079-1131">你还可以使用在标记中定义的参数对象，以便将硬编码值传递给 select 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1131">You can also use a parameter object that is defined in markup in order to pass a hard-coded value to the select method.</span></span> <span data-ttu-id="29079-1132">有关可用参数类的详细信息，请参阅将[参数用于筛选的数据源控件](https://msdn.microsoft.com/library/88622d04-2989-484e-93fe-594cd98dcf5f(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="29079-1132">For more information about parameter classes that are available, see [Using Parameters with Data Source Controls for Filtering](https://msdn.microsoft.com/library/88622d04-2989-484e-93fe-594cd98dcf5f(v=vs.100)).</span></span>

 <span data-ttu-id="29079-1133">若要运行此示例，你将需要以下各项：</span><span class="sxs-lookup"><span data-stu-id="29079-1133">To run this example, you will need the following:</span></span>

-   <span data-ttu-id="29079-1134">一个网站，该网站具有连接到 Northwind 商贸数据库的名为 `NorthwindConnection` 的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="29079-1134">A Web site that has a connection string named `NorthwindConnection` that connects to the Northwind Traders database.</span></span> <span data-ttu-id="29079-1135">有关详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource> 类概述。</span><span class="sxs-lookup"><span data-stu-id="29079-1135">For more information, see the <xref:System.Web.UI.WebControls.ObjectDataSource> class overview.</span></span>

-   <span data-ttu-id="29079-1136">作为 <xref:System.Web.UI.WebControls.ObjectDataSource> 类概述的代码示例之一显示的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1136">The `EmployeeLogic` class that is shown as one of the code examples for the <xref:System.Web.UI.WebControls.ObjectDataSource> class overview.</span></span> <span data-ttu-id="29079-1137">类文件必须位于 App_Code 文件夹中。</span><span class="sxs-lookup"><span data-stu-id="29079-1137">The class file must be located in the App_Code folder.</span></span>

-   <span data-ttu-id="29079-1138">示例代码可作为 .aspx 页运行。</span><span class="sxs-lookup"><span data-stu-id="29079-1138">The sample code can be run as an .aspx page.</span></span> <span data-ttu-id="29079-1139">如果不使用查询字符串参数请求页面，则会显示错误消息。</span><span class="sxs-lookup"><span data-stu-id="29079-1139">If you request the page without a query-string parameter, an error message is displayed.</span></span> <span data-ttu-id="29079-1140">如果在 .aspx 文件的名称后使用查询字符串（例如 `?empid=1`）来请求页面，则会看到请求的雇员的详细信息。</span><span class="sxs-lookup"><span data-stu-id="29079-1140">If you request the page using a query string such as `?empid=1` after the name of the .aspx file, you will see the details for the requested employee.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_3#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_3/CS/objds3cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_3#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_3/VB/objds3vb.aspx#1)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1141">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1141">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1142">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1142">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1143">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1143">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SortParameterName">
      <MemberSignature Language="C#" Value="public string SortParameterName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string SortParameterName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.SortParameterName" />
      <MemberSignature Language="VB.NET" Value="Public Property SortParameterName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ SortParameterName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.SortParameterName : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.SortParameterName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1144">获取或设置业务对象的名称，<see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> 参数使用此业务对象指定数据源排序支持的排序表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-1144">Gets or sets the name of the business object that the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.SelectMethod" /> parameter used to specify a sort expression for data source sorting support.</span></span></summary>
        <value><span data-ttu-id="29079-1145">方法参数的名称，此方法参数用于指示哪个参数用于排序数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1145">The name of the method parameter used to indicate the parameter which is used to sort the data.</span></span> <span data-ttu-id="29079-1146">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="29079-1146">The default is an empty string.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1147"><xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> 属性用于支持数据源排序。</span><span class="sxs-lookup"><span data-stu-id="29079-1147">The <xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> property is used to support data source sorting.</span></span> <span data-ttu-id="29079-1148">当 <xref:System.Web.UI.DataSourceSelectArguments> 对象上设置 <xref:System.Web.UI.DataSourceSelectArguments.SortExpression%2A> 属性并将其传递给 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法时，<xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> 值将根据数据的排序方式标识 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 业务对象方法的参数名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1148">When a <xref:System.Web.UI.DataSourceSelectArguments.SortExpression%2A> property is set on the <xref:System.Web.UI.DataSourceSelectArguments> object and passed to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method, the <xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> value identifies the parameter name of the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> business object method according to which the data is sorted.</span></span>

 <span data-ttu-id="29079-1149">如果 <xref:System.Web.UI.WebControls.ObjectDataSource> 与数据绑定控件关联，传递给此参数的值将采用以逗号分隔的字段值的形式，后跟 `"ASC"` 或 `"DESC"`。</span><span class="sxs-lookup"><span data-stu-id="29079-1149">If the <xref:System.Web.UI.WebControls.ObjectDataSource> is associated with a data-bound control, the values that are passed to this parameter take the form of comma-separated field values followed by `"ASC"` or `"DESC"`.</span></span> <span data-ttu-id="29079-1150">例如，`Name` 的升序排序的值将为 `"Name ASC"`。</span><span class="sxs-lookup"><span data-stu-id="29079-1150">For example, the value for an ascending sort on `Name` would be `"Name ASC"`.</span></span>

 <span data-ttu-id="29079-1151"><xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.SortParameterName%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1151">The <xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.SortParameterName%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>



## Examples
 <span data-ttu-id="29079-1152">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-1152">This section contains two code examples.</span></span> <span data-ttu-id="29079-1153">第一个代码示例演示如何实现支持排序的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1153">The first code example demonstrates how to implement a type that supports sorting.</span></span> <span data-ttu-id="29079-1154">第二个代码示例演示如何实现排序表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-1154">The second code example demonstrates how to implement a sort expression.</span></span>

 <span data-ttu-id="29079-1155">下面的代码示例演示如何实现支持排序的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1155">The following code example demonstrates how to implement a type that supports sorting.</span></span> <span data-ttu-id="29079-1156">`SortingData` 类的 `SelectMethod` 采用参数，`sortExpression`。</span><span class="sxs-lookup"><span data-stu-id="29079-1156">The `SelectMethod` of the `SortingData` class takes a parameter, `sortExpression`.</span></span> <span data-ttu-id="29079-1157">传递给 `SelectMethod` 的字符串将用于 `SelectMethod`返回的 <xref:System.Data.DataView> 对象的 <xref:System.Data.DataView.Sort%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1157">The string that is passed to `SelectMethod` is used for the <xref:System.Data.DataView.Sort%2A> property of the <xref:System.Data.DataView> object that is returned by `SelectMethod`.</span></span>

 [!code-csharp[ObjectDataSourceSorting#1](~/samples/snippets/csharp/VS_Snippets_WebNet/ObjectDataSourceSorting/CS/SortingData.cs#1)]
 [!code-vb[ObjectDataSourceSorting#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/ObjectDataSourceSorting/VB/SortingData.vb#1)]

 <span data-ttu-id="29079-1158">下面的代码示例演示如何实现排序表达式。</span><span class="sxs-lookup"><span data-stu-id="29079-1158">The following code example demonstrates how to implement a sort expression.</span></span> <span data-ttu-id="29079-1159">网页中的代码将创建 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-1159">The code in the Web page creates an instance of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1160"><xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性设置为 `SortingData`，<xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> 属性设置为 `sortExpression`。</span><span class="sxs-lookup"><span data-stu-id="29079-1160">The <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property is set to `SortingData` and the <xref:System.Web.UI.WebControls.ObjectDataSource.SortParameterName%2A> property is set to `sortExpression`.</span></span> <span data-ttu-id="29079-1161"><xref:System.Web.UI.WebControls.GridView> 控件的 <xref:System.Web.UI.WebControls.GridView.AllowSorting%2A> 属性设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="29079-1161">The <xref:System.Web.UI.WebControls.GridView.AllowSorting%2A> property of the <xref:System.Web.UI.WebControls.GridView> control is set to `true`.</span></span> <span data-ttu-id="29079-1162">用户单击**排序**按钮时，会将字段名称 `Name` 或 `Number`传递给 Sort 参数中的 `SelectMethod`。</span><span class="sxs-lookup"><span data-stu-id="29079-1162">When the user clicks the **Sort** button, the field name, `Name` or `Number`, is passed to `SelectMethod` in the sort parameter.</span></span>

 [!code-aspx-csharp[ObjectDataSourceSorting#2](~/samples/snippets/csharp/VS_Snippets_WebNet/ObjectDataSourceSorting/CS/SortingDataExample.aspx#2)]
 [!code-aspx-vb[ObjectDataSourceSorting#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/ObjectDataSourceSorting/VB/SortingDataExampleVB.aspx#2)]

 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSourceView.CanSort" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1163">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1163">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1164">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1164">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1165">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1165">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SqlCacheDependency">
      <MemberSignature Language="C#" Value="public virtual string SqlCacheDependency { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string SqlCacheDependency" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Property SqlCacheDependency As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property System::String ^ SqlCacheDependency { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.SqlCacheDependency : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1166">获取或设置一个用分号分隔的字符串，指示用于 Microsoft SQL Server 缓存依赖项的数据库和表。</span><span class="sxs-lookup"><span data-stu-id="29079-1166">Gets or sets a semicolon-delimited string that indicates which databases and tables to use for the Microsoft SQL Server cache dependency.</span></span></summary>
        <value><span data-ttu-id="29079-1167">一个字符串，指示用于 SQL Server 缓存依赖项的数据库和表。</span><span class="sxs-lookup"><span data-stu-id="29079-1167">A string that indicates which databases and tables to use for the SQL Server cache dependency.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1168"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件支持基于数据缓存的 <xref:System.Web.Caching.SqlCacheDependency> 对象的可选过期策略（必须为数据库服务器配置服务）。</span><span class="sxs-lookup"><span data-stu-id="29079-1168">The <xref:System.Web.UI.WebControls.ObjectDataSource> control supports an optional expiration policy that is based on the <xref:System.Web.Caching.SqlCacheDependency> object for the data cache (the service must be configured for the database server).</span></span>

 <span data-ttu-id="29079-1169">SQL Server 支持两种缓存失效机制：轮询和通知。</span><span class="sxs-lookup"><span data-stu-id="29079-1169">SQL Server supports two mechanisms for cache invalidation: polling and notification.</span></span> <span data-ttu-id="29079-1170">每种机制都为 <xref:System.Web.Caching.SqlCacheDependency> 对象提供了不同的语法。</span><span class="sxs-lookup"><span data-stu-id="29079-1170">Each mechanism has a different syntax for the <xref:System.Web.Caching.SqlCacheDependency> object.</span></span>

 <span data-ttu-id="29079-1171"><xref:System.Web.UI.WebControls.ObjectDataSource> 仅支持轮询。</span><span class="sxs-lookup"><span data-stu-id="29079-1171">The <xref:System.Web.UI.WebControls.ObjectDataSource> supports only polling.</span></span> <span data-ttu-id="29079-1172"><xref:System.Web.Caching.SqlCacheDependency> 字符串用于创建在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> 方法之前传递到 <xref:System.Data.Common.DbCommand> 构造函数的 <xref:System.Data.SqlClient.SqlDependency> 对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1172">The <xref:System.Web.Caching.SqlCacheDependency> string is used to create a <xref:System.Data.SqlClient.SqlDependency> object that is passed to the <xref:System.Data.Common.DbCommand> constructor before the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A> method is executed.</span></span> <span data-ttu-id="29079-1173"><xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> 字符串根据 `@ Page` 指令使用的相同格式标识数据库和表，其中字符串的第一部分是 SQL Server 数据库的连接字符串，后跟一个冒号分隔符，最后是数据库表的名称（例如 `"connectionstring1:table1"`）。</span><span class="sxs-lookup"><span data-stu-id="29079-1173">The <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> string identifies databases and tables according to the same format that is used by the `@ Page` directive, where the first part of the string is a connection string to a SQL Server database, followed by a colon delimiter, and finally the name of the database table (for example, `"connectionstring1:table1"`).</span></span> <span data-ttu-id="29079-1174">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> 属性依赖于多个表，则连接字符串和表名称对用分号分隔（例如，`"connectionstring1:table1";connectionstring2:table2"`）。</span><span class="sxs-lookup"><span data-stu-id="29079-1174">If the <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> property depends on more than one table, the connection string and table name pairs are separated by semicolons (for example, `"connectionstring1:table1";connectionstring2:table2"`).</span></span>

 <span data-ttu-id="29079-1175">若要支持通知，你必须在 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性的实现中编写缓存逻辑，并在代码中处理 <xref:System.Web.Caching.SqlCacheDependency> 对象的构造。</span><span class="sxs-lookup"><span data-stu-id="29079-1175">To support notification, you must write the cache logic in the implementation of your <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property and handle the construction of the <xref:System.Web.Caching.SqlCacheDependency> object in your code.</span></span>



## Examples
 <span data-ttu-id="29079-1176">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-1176">This section contains two code examples.</span></span> <span data-ttu-id="29079-1177">第一个代码示例演示如何创建 SQL Server 的缓存依赖项，以及如何设置 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1177">The first code example demonstrates how to create a SQL Server cache dependency and set the <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> property of a <xref:System.Web.UI.WebControls.ObjectDataSource> object.</span></span> <span data-ttu-id="29079-1178">第二个代码示例演示如何实现返回 <xref:System.Data.DataSet> 对象的包装方法，以便使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象启用缓存和筛选。</span><span class="sxs-lookup"><span data-stu-id="29079-1178">The second code example demonstrates how to implement a wrapper method that returns a <xref:System.Data.DataSet> object to enable caching and filtering with an <xref:System.Web.UI.WebControls.ObjectDataSource> object.</span></span>

 <span data-ttu-id="29079-1179">下面的代码示例演示如何创建 SQL Server 的缓存依赖项，以及如何设置 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1179">The following code example demonstrates how to create a SQL Server cache dependency and set the <xref:System.Web.UI.WebControls.ObjectDataSource.SqlCacheDependency%2A> property of a <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1180">在此示例中，数据库每120秒轮询一次。</span><span class="sxs-lookup"><span data-stu-id="29079-1180">In this example, the database is polled every 120 seconds.</span></span> <span data-ttu-id="29079-1181">如果 Northwind 商贸 Employees 表中的数据在这段时间内发生更改，则由 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件缓存并由 <xref:System.Web.UI.WebControls.GridView> 控件显示的所有数据都将过期，并在下一次请求页面时检索一组新数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1181">If the data in the Northwind Traders Employees table changes during that time, any data that is cached by the <xref:System.Web.UI.WebControls.ObjectDataSource> control and displayed by the <xref:System.Web.UI.WebControls.GridView> control is expired and a new set of data is retrieved on the next request for the page.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_7#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_7/CS/objds7cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_7#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_7/VB/objds7vb.aspx#1)]

 <span data-ttu-id="29079-1182">下面的代码示例演示如何实现一个包装方法，该方法返回 <xref:System.Data.DataSet> 对象以使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件启用缓存和筛选。</span><span class="sxs-lookup"><span data-stu-id="29079-1182">The following code example demonstrates how to implement a wrapper method that returns a <xref:System.Data.DataSet> object to enable caching and filtering with an <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1183">在 `EmployeeLogic` 类的基实现中，`GetAllEmployees` 方法返回 <xref:System.Collections.ArrayList> 对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1183">In the base implementation of the `EmployeeLogic` class, the `GetAllEmployees` method returns an <xref:System.Collections.ArrayList> object.</span></span> <span data-ttu-id="29079-1184">添加一个名为 `GetAllEmployeesAsDataSet` 的包装方法，该方法将 `NorthwindEmployee` 数据作为 <xref:System.Data.DataSet>返回，而不是完全重构对象以使用 Web 窗体页上的 <xref:System.Web.UI.WebControls.ObjectDataSource>。</span><span class="sxs-lookup"><span data-stu-id="29079-1184">Instead of refactoring the object completely to work with the <xref:System.Web.UI.WebControls.ObjectDataSource> on a Web Forms page, a wrapper method named `GetAllEmployeesAsDataSet` is added that returns a set of `NorthwindEmployee` data as a <xref:System.Data.DataSet>.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_5#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_5/CS/northwindemployee5.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_5#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_5/VB/northwindemployee5.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="T:System.Web.Caching.SqlCacheDependency" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1185">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1185">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1186">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1186">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1187">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1187">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="StartRowIndexParameterName">
      <MemberSignature Language="C#" Value="public string StartRowIndexParameterName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string StartRowIndexParameterName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName" />
      <MemberSignature Language="VB.NET" Value="Public Property StartRowIndexParameterName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ StartRowIndexParameterName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.StartRowIndexParameterName : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("startRowIndex")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1188">获取或设置数据检索方法参数的名称，该参数用于指示为数据源分页支持检索的第一条记录的标识符的值。</span><span class="sxs-lookup"><span data-stu-id="29079-1188">Gets or sets the name of the data retrieval method parameter that is used to indicate the value of the identifier of the first record to retrieve for data source paging support.</span></span></summary>
        <value><span data-ttu-id="29079-1189">业务对象方法参数的名称，该参数用于指示要检索的第一条记录。</span><span class="sxs-lookup"><span data-stu-id="29079-1189">The name of the business object method parameter used to indicate the first record to retrieve.</span></span> <span data-ttu-id="29079-1190">该参数必须返回整数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1190">The parameter must return an integer value.</span></span> <span data-ttu-id="29079-1191">默认值为<c>"startRowIndex"</c>。</span><span class="sxs-lookup"><span data-stu-id="29079-1191">The default is <c>"startRowIndex"</c>.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1192"><xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 属性用于支持数据源分页。</span><span class="sxs-lookup"><span data-stu-id="29079-1192">The <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> property is used to support data source paging.</span></span> <span data-ttu-id="29079-1193">有关 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件如何支持分页的信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-1193">For information about how paging is supported by the <xref:System.Web.UI.WebControls.ObjectDataSource> control, see <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A>.</span></span>

 <span data-ttu-id="29079-1194"><xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.StartRowIndexParameterName%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1194">The <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.StartRowIndexParameterName%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>



## Examples
 <span data-ttu-id="29079-1195">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够选择页面中显示的记录数。</span><span class="sxs-lookup"><span data-stu-id="29079-1195">The following three examples show a Web page, a code-behind page class, and a data-access class that enable the user to pick how many records are displayed in the page.</span></span>

 <span data-ttu-id="29079-1196">网页包含 <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> 属性设置为 `true`的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1196">The Web page contains an <xref:System.Web.UI.WebControls.ObjectDataSource> control whose <xref:System.Web.UI.WebControls.ObjectDataSource.EnablePaging%2A> property is set to `true`.</span></span> <span data-ttu-id="29079-1197"><xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性设置为方法的名称，该方法返回查询中的记录总数。</span><span class="sxs-lookup"><span data-stu-id="29079-1197">The <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property is set to the name of a method that returns the total number of records in the query.</span></span> <span data-ttu-id="29079-1198"><xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> 属性和 <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> 属性设置为 Select 方法中使用的参数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1198">The <xref:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName%2A> property and the <xref:System.Web.UI.WebControls.ObjectDataSource.StartRowIndexParameterName%2A> property are set to the names of the parameters that are used in the Select method.</span></span> <span data-ttu-id="29079-1199">此页还包含一个 <xref:System.Web.UI.WebControls.DropDownList> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1199">The page also contains a <xref:System.Web.UI.WebControls.DropDownList> control.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_17#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx#1)]

 <span data-ttu-id="29079-1200">第二个示例显示 <xref:System.Web.UI.WebControls.DropDownList> 控件的 <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-1200">The second example shows a handler for the <xref:System.Web.UI.WebControls.ListControl.SelectedIndexChanged?displayProperty=nameWithType> event of the <xref:System.Web.UI.WebControls.DropDownList> control.</span></span> <span data-ttu-id="29079-1201">处理程序中的代码将 <xref:System.Web.UI.WebControls.GridView.PageSize%2A> 属性设置为用户的选择。</span><span class="sxs-lookup"><span data-stu-id="29079-1201">The code in the handler sets the <xref:System.Web.UI.WebControls.GridView.PageSize%2A> property to the user's selection.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/Default3.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/Default3.aspx.vb#2)]

 <span data-ttu-id="29079-1202">第三个示例显示了从 Customers 表检索数据的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-1202">The third example shows the data access class that retrieves data from the Customers table.</span></span> <span data-ttu-id="29079-1203">它包括一个名为 `GetSubsetOfEmployees`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1203">It includes a method named `GetSubsetOfEmployees`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1204">该示例还包括一个名为 `GetEmployeeCount`的方法，该方法分配给 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件的 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1204">The example also includes a method named `GetEmployeeCount`, which is assigned to the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectCountMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span> <span data-ttu-id="29079-1205">类使用 LINQ 查询 Customers 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1205">The class uses LINQ to query the Customers table.</span></span> <span data-ttu-id="29079-1206">该示例需要一个表示 Northwind 数据库和 Customers 表的 LINQ to SQL 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1206">The example requires a LINQ to SQL class that represents the Northwind database and Customers table.</span></span> <span data-ttu-id="29079-1207">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-1207">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/CS/App_Code/CustomerLogic.cs#3)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_17#3](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_17/VB/App_Code/CustomerLogic.vb#3)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.MaximumRowsParameterName" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.EnablePaging" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSourceView.CanPage" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Select" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1208">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1208">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1209">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1209">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1210">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1210">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="TrackViewState">
      <MemberSignature Language="C#" Value="protected override void TrackViewState ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void TrackViewState() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.TrackViewState" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub TrackViewState ()" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void TrackViewState();" />
      <MemberSignature Language="F#" Value="override this.TrackViewState : unit -&gt; unit" Usage="objectDataSource.TrackViewState " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-1211">跟踪 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件的视图状态更改，以便将这些更改存储到 <see cref="T:System.Web.UI.StateBag" /> 对象中。</span><span class="sxs-lookup"><span data-stu-id="29079-1211">Tracks view-state changes to the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control so that they can be stored in the <see cref="T:System.Web.UI.StateBag" /> object.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1212">重写 <xref:System.Web.UI.WebControls.ObjectDataSource.TrackViewState%2A> 方法，以将起始点标记为开始跟踪，并将更改保存为对象的视图状态的一部分。</span><span class="sxs-lookup"><span data-stu-id="29079-1212">The <xref:System.Web.UI.WebControls.ObjectDataSource.TrackViewState%2A> method is overridden to mark the starting point to begin tracking and saving changes to the control as part of the view state for the object.</span></span>

 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.IStateManager.TrackViewState" />
        <altmember cref="T:System.Web.UI.WebControls.ObjectDataSource" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1213">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1213">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1214">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1214">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1215">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1215">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="TypeName">
      <MemberSignature Language="C#" Value="public string TypeName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string TypeName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.TypeName" />
      <MemberSignature Language="VB.NET" Value="Public Property TypeName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ TypeName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.TypeName : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.TypeName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1216">获取或设置 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 对象表示的类的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1216">Gets or sets the name of the class that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> object represents.</span></span></summary>
        <value><span data-ttu-id="29079-1217">标识 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 表示的对象类型的部分或完全限定类名。</span><span class="sxs-lookup"><span data-stu-id="29079-1217">A partially or fully qualified class name that identifies the type of the object that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> represents.</span></span> <span data-ttu-id="29079-1218">默认值为空字符串("")。</span><span class="sxs-lookup"><span data-stu-id="29079-1218">The default is an empty string ("").</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1219">若要创建 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件绑定到的对象的实例，控件将使用反射来加载运行时由类型名称标识的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1219">To create an instance of the object that the <xref:System.Web.UI.WebControls.ObjectDataSource> control binds to, the control uses reflection to load the type that is identified by the type name at run time.</span></span> <span data-ttu-id="29079-1220">因此，<xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性的值可以是位于 Bin 或 App_Code 目录中的代码的部分限定类型，也可以是在全局程序集缓存中注册的代码的完全限定的类型名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1220">Therefore, the value of the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property can be a partially qualified type for code that is located in the Bin or App_Code directories or a fully qualified type name for code that is registered in the global assembly cache.</span></span> <span data-ttu-id="29079-1221">如果使用全局程序集缓存，则必须将相应的引用添加到 Machine.config 或 web.config 文件的 `assemblies` 部分。</span><span class="sxs-lookup"><span data-stu-id="29079-1221">If you use the global assembly cache, you must add the appropriate reference to the `assemblies` section of the Machine.config or Web.config file.</span></span>

 <span data-ttu-id="29079-1222">该类型必须具有无参数的构造函数，除非你处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件自行创建它的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-1222">The type must have a parameterless constructor, unless you handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> event to create an instance of it yourself.</span></span> <span data-ttu-id="29079-1223">如果该类型的方法是成员方法，则为每次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A>、<xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A>和 <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> 方法创建类型的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-1223">An instance of the type is created for each call to the <xref:System.Web.UI.WebControls.ObjectDataSource.Select%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A>, <xref:System.Web.UI.WebControls.ObjectDataSource.Insert%2A>, and <xref:System.Web.UI.WebControls.ObjectDataSource.Delete%2A> methods, if the methods on the type are member methods.</span></span> <span data-ttu-id="29079-1224">如果 `static` 方法（`Shared` Visual Basic），则不会创建实例。</span><span class="sxs-lookup"><span data-stu-id="29079-1224">An instance is not created if the methods are `static` (`Shared` in Visual Basic).</span></span> <span data-ttu-id="29079-1225">如果类型实现 <xref:System.IDisposable> 接口，则在销毁对象之前调用 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1225">If the type implements the <xref:System.IDisposable> interface, the <xref:System.IDisposable.Dispose%2A> method is called before the object is destroyed.</span></span>



## Examples
 <span data-ttu-id="29079-1226">下面的代码示例演示 <xref:System.Web.UI.WebControls.GridView> 控件如何通过在 Web 窗体页上使用 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件来显示数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1226">The following code example demonstrates how a <xref:System.Web.UI.WebControls.GridView> control can display data by using an <xref:System.Web.UI.WebControls.ObjectDataSource> control on a Web Forms page.</span></span> <span data-ttu-id="29079-1227"><xref:System.Web.UI.WebControls.ObjectDataSource> 标识部分或完全限定类名及其 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性，并使用调用的方法来检索带有 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性的数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1227">The <xref:System.Web.UI.WebControls.ObjectDataSource> identifies a partially or fully qualified class name with its <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property and a method that is called to retrieve data with its <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property.</span></span> <span data-ttu-id="29079-1228">在运行时，将创建对象并使用反射调用方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1228">At run time, the object is created and the method is called using reflection.</span></span> <span data-ttu-id="29079-1229"><xref:System.Web.UI.WebControls.GridView> 控件枚举 <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> 属性返回的 <xref:System.Collections.IEnumerable> 集合，并显示数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1229">The <xref:System.Web.UI.WebControls.GridView> control enumerates through the <xref:System.Collections.IEnumerable> collection that is returned by the <xref:System.Web.UI.WebControls.ObjectDataSource.SelectMethod%2A> property, and displays the data.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/CS/objds1cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/VB/objds1vb.aspx#1)]

 <span data-ttu-id="29079-1230">下面的示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性值引用的类。</span><span class="sxs-lookup"><span data-stu-id="29079-1230">The following example shows the class that the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property value refers to.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_1#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/CS/northwindemployee1.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_1#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_1/VB/northwindemployee1.vb#2)]

 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1231">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1231">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1232">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1232">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1233">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1233">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Update">
      <MemberSignature Language="C#" Value="public int Update ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int32 Update() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.ObjectDataSource.Update" />
      <MemberSignature Language="VB.NET" Value="Public Function Update () As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; int Update();" />
      <MemberSignature Language="F#" Value="member this.Update : unit -&gt; int" Usage="objectDataSource.Update " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="29079-1234">通过调用 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" /> 属性标识的方法和 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" /> 集合中的所有参数，执行更新操作。</span><span class="sxs-lookup"><span data-stu-id="29079-1234">Performs an update operation by calling the method that is identified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" /> property and any parameters that are in the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" /> collection.</span></span></summary>
        <returns><span data-ttu-id="29079-1235">一个值，表示基础数据存储中更新的行数。</span><span class="sxs-lookup"><span data-stu-id="29079-1235">A value that represents the number of rows updated in the underlying data storage.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1236">假定业务对象每次更新一条记录，而不是在批处理中更新数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1236">The business object is assumed to update data one record at a time, rather than in a batch.</span></span>

 <span data-ttu-id="29079-1237">在执行 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 操作之前，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnUpdating%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-1237">Before the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> operation is performed, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnUpdating%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event.</span></span> <span data-ttu-id="29079-1238">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件以检查参数的值，并在 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 操作之前执行任何预处理。</span><span class="sxs-lookup"><span data-stu-id="29079-1238">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event to examine the values of the parameters and to perform any preprocessing before an <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> operation.</span></span> <span data-ttu-id="29079-1239">若要执行更新操作，<xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象使用反射来创建由 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性标识的对象的实例。</span><span class="sxs-lookup"><span data-stu-id="29079-1239">To perform an update operation, the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object uses reflection to create an instance of the object that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property.</span></span> <span data-ttu-id="29079-1240">然后，它使用任意关联的 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 属性调用由 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性标识的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1240">It then calls the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property, using any associated <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> properties.</span></span> <span data-ttu-id="29079-1241"><xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 操作完成后，将调用 <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnUpdated%2A> 方法来引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Updated> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-1241">After the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> operation completes, the <xref:System.Web.UI.WebControls.ObjectDataSourceView.OnUpdated%2A> method is called to raise the <xref:System.Web.UI.WebControls.ObjectDataSource.Updated> event.</span></span> <span data-ttu-id="29079-1242">您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Updated> 事件以检查任何返回值、输出参数和异常，并执行任何后续处理。</span><span class="sxs-lookup"><span data-stu-id="29079-1242">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Updated> event to examine any return values, output parameters, and exceptions, and to perform any post-processing.</span></span>

 <span data-ttu-id="29079-1243"><xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 方法委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.Update%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1243">The <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> method delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.Update%2A> method of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-1244">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-1244">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1245">你应验证从客户端接收的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1245">You should validate any parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-1246">运行时只需将参数值替换为 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性即可。</span><span class="sxs-lookup"><span data-stu-id="29079-1246">The runtime simply substitutes the parameter value into the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property.</span></span>

## <a name="data-bound-controls"></a><span data-ttu-id="29079-1247">数据绑定控件</span><span class="sxs-lookup"><span data-stu-id="29079-1247">Data-Bound Controls</span></span>
 <span data-ttu-id="29079-1248"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件与数据绑定控件（如 <xref:System.Web.UI.WebControls.GridView> 控件）关联时，无需从页代码中调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1248">When the <xref:System.Web.UI.WebControls.ObjectDataSource> control is associated with a data-bound control, such as the <xref:System.Web.UI.WebControls.GridView> control, it is not necessary to call the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> method from page code.</span></span> <span data-ttu-id="29079-1249">改为直接通过数据绑定控件调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1249">The <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> method is invoked directly by the data-bound control instead.</span></span>



## Examples
 <span data-ttu-id="29079-1250">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-1250">This section contains two code examples.</span></span> <span data-ttu-id="29079-1251">第一个代码示例演示如何使用 <xref:System.Web.UI.WebControls.DropDownList> 控件、<xref:System.Web.UI.WebControls.TextBox> 控件和几个 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象来更新数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1251">The first code example demonstrates how to use a <xref:System.Web.UI.WebControls.DropDownList> control, <xref:System.Web.UI.WebControls.TextBox> controls, and several <xref:System.Web.UI.WebControls.ObjectDataSource> objects to update data.</span></span> <span data-ttu-id="29079-1252">第二个代码示例演示了第一个代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1252">The second code example shows the `EmployeeLogic` class that is used in the first code example.</span></span>

 <span data-ttu-id="29079-1253">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.DropDownList> 控件、<xref:System.Web.UI.WebControls.TextBox> 控件和几个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件来更新数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1253">The following code example demonstrates how to use a <xref:System.Web.UI.WebControls.DropDownList> control, <xref:System.Web.UI.WebControls.TextBox> controls, and several <xref:System.Web.UI.WebControls.ObjectDataSource> controls to update data.</span></span> <span data-ttu-id="29079-1254"><xref:System.Web.UI.WebControls.DropDownList> 显示 Northwind 雇员的姓名，而 <xref:System.Web.UI.WebControls.TextBox> 控件用于输入和更新地址信息。</span><span class="sxs-lookup"><span data-stu-id="29079-1254">The <xref:System.Web.UI.WebControls.DropDownList> displays the name of a Northwind employee, while the <xref:System.Web.UI.WebControls.TextBox> controls are used to enter and update address information.</span></span> <span data-ttu-id="29079-1255">由于 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合包含绑定到 <xref:System.Web.UI.WebControls.DropDownList>的选定值的 <xref:System.Web.UI.WebControls.ControlParameter> 对象，因此仅在选择了员工之后才会启用引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 操作的按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-1255">Because the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection contains a <xref:System.Web.UI.WebControls.ControlParameter> object that is bound to the selected value of the <xref:System.Web.UI.WebControls.DropDownList>, the button that raises the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> operation is enabled only after an employee is selected.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1256">此示例具有一个接受用户输入的文本框，这是一个潜在的安全威胁。</span><span class="sxs-lookup"><span data-stu-id="29079-1256">This example has a text box that accepts user input, which is a potential security threat.</span></span> <span data-ttu-id="29079-1257">默认情况下，ASP.NET 网页验证用户输入是否不包含脚本或 HTML 元素。</span><span class="sxs-lookup"><span data-stu-id="29079-1257">By default, ASP.NET Web pages validate that user input does not include script or HTML elements.</span></span> <span data-ttu-id="29079-1258">有关详细信息，请参阅[脚本侵入概述](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="29079-1258">For more information, see [Script Exploits Overview](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100)).</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_12#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/CS/objds12cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_12#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/VB/objds12vb.aspx#1)]

 <span data-ttu-id="29079-1259">下面的代码示例演示了前面的代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1259">The following code example shows the `EmployeeLogic` class that is used in the preceding code example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_12#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/CS/northwindemployee12.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_12#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/VB/northwindemployee12.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1260">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1260">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1261">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1261">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1262">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1262">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-1263">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-1263">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Updated">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Updated;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler Updated" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Updated" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Updated As ObjectDataSourceStatusEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceStatusEventHandler ^ Updated;" />
      <MemberSignature Language="F#" Value="member this.Updated : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " Usage="member this.Updated : System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceStatusEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1264">在 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> 操作完成时发生。</span><span class="sxs-lookup"><span data-stu-id="29079-1264">Occurs when an <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> operation has completed.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1265">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Updated> 事件以检查返回值或输出参数的值，或确定 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 操作完成后是否引发了异常。</span><span class="sxs-lookup"><span data-stu-id="29079-1265">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Updated> event to examine the values of a return value or output parameters, or to determine whether an exception was thrown after an <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> operation has completed.</span></span> <span data-ttu-id="29079-1266">可从与事件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> 对象中获取返回值、输出参数和异常处理属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1266">The return value, output parameters, and exception handling properties are available from the <xref:System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs> object that is associated with the event.</span></span>

 <span data-ttu-id="29079-1267">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-1267">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Updating" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnUpdated(System.Web.UI.WebControls.ObjectDataSourceStatusEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1268">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1268">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1269">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1269">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1270">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1270">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-1271">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-1271">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="UpdateMethod">
      <MemberSignature Language="C#" Value="public string UpdateMethod { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string UpdateMethod" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" />
      <MemberSignature Language="VB.NET" Value="Public Property UpdateMethod As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ UpdateMethod { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.UpdateMethod : string with get, set" Usage="System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1272">获取或设置由 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 控件调用以更新数据的方法或函数的名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1272">Gets or sets the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> control invokes to update data.</span></span></summary>
        <value><span data-ttu-id="29079-1273">表示 <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> 用于更新数据的方法或函数的名称的字符串。</span><span class="sxs-lookup"><span data-stu-id="29079-1273">A string that represents the name of the method or function that the <see cref="T:System.Web.UI.WebControls.ObjectDataSource" /> uses to update data.</span></span> <span data-ttu-id="29079-1274">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="29079-1274">The default is an empty string.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1275"><xref:System.Web.UI.WebControls.ObjectDataSource> 控件假设由 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性标识的方法每次执行一个更新，而不是在批处理中执行更新。</span><span class="sxs-lookup"><span data-stu-id="29079-1275">The <xref:System.Web.UI.WebControls.ObjectDataSource> control assumes that the method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property performs updates one at a time, rather than in a batch.</span></span>

 <span data-ttu-id="29079-1276"><xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性委托给与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.UpdateMethod%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1276">The <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property delegates to the <xref:System.Web.UI.WebControls.ObjectDataSourceView.UpdateMethod%2A> property of the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-1277">请确保为 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合中的 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件配置的参数名称与 select 方法返回的列名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-1277">Make sure that the parameter names configured for the <xref:System.Web.UI.WebControls.ObjectDataSource> control in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection match the column names that are returned by the select method.</span></span>

## <a name="object-lifetime"></a><span data-ttu-id="29079-1278">对象生存期</span><span class="sxs-lookup"><span data-stu-id="29079-1278">Object Lifetime</span></span>
 <span data-ttu-id="29079-1279"><xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性标识的方法可以是实例方法，也可以是 `static` （`Shared` Visual Basic）方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1279">The method that is identified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property can be an instance method or a `static` (`Shared` in Visual Basic) method.</span></span> <span data-ttu-id="29079-1280">如果它是实例方法，则每次调用 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性指定的方法时都会创建并销毁业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1280">If it is an instance method, the business object is created and destroyed each time the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property is called.</span></span> <span data-ttu-id="29079-1281">在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性指定的方法之前，您可以处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> 事件来处理业务对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1281">You can handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated> and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating> events to work with the business object before the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property is called.</span></span> <span data-ttu-id="29079-1282">你还可以处理在调用 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性指定的方法之后引发的 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-1282">You can also handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> event that is raised after the method that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property is called.</span></span> <span data-ttu-id="29079-1283">如果业务对象实现 <xref:System.IDisposable> 接口，则在销毁对象之前调用 <xref:System.IDisposable.Dispose%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1283">If the business object implements the <xref:System.IDisposable> interface, the <xref:System.IDisposable.Dispose%2A> method is called before the object is destroyed.</span></span> <span data-ttu-id="29079-1284">如果该方法是 `static` 的（`Shared` Visual Basic），则永远不会创建业务对象，也不能处理 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>、<xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>和 <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> 事件。</span><span class="sxs-lookup"><span data-stu-id="29079-1284">If the method is `static` (`Shared` in Visual Basic), the business object is never created and you cannot handle the <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreated>, <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectCreating>, and <xref:System.Web.UI.WebControls.ObjectDataSource.ObjectDisposing> events.</span></span>

## <a name="parameter-merging"></a><span data-ttu-id="29079-1285">参数合并</span><span class="sxs-lookup"><span data-stu-id="29079-1285">Parameter Merging</span></span>
 <span data-ttu-id="29079-1286">从三个源将参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合：</span><span class="sxs-lookup"><span data-stu-id="29079-1286">Parameters are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection from three sources:</span></span>

-   <span data-ttu-id="29079-1287">在运行时从数据绑定控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1287">From the data-bound control, at run time.</span></span>

-   <span data-ttu-id="29079-1288">从 `UpdateParameters` 元素中，以声明方式。</span><span class="sxs-lookup"><span data-stu-id="29079-1288">From the `UpdateParameters` element, declaratively.</span></span>

-   <span data-ttu-id="29079-1289">以编程方式从 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-1289">From the <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event handler, programmatically.</span></span>

 <span data-ttu-id="29079-1290">首先，将从数据绑定控件生成的所有参数添加到 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-1290">First, any parameters that are generated from data-bound controls are added to the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection.</span></span> <span data-ttu-id="29079-1291">例如，如果 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件绑定到 <xref:System.Web.UI.WebControls.GridView> 控件，该控件具有 `Name` 和 `Number`的列，则 `Name` 和 `Number` 的参数将添加到集合中。</span><span class="sxs-lookup"><span data-stu-id="29079-1291">For example, if the <xref:System.Web.UI.WebControls.ObjectDataSource> control is bound to a <xref:System.Web.UI.WebControls.GridView> control that has the columns `Name` and `Number`, the parameters for `Name` and `Number` are added to the collection.</span></span> <span data-ttu-id="29079-1292">参数的确切名称取决于 <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1292">The exact name of the parameter depends on the <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property.</span></span> <span data-ttu-id="29079-1293">这些参数的数据类型为 `string`。</span><span class="sxs-lookup"><span data-stu-id="29079-1293">The data type of these parameters is `string`.</span></span> <span data-ttu-id="29079-1294">接下来，将添加 `UpdateParameters` 元素中列出的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1294">Next, the parameters that are listed in the `UpdateParameters` element are added.</span></span> <span data-ttu-id="29079-1295">如果找到 `UpdateParameters` 元素中与已在 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合中的参数相同的参数，则会修改现有参数，使其与 `UpdateParameters` 元素中指定的参数匹配。</span><span class="sxs-lookup"><span data-stu-id="29079-1295">If a parameter in the `UpdateParameters` element is found with the same name as a parameter that is already in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection, the existing parameter is modified to match the parameter that is specified in the `UpdateParameters` element.</span></span> <span data-ttu-id="29079-1296">通常，这用于修改参数中数据的类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1296">Typically, this is used to modify the type of the data in the parameter.</span></span> <span data-ttu-id="29079-1297">最后，你可以以编程方式在 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件中添加和移除参数，这会在 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 方法运行之前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-1297">Finally, you can programmatically add and remove parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event, which occurs before the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> method is run.</span></span> <span data-ttu-id="29079-1298">合并参数后，解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1298">The method is resolved after the parameters are merged.</span></span> <span data-ttu-id="29079-1299">下一节将讨论方法解析。</span><span class="sxs-lookup"><span data-stu-id="29079-1299">Method resolution is discussed in the next section.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1300">你应验证从客户端接收的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1300">You should validate any parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-1301">运行时只需将参数值替换为 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性即可。</span><span class="sxs-lookup"><span data-stu-id="29079-1301">The runtime simply substitutes the parameter value into the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property.</span></span>

## <a name="method-resolution"></a><span data-ttu-id="29079-1302">方法解析</span><span class="sxs-lookup"><span data-stu-id="29079-1302">Method Resolution</span></span>
 <span data-ttu-id="29079-1303">调用 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 方法时，数据绑定控件中的数据字段、`UpdateParameters` 元素中以声明方式创建的参数以及在 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件处理程序中添加的参数都将合并。</span><span class="sxs-lookup"><span data-stu-id="29079-1303">When the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> method is called, the data fields from the data-bound control, the parameters that were created declaratively in the `UpdateParameters` element, and the parameters that were added in the <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event handler are all merged.</span></span> <span data-ttu-id="29079-1304">（有关详细信息，请参阅前面的部分。）然后，<xref:System.Web.UI.WebControls.ObjectDataSource> 控件将尝试查找要调用的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1304">(For more information, see the preceding section.) The <xref:System.Web.UI.WebControls.ObjectDataSource> control then attempts to find a method to call.</span></span> <span data-ttu-id="29079-1305">首先，它会查找一个或多个具有在 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性中指定的名称的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1305">First, it looks for one or more methods with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property.</span></span> <span data-ttu-id="29079-1306">如果未找到匹配项，则会引发 <xref:System.InvalidOperationException> 异常。</span><span class="sxs-lookup"><span data-stu-id="29079-1306">If no match is found, an <xref:System.InvalidOperationException> exception is thrown.</span></span> <span data-ttu-id="29079-1307">如果找到匹配项，则它将查找匹配的参数名称。</span><span class="sxs-lookup"><span data-stu-id="29079-1307">If a match is found, it then looks for matching parameter names.</span></span> <span data-ttu-id="29079-1308">例如，假设 <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> 属性指定的类型有两个名为 `UpdateARecord`的方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1308">For example, suppose a type that is specified by the <xref:System.Web.UI.WebControls.ObjectDataSource.TypeName%2A> property has two methods named `UpdateARecord`.</span></span> <span data-ttu-id="29079-1309">一个 `UpdateARecord` 具有一个参数，`ID`，另一个 `UpdateARecord` 具有两个参数，`Name` 和 `Number`。</span><span class="sxs-lookup"><span data-stu-id="29079-1309">One `UpdateARecord` has one parameter, `ID`, and the other `UpdateARecord` has two parameters, `Name` and `Number`.</span></span> <span data-ttu-id="29079-1310">如果 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合只有一个名为 `ID`的参数，则将调用只包含 `ID` 参数的 `UpdateARecord` 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1310">If the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection has only one parameter named `ID`, the `UpdateARecord` method with just the `ID` parameter is called.</span></span> <span data-ttu-id="29079-1311">解析方法时未检查参数类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1311">The type of the parameter is not checked in resolving the methods.</span></span> <span data-ttu-id="29079-1312">参数的顺序并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-1312">The order of the parameters does not matter.</span></span>

 <span data-ttu-id="29079-1313">如果设置了 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性，则会以不同的方式解析方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1313">If the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property is set, the method is resolved in a different way.</span></span> <span data-ttu-id="29079-1314"><xref:System.Web.UI.WebControls.ObjectDataSource> 查找 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性中指定了名称的方法，该属性采用 <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> 属性中指定的类型的一个参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1314">The <xref:System.Web.UI.WebControls.ObjectDataSource> looks for a method with the name that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property that takes one parameter of the type that is specified in the <xref:System.Web.UI.WebControls.ObjectDataSource.DataObjectTypeName%2A> property.</span></span> <span data-ttu-id="29079-1315">在这种情况下，参数名称并不重要。</span><span class="sxs-lookup"><span data-stu-id="29079-1315">In this case, the name of the parameter does not matter.</span></span>



## Examples
 <span data-ttu-id="29079-1316">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够在 Northwind 数据库中检索和更新 Employees 表中的记录。</span><span class="sxs-lookup"><span data-stu-id="29079-1316">The following three examples show a Web page, a code-behind page class, and a data-access class that enable a user to retrieve and update records in the Employees table in the Northwind database.</span></span>

 <span data-ttu-id="29079-1317">第一个示例显示一个网页，其中包含两个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件、一个 <xref:System.Web.UI.WebControls.DropDownList> 控件和一个 <xref:System.Web.UI.WebControls.DetailsView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1317">The first example shows a Web page that contains two <xref:System.Web.UI.WebControls.ObjectDataSource> controls, a <xref:System.Web.UI.WebControls.DropDownList> control, and a <xref:System.Web.UI.WebControls.DetailsView> control.</span></span> <span data-ttu-id="29079-1318">第一个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DropDownList> 控件用于从数据库检索和显示雇员姓名。</span><span class="sxs-lookup"><span data-stu-id="29079-1318">The first <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DropDownList> control are used to retrieve and display employee names from the database.</span></span> <span data-ttu-id="29079-1319">第二个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DetailsView> 控件用于从用户选择的员工记录中检索、显示和修改数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1319">The second <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DetailsView> control are used to retrieve, display, and modify the data from the employee record that is selected by the user.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_18#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_18#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default.aspx#1)]

 <span data-ttu-id="29079-1320">第二个示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-1320">The second example shows handlers for the <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> and <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> events.</span></span> <span data-ttu-id="29079-1321"><xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 事件处理程序将序列化包含从 Employee 表中检索到的数据的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1321">The <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> event handler serializes the object that contains data that was retrieved from the Employee table.</span></span> <span data-ttu-id="29079-1322">序列化的对象存储在视图状态中。</span><span class="sxs-lookup"><span data-stu-id="29079-1322">The serialized object is stored in view state.</span></span> <span data-ttu-id="29079-1323"><xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件处理程序在视图状态中对对象进行反序列化，该对象包含要更新的数据记录的原始数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1323">The <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event handler deserializes the object in view state that contains the original data for the data record that is being updated.</span></span> <span data-ttu-id="29079-1324">包含原始数据的对象将作为参数传递给 Update 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1324">The object that contains the original data is passed as a parameter to the Update method.</span></span> <span data-ttu-id="29079-1325">必须将原始数据传递到数据库，以便可以使用它来检查数据是否已被其他进程修改。</span><span class="sxs-lookup"><span data-stu-id="29079-1325">The original data must be passed to the database so that it can be used to check whether the data has been modified by another process.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default.aspx.vb#2)]

 <span data-ttu-id="29079-1326">第三个示例显示与 Northwind 数据库交互的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-1326">The third example shows the data access class that interacts with the Northwind database.</span></span> <span data-ttu-id="29079-1327">类使用 LINQ 来查询和更新 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1327">The class uses LINQ to query and update the Employees table.</span></span> <span data-ttu-id="29079-1328">该示例需要一个 LINQ to SQL 类，该类表示 Northwind 数据库和 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1328">The example requires a LINQ to SQL class that represents the Northwind database and Employees table.</span></span> <span data-ttu-id="29079-1329">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-1329">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/App_Code/EmployeeLogic.cs#5)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/App_Code/EmployeeLogic.vb#5)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1330">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1330">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1331">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1331">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1332">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1332">Creating an ObjectDataSource Control Source Object</span></span></related>
        <related type="ExternalDocumentation" href="https://go.microsoft.com/fwlink/?LinkId=214011"><span data-ttu-id="29079-1333">使用实体框架和 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="29079-1333">Using the Entity Framework and the ObjectDataSource Control</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="UpdateParameters">
      <MemberSignature Language="C#" Value="public System.Web.UI.WebControls.ParameterCollection UpdateParameters { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Web.UI.WebControls.ParameterCollection UpdateParameters" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property UpdateParameters As ParameterCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::UI::WebControls::ParameterCollection ^ UpdateParameters { System::Web::UI::WebControls::ParameterCollection ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.UpdateParameters : System.Web.UI.WebControls.ParameterCollection" Usage="System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.DefaultValue(null)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.MergableProperty(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.Web.UI.PersistenceMode(System.Web.UI.PersistenceMode.InnerProperty)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.Editor("System.Web.UI.Design.WebControls.ParameterCollectionEditor, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(System.Drawing.Design.UITypeEditor))</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ParameterCollection</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1334">获取参数集合，该集合包含由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" /> 属性指定的方法使用的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1334">Gets the parameters collection that contains the parameters that are used by the method that is specified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" /> property.</span></span></summary>
        <value><span data-ttu-id="29079-1335"><see cref="T:System.Web.UI.WebControls.ParameterCollection" />，包含由 <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" /> 属性指定的方法使用的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1335">A <see cref="T:System.Web.UI.WebControls.ParameterCollection" /> that contains the parameters used by the method that is specified by the <see cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" /> property.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1336"><xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合中包含的参数的名称和类型必须匹配 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 方法签名中的参数的名称和类型。</span><span class="sxs-lookup"><span data-stu-id="29079-1336">The names and types of the parameters that are contained in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection must match the names and types of the parameters in the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> method signature.</span></span> <span data-ttu-id="29079-1337">参数名称受 <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> 属性影响，并区分大小写。</span><span class="sxs-lookup"><span data-stu-id="29079-1337">The parameter names are affected by the <xref:System.Web.UI.WebControls.ObjectDataSource.OldValuesParameterFormatString%2A> property and are case-sensitive.</span></span> <span data-ttu-id="29079-1338">集合中的参数取决于数据绑定控件中的数据、以声明方式指定的参数和以编程方式添加的参数。</span><span class="sxs-lookup"><span data-stu-id="29079-1338">The parameters in the collection depend on the data in the data-bound control, the parameters that are specified declaratively, and the parameters that are added programmatically.</span></span> <span data-ttu-id="29079-1339">有关详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 中的 "参数合并" 部分，并[将参数用于 ObjectDataSource 控件](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4)。</span><span class="sxs-lookup"><span data-stu-id="29079-1339">For more information, see the "Parameter Merging" section in <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> and [Using Parameters with the ObjectDataSource Control](https://msdn.microsoft.com/library/45fb67ee-9be7-49b7-9421-e242203dafa4).</span></span>

 <span data-ttu-id="29079-1340"><xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 属性检索与 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件关联的 <xref:System.Web.UI.WebControls.ObjectDataSourceView> 对象所包含的 <xref:System.Web.UI.WebControls.ObjectDataSourceView.UpdateParameters%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="29079-1340">The <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> property retrieves the <xref:System.Web.UI.WebControls.ObjectDataSourceView.UpdateParameters%2A> property that is contained by the <xref:System.Web.UI.WebControls.ObjectDataSourceView> object that is associated with the <xref:System.Web.UI.WebControls.ObjectDataSource> control.</span></span>

 <span data-ttu-id="29079-1341">有关参数合并、对象生存期和方法解析的详细信息，请参阅 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>。</span><span class="sxs-lookup"><span data-stu-id="29079-1341">For more information about parameter merging, object lifetime, and method resolution, see <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A>.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1342">你应验证从客户端接收的任何参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1342">You should validate any parameter value that you receive from the client.</span></span> <span data-ttu-id="29079-1343">运行时只需将参数值替换为 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> 属性即可。</span><span class="sxs-lookup"><span data-stu-id="29079-1343">The runtime simply substitutes the parameter value into the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod%2A> property.</span></span>



## Examples
 <span data-ttu-id="29079-1344">本部分包含两个代码示例。</span><span class="sxs-lookup"><span data-stu-id="29079-1344">This section contains two code examples.</span></span> <span data-ttu-id="29079-1345">第一个代码示例演示如何使用 <xref:System.Web.UI.WebControls.DropDownList> 控件、<xref:System.Web.UI.WebControls.TextBox> 控件和几个 <xref:System.Web.UI.WebControls.ObjectDataSource> 对象来更新数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1345">The first code example demonstrates how to use a <xref:System.Web.UI.WebControls.DropDownList> control, <xref:System.Web.UI.WebControls.TextBox> controls, and several <xref:System.Web.UI.WebControls.ObjectDataSource> objects to update data.</span></span> <span data-ttu-id="29079-1346">第二个代码示例演示了第一个代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1346">The second code example shows the `EmployeeLogic` class that is used in the first code example.</span></span>

 <span data-ttu-id="29079-1347">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.DropDownList> 控件、<xref:System.Web.UI.WebControls.TextBox> 控件和几个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件来更新数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1347">The following code example demonstrates how to use a <xref:System.Web.UI.WebControls.DropDownList> control, <xref:System.Web.UI.WebControls.TextBox> controls, and several <xref:System.Web.UI.WebControls.ObjectDataSource> controls to update data.</span></span> <span data-ttu-id="29079-1348"><xref:System.Web.UI.WebControls.DropDownList> 显示 Northwind 雇员的姓名，而 <xref:System.Web.UI.WebControls.TextBox> 控件用于输入和更新地址信息。</span><span class="sxs-lookup"><span data-stu-id="29079-1348">The <xref:System.Web.UI.WebControls.DropDownList> displays the name of a Northwind employee, while the <xref:System.Web.UI.WebControls.TextBox> controls are used to enter and update address information.</span></span> <span data-ttu-id="29079-1349">由于 <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> 集合包含绑定到 <xref:System.Web.UI.WebControls.DropDownList>的选定值的 <xref:System.Web.UI.WebControls.ControlParameter>，因此仅在选择了员工之后才会启用引发 <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> 操作的按钮。</span><span class="sxs-lookup"><span data-stu-id="29079-1349">Because the <xref:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters%2A> collection contains a <xref:System.Web.UI.WebControls.ControlParameter> that is bound to the selected value of the <xref:System.Web.UI.WebControls.DropDownList>, the button that raises the <xref:System.Web.UI.WebControls.ObjectDataSource.Update%2A> operation is enabled only after an employee is selected.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="29079-1350">此示例具有一个接受用户输入的文本框，这是一个潜在的安全威胁。</span><span class="sxs-lookup"><span data-stu-id="29079-1350">This example has a text box that accepts user input, which is a potential security threat.</span></span> <span data-ttu-id="29079-1351">默认情况下，ASP.NET 网页验证用户输入是否不包含脚本或 HTML 元素。</span><span class="sxs-lookup"><span data-stu-id="29079-1351">By default, ASP.NET Web pages validate that user input does not include script or HTML elements.</span></span> <span data-ttu-id="29079-1352">有关详细信息，请参阅[脚本侵入概述](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="29079-1352">For more information, see [Script Exploits Overview](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100)).</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_12#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/CS/objds12cs.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_12#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/VB/objds12vb.aspx#1)]

 <span data-ttu-id="29079-1353">下面的代码示例演示了前面的代码示例中使用的 `EmployeeLogic` 类。</span><span class="sxs-lookup"><span data-stu-id="29079-1353">The following code example shows the `EmployeeLogic` class that is used in the preceding code example.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_12#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/CS/northwindemployee12.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_12#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_12/VB/northwindemployee12.vb#2)]

 ]]></format>
        </remarks>
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateMethod" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1354">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1354">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1355">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1355">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1356">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1356">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Updating">
      <MemberSignature Language="C#" Value="public event System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler Updating;" />
      <MemberSignature Language="ILAsm" Value=".event class System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler Updating" />
      <MemberSignature Language="DocId" Value="E:System.Web.UI.WebControls.ObjectDataSource.Updating" />
      <MemberSignature Language="VB.NET" Value="Public Custom Event Updating As ObjectDataSourceMethodEventHandler " />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; event System::Web::UI::WebControls::ObjectDataSourceMethodEventHandler ^ Updating;" />
      <MemberSignature Language="F#" Value="member this.Updating : System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler " Usage="member this.Updating : System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler " />
      <MemberType>Event</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.ObjectDataSourceMethodEventHandler</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="29079-1357">在 <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> 操作前发生。</span><span class="sxs-lookup"><span data-stu-id="29079-1357">Occurs before an <see cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" /> operation.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="29079-1358">处理 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件以执行特定于您的应用程序的其他初始化，验证参数的值，或在 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件执行更新操作之前更改参数值。</span><span class="sxs-lookup"><span data-stu-id="29079-1358">Handle the <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event to perform additional initialization that is specific to your application, to validate the values of parameters, or to change the parameter values before the <xref:System.Web.UI.WebControls.ObjectDataSource> control performs the update operation.</span></span> <span data-ttu-id="29079-1359">参数可用作由 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> 对象公开的 <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> 属性访问的 <xref:System.Collections.IDictionary> 集合。</span><span class="sxs-lookup"><span data-stu-id="29079-1359">The parameters are available as an <xref:System.Collections.IDictionary> collection that is accessed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs.InputParameters%2A> property, which is exposed by the <xref:System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs> object.</span></span>

 <span data-ttu-id="29079-1360">有关如何处理事件的详细信息，请参阅[处理和引发事件](~/docs/standard/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="29079-1360">For more information about how to handle events, see [Handling and Raising Events](~/docs/standard/events/index.md).</span></span>



## Examples
 <span data-ttu-id="29079-1361">以下三个示例演示了一个网页、一个代码隐藏页类和一个数据访问类，使用户能够在 Northwind 数据库中检索和更新 Employees 表中的记录。</span><span class="sxs-lookup"><span data-stu-id="29079-1361">The following three examples show a Web page, a code-behind page class, and a data-access class that enable a user to retrieve and update records in the Employees table in the Northwind database.</span></span>

 <span data-ttu-id="29079-1362">第一个示例显示一个网页，其中包含两个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件、一个 <xref:System.Web.UI.WebControls.DropDownList> 控件和一个 <xref:System.Web.UI.WebControls.DetailsView> 控件。</span><span class="sxs-lookup"><span data-stu-id="29079-1362">The first example shows a Web page that contains two <xref:System.Web.UI.WebControls.ObjectDataSource> controls, a <xref:System.Web.UI.WebControls.DropDownList> control, and a <xref:System.Web.UI.WebControls.DetailsView> control.</span></span> <span data-ttu-id="29079-1363">第一个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DropDownList> 控件用于从数据库检索和显示雇员姓名。</span><span class="sxs-lookup"><span data-stu-id="29079-1363">The first <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DropDownList> control are used to retrieve and display employee names from the database.</span></span> <span data-ttu-id="29079-1364">第二个 <xref:System.Web.UI.WebControls.ObjectDataSource> 控件和 <xref:System.Web.UI.WebControls.DetailsView> 控件用于从用户选择的员工记录中检索、显示和修改数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1364">The second <xref:System.Web.UI.WebControls.ObjectDataSource> control and the <xref:System.Web.UI.WebControls.DetailsView> control are used to retrieve, display, and modify the data from the employee record that is selected by the user.</span></span>

 [!code-aspx-csharp[System.Web.UI.WebControls.ObjectDataSource_18#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default.aspx#1)]
 [!code-aspx-vb[System.Web.UI.WebControls.ObjectDataSource_18#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default.aspx#1)]

 <span data-ttu-id="29079-1365">第二个示例演示 <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 和 <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件的处理程序。</span><span class="sxs-lookup"><span data-stu-id="29079-1365">The second example shows handlers for the <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> and <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> events.</span></span> <span data-ttu-id="29079-1366"><xref:System.Web.UI.WebControls.ObjectDataSource.Selected> 事件处理程序将序列化包含从 Employee 表中检索到的数据的对象。</span><span class="sxs-lookup"><span data-stu-id="29079-1366">The <xref:System.Web.UI.WebControls.ObjectDataSource.Selected> event handler serializes the object that contains data that was retrieved from the Employee table.</span></span> <span data-ttu-id="29079-1367">序列化的对象存储在视图状态中。</span><span class="sxs-lookup"><span data-stu-id="29079-1367">The serialized object is stored in view state.</span></span> <span data-ttu-id="29079-1368"><xref:System.Web.UI.WebControls.ObjectDataSource.Updating> 事件处理程序在视图状态中对对象进行反序列化，该对象包含要更新的数据记录的原始数据。</span><span class="sxs-lookup"><span data-stu-id="29079-1368">The <xref:System.Web.UI.WebControls.ObjectDataSource.Updating> event handler deserializes the object in view state that contains the original data for the data record that is being updated.</span></span> <span data-ttu-id="29079-1369">包含原始数据的对象将作为参数传递给 Update 方法。</span><span class="sxs-lookup"><span data-stu-id="29079-1369">The object that contains the original data is passed as a parameter to the Update method.</span></span> <span data-ttu-id="29079-1370">必须将原始数据传递到数据库，以便可以使用它来检查数据是否已被其他进程修改。</span><span class="sxs-lookup"><span data-stu-id="29079-1370">The original data must be passed to the database so that it can be used to check whether the data has been modified by another process.</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#2](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/Default.aspx.cs#2)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/Default.aspx.vb#2)]

 <span data-ttu-id="29079-1371">第三个示例显示与 Northwind 数据库交互的数据访问类。</span><span class="sxs-lookup"><span data-stu-id="29079-1371">The third example shows the data access class that interacts with the Northwind database.</span></span> <span data-ttu-id="29079-1372">类使用 LINQ 来查询和更新 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1372">The class uses LINQ to query and update the Employees table.</span></span> <span data-ttu-id="29079-1373">该示例需要一个 LINQ to SQL 类，该类表示 Northwind 数据库和 Employees 表。</span><span class="sxs-lookup"><span data-stu-id="29079-1373">The example requires a LINQ to SQL class that represents the Northwind database and Employees table.</span></span> <span data-ttu-id="29079-1374">有关详细信息，请参阅[如何：在 Web 项目中创建 LINQ to SQL 类](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081)。</span><span class="sxs-lookup"><span data-stu-id="29079-1374">For more information, see [How to: Create LINQ to SQL Classes in a Web Project](https://msdn.microsoft.com/library/20bf925f-2a6d-410d-8f65-7b5b8f555081).</span></span>

 [!code-csharp[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/CS/App_Code/EmployeeLogic.cs#5)]
 [!code-vb[System.Web.UI.WebControls.ObjectDataSource_18#5](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.WebControls.ObjectDataSource_18/VB/App_Code/EmployeeLogic.vb#5)]

 ]]></format>
        </remarks>
        <altmember cref="E:System.Web.UI.WebControls.ObjectDataSource.Updated" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSourceView.OnUpdating(System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs)" />
        <altmember cref="M:System.Web.UI.WebControls.ObjectDataSource.Update" />
        <altmember cref="P:System.Web.UI.WebControls.ObjectDataSource.UpdateParameters" />
        <related type="Article" href="https://msdn.microsoft.com/library/f1685b00-09f3-46a4-ad74-2bea21d12863"><span data-ttu-id="29079-1375">数据源 Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="29079-1375">Data Source Web Server Controls</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/1f10d54b-d7ba-47f4-832b-f83b8861d1d2"><span data-ttu-id="29079-1376">ObjectDataSource 控件概述</span><span class="sxs-lookup"><span data-stu-id="29079-1376">ObjectDataSource Control Overview</span></span></related>
        <related type="Article" href="https://msdn.microsoft.com/library/0165387c-847f-4731-a198-a0759004152f"><span data-ttu-id="29079-1377">创建 ObjectDataSource 控件源对象</span><span class="sxs-lookup"><span data-stu-id="29079-1377">Creating an ObjectDataSource Control Source Object</span></span></related>
      </Docs>
    </Member>
  </Members>
</Type>
